import{c as x,r as i,u as ie,m as le,q as $,n as I,w as D,d as U,p as G,j as e,A as V,s as oe,e as q}from"./index-BUG421M1.js";import{X as z}from"./x-B_SlqjkE.js";import{G as C,B as W,L as re,M as ne,a as A,C as de}from"./menu-CMB18ZPU.js";import{E as ce}from"./external-link-wjRtWW3a.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],me=x("circle-question-mark",xe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],L=x("coins",he);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],ge=x("layout-dashboard",ue);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],pe=x("settings",be);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],je=x("smartphone",fe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],K=x("trending-up",ve),S=({title:b,onClose:s,children:p})=>e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300 transform transition-all border border-white/20",children:[e.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex justify-between items-center bg-white/80 backdrop-blur-md sticky top-0 z-10",children:[e.jsx("h3",{className:"font-bold text-xl text-slate-800 tracking-tight",children:b}),e.jsx("button",{onClick:s,className:"p-2 bg-slate-100 rounded-full hover:bg-slate-200 hover:rotate-90 transition-all duration-300 text-slate-500",children:e.jsx(z,{size:18})})]}),e.jsx("div",{className:"p-6 max-h-[70vh] overflow-y-auto custom-scrollbar",children:p})]})}),Ae=({children:b,user:s,title:p})=>{var M,T;const[R,m]=i.useState(!1),f=ie(),H=le(),[j,h]=i.useState("NONE"),[v,P]=i.useState(!1),[N,w]=i.useState(null),[c,u]=i.useState(null),[Ne,J]=i.useState(0),[y,F]=i.useState([]);i.useEffect(()=>{const t=()=>{J(a=>a+1)};return window.addEventListener("storage_update_pronunciation",t),()=>window.removeEventListener("storage_update_pronunciation",t)},[]),i.useEffect(()=>{if(!s||!s.email)return;const t=$(U(q,"admin_notification"),D("target","==","ALL"),I(5)),a=$(U(q,"user_notifications"),D("userEmail","==",s.email),I(10)),o=G(t,d=>{const n=d.docs.map(r=>({id:r.id,...r.data(),type:"BROADCAST"}));_(n,"BROADCAST")}),l=G(a,d=>{const n=d.docs.map(r=>({id:r.id,...r.data(),type:"PERSONAL"}));_(n,"PERSONAL")});return()=>{o(),l()}},[s]);const[E,Q]=i.useState([]),[O,X]=i.useState([]),_=(t,a)=>{a==="BROADCAST"&&Q(t),a==="PERSONAL"&&X(t)};i.useEffect(()=>{const t=[...E,...O].sort((a,o)=>{var n,r;const l=((n=a.createdAt)==null?void 0:n.seconds)||0;return(((r=o.createdAt)==null?void 0:r.seconds)||0)-l});F(t)},[E,O]);const Y=async()=>{await oe(),f("/")},Z=[{id:1,title:"Cara Melihat Progress",desc:'Klik menu "View Progress" lalu pilih level bahasa inggris Anda (A1-C2).',steps:["Buka Sidebar (Menu kiri).",'Klik menu "View Progress" (icon grafik).',"Pilih Level Bahasa Inggris Anda.","Lihat grafik kemajuan belajar Anda."]},{id:2,title:"Cara Mengklaim Reward",desc:'Kumpulkan poin dari latihan soal dan tukarkan di menu "Reward".',steps:["Pastikan Anda sudah login dan memiliki poin.",'Buka menu "Rewards" di sidebar.',"Lihat total poin Anda.","Hubungi admin jika poin belum masuk."]}],ee=["A1","A2","B1","B2","C1","C2"],te=t=>{const a=t.charCodeAt(1);let o=a*2%100;if(t==="A1"){const l=localStorage.getItem("geuwat_local_progress_pronunciation");if(l){const d=JSON.parse(l),n=Object.values(d);if(n.length>0){const r=n.reduce((se,ae)=>se+ae,0);o=Math.round(r/4)}else o=0}else o=0}return[{subject:"Pronunciation",value:o,isLocal:t==="A1"},{subject:"Vocabulary",value:a*3%100},{subject:"Grammar",value:a*4%100},{subject:"Speaking",value:a*5%100}]},B=t=>t?new Intl.NumberFormat("id-ID").format(t):"0",g=({icon:t,label:a,onClick:o,isActive:l,colorClass:d})=>e.jsxs("button",{onClick:()=>{o(),m(!1)},className:`w-full flex items-center gap-4 px-5 py-4 rounded-2xl transition-all duration-300 font-medium group relative overflow-hidden
          ${l?"bg-gradient-to-r from-indigo-600 to-indigo-500 text-white shadow-lg shadow-indigo-300":"text-slate-500 hover:bg-slate-50"}`,children:[e.jsx("div",{className:`relative z-10 transition-transform duration-300 group-hover:scale-110 ${l?"text-white":d||"text-slate-400 group-hover:text-indigo-500"}`,children:e.jsx(t,{size:22,strokeWidth:l?2.5:2})}),e.jsx("span",{className:"relative z-10 tracking-wide text-sm",children:a}),!l&&e.jsx(de,{size:16,className:"ml-auto opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300 text-slate-300"})]}),k=()=>{h("NONE"),u(null),w(null)};return e.jsxs("div",{className:"min-h-screen bg-slate-50/50 flex font-sans selection:bg-indigo-100 selection:text-indigo-700",children:[R&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-40 lg:hidden transition-opacity duration-300",onClick:()=>m(!1)}),e.jsx("aside",{className:`
        fixed lg:sticky top-0 left-0 h-screen w-[280px] bg-white border-r border-slate-100 z-50
        transition-transform duration-300 ease-out flex flex-col shadow-xl lg:shadow-none
        ${R?"translate-x-0":"-translate-x-full lg:translate-x-0"}
      `,children:e.jsxs("div",{className:"p-6 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8 px-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-600 to-violet-600 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-200 transform hover:rotate-6 transition-transform duration-300",children:e.jsx("span",{className:"text-white font-bold text-xl",children:"G"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-slate-800 text-lg leading-tight tracking-tight",children:"Geuwat"}),e.jsx("p",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest",children:"Learning"})]})]}),e.jsx("button",{onClick:()=>m(!1),className:"lg:hidden text-slate-400 hover:text-slate-600 transition-colors",children:e.jsx(z,{size:24})})]}),e.jsxs("div",{className:"flex-1 space-y-2 overflow-y-auto px-1 custom-scrollbar",children:[e.jsx(g,{icon:ge,label:"Dashboard",onClick:()=>f("/dashboard"),isActive:H.pathname==="/dashboard"}),e.jsxs("div",{className:"pt-6 pb-2",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest px-5 mb-3",children:"Activities"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(g,{icon:K,label:"Progress",onClick:()=>h("PROGRESS"),colorClass:"text-emerald-500"}),e.jsx(g,{icon:C,label:"Rewards",onClick:()=>h("REWARD"),colorClass:"text-amber-500"}),e.jsx(g,{icon:W,label:"Tutorial",onClick:()=>h("TUTORIAL"),colorClass:"text-blue-500"})]})]})]}),e.jsxs("div",{className:"mt-auto pt-6 border-t border-slate-100",children:[e.jsxs("div",{onClick:()=>f("/settings"),className:"flex items-center gap-3 mb-4 p-3 bg-slate-50 rounded-2xl border border-slate-100/50 hover:bg-indigo-50 hover:border-indigo-100 transition-all cursor-pointer group",children:[s!=null&&s.photoURL?e.jsx("img",{src:s.photoURL,alt:"Profile",className:"w-10 h-10 rounded-full border-2 border-white shadow-sm object-cover"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white font-bold shadow-md",children:(M=s==null?void 0:s.displayName)==null?void 0:M.charAt(0)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-slate-800 truncate group-hover:text-indigo-700",children:s==null?void 0:s.displayName}),e.jsxs("p",{className:"text-[10px] font-medium text-slate-400 truncate uppercase tracking-wide flex items-center gap-1",children:[(s==null?void 0:s.role)==="user"?"Student":"Admin",e.jsx(pe,{size:10,className:"ml-1 opacity-0 group-hover:opacity-100 transition-opacity"})]})]})]}),e.jsxs("button",{onClick:Y,className:"w-full flex items-center justify-center gap-2 text-slate-500 hover:text-red-600 hover:bg-red-50 py-3 rounded-xl transition-all duration-300 text-sm font-bold group",children:[e.jsx(re,{size:18,className:"group-hover:-translate-x-1 transition-transform"}),"Sign Out"]})]})]})}),e.jsxs("main",{className:"flex-1 min-w-0 flex flex-col h-screen relative bg-slate-50/50",children:[e.jsxs("header",{className:"sticky top-0 bg-white/80 backdrop-blur-xl border-b border-slate-200/60 z-30 px-6 py-4 flex items-center justify-between transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>m(!0),className:"lg:hidden text-slate-500 hover:bg-slate-100 p-2 rounded-xl transition-colors",children:e.jsx(ne,{size:24})}),e.jsx("h2",{className:"text-lg font-bold text-slate-800 tracking-tight hidden md:block",children:p})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[(s==null?void 0:s.role)==="user"&&e.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-slate-100/80 px-4 py-2 rounded-full border border-slate-200",children:[e.jsx(L,{size:16,className:"text-amber-500"}),e.jsxs("span",{className:"text-xs font-bold text-slate-700",children:[B(s.balance)," pts"]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>P(!v),className:`relative p-2.5 rounded-full transition-all duration-200 ${v?"bg-indigo-50 text-indigo-600":"text-slate-400 hover:bg-slate-100 hover:text-slate-600"}`,children:[e.jsx(A,{size:22}),y.length>0&&e.jsx("span",{className:"absolute top-2.5 right-2.5 w-2.5 h-2.5 bg-rose-500 rounded-full border-2 border-white animate-pulse"})]}),v&&e.jsxs("div",{className:"absolute top-full right-0 mt-4 w-80 sm:w-96 bg-white rounded-2xl border border-slate-100 shadow-2xl shadow-slate-200/50 z-50 overflow-hidden animate-in fade-in slide-in-from-top-4 duration-200",children:[e.jsxs("div",{className:"px-5 py-4 border-b border-slate-50 flex justify-between items-center bg-slate-50/50",children:[e.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Notifications"}),e.jsx("button",{onClick:()=>P(!1),className:"text-slate-400 hover:text-slate-600",children:e.jsx(z,{size:16})})]}),e.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:y.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-10 text-slate-400",children:[e.jsx(A,{size:32,className:"mb-2 opacity-20"}),e.jsx("p",{className:"text-xs",children:"No notifications yet."})]}):y.map(t=>e.jsx("div",{className:`p-4 border-b border-slate-50 hover:bg-slate-50 transition-colors ${t.type==="PERSONAL"?"bg-indigo-50/30":""}`,children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shrink-0 ${t.type==="PERSONAL"?"bg-indigo-100 text-indigo-600":"bg-slate-100 text-slate-500"}`,children:t.type==="PERSONAL"?e.jsx(C,{size:14}):e.jsx(A,{size:14})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-slate-800 text-sm leading-tight mb-1",children:t.title}),e.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:t.message||t.desc}),t.link&&e.jsxs("a",{href:t.link,className:"inline-flex items-center gap-1 text-[10px] font-bold text-indigo-600 mt-2 hover:underline",children:["View Details ",e.jsx(ce,{size:10})]})]})]})},t.id))})]})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-8 custom-scrollbar",children:e.jsx("div",{className:"max-w-6xl mx-auto animate-in fade-in slide-in-from-bottom-4 duration-500",children:b})})]}),j==="PROGRESS"&&e.jsx(S,{title:"Your Learning Progress",onClose:k,children:N?e.jsxs("div",{className:"animate-in slide-in-from-right-8 duration-300",children:[e.jsxs("button",{onClick:()=>w(null),className:"mb-6 text-xs font-bold text-slate-400 hover:text-indigo-600 flex items-center gap-1 transition-colors",children:[e.jsx(V,{size:14})," Change Level"]}),e.jsxs("div",{className:"flex items-center justify-between mb-8 p-4 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-2xl text-white shadow-lg shadow-emerald-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs opacity-80 uppercase font-bold tracking-wider mb-1",children:"Current Level"}),e.jsx("h4",{className:"font-bold text-3xl",children:N})]}),e.jsx("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-sm",children:e.jsx(K,{size:28,className:"text-white"})})]}),e.jsx("div",{className:"space-y-5",children:te(N).map(t=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsxs("span",{className:"font-bold text-slate-700 flex items-center gap-2",children:[t.subject,t.isLocal&&e.jsx("span",{className:"bg-slate-100 p-0.5 rounded text-slate-400",title:"Saved on this device",children:e.jsx(je,{size:10})})]}),e.jsxs("span",{className:"font-bold text-indigo-600",children:[t.value,"%"]})]}),e.jsx("div",{className:"w-full bg-slate-100 rounded-full h-3 overflow-hidden shadow-inner",children:e.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 h-full rounded-full transition-all duration-1000 ease-out shadow-lg",style:{width:`${t.value}%`}})})]},t.subject))})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Select your English level to view detailed statistics:"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:ee.map(t=>e.jsx("button",{onClick:()=>w(t),className:"p-5 rounded-2xl border-2 border-slate-100 hover:border-indigo-500 hover:bg-indigo-50 hover:text-indigo-700 font-bold text-slate-600 transition-all duration-200 text-xl shadow-sm hover:shadow-md hover:-translate-y-1",children:t},t))})]})}),j==="REWARD"&&s&&e.jsx(S,{title:"My Rewards Info",onClose:k,children:e.jsxs("div",{className:"text-center py-2",children:[e.jsxs("div",{className:"relative w-24 h-24 mx-auto mb-6",children:[e.jsx("div",{className:"absolute inset-0 bg-amber-400 rounded-full blur-xl opacity-20 animate-pulse"}),e.jsx("div",{className:"relative w-full h-full bg-gradient-to-br from-amber-400 to-orange-500 rounded-full flex items-center justify-center text-white shadow-xl shadow-amber-200 border-4 border-white",children:e.jsx(C,{size:48})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 p-5 rounded-2xl border border-slate-100 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(L,{size:64})}),e.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-widest mb-1",children:"Referral Code"}),e.jsx("div",{className:"text-2xl font-mono font-bold text-indigo-600 tracking-wider select-all cursor-pointer hover:text-indigo-700 transition-colors",children:s.referralCode||"-"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100",children:[e.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider mb-2",children:"Current Level"}),e.jsx("div",{className:"text-lg font-bold text-slate-800",children:s.level||"Rookie"})]}),e.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100",children:[e.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider mb-2",children:"Balance"}),e.jsxs("div",{className:"text-lg font-bold text-amber-600 flex items-center justify-center gap-1",children:[e.jsx(L,{size:18,className:"fill-amber-600 stroke-amber-700"}),B(s.balance)]})]})]})]})]})}),j==="TUTORIAL"&&e.jsx(S,{title:c?c.title:"Help & Tutorials",onClose:()=>c?u(null):k(),children:c?e.jsxs("div",{className:"animate-in slide-in-from-right-8 duration-300",children:[e.jsxs("button",{onClick:()=>u(null),className:"mb-6 text-xs font-bold text-slate-400 hover:text-slate-600 flex items-center gap-1 transition-colors",children:[e.jsx(V,{size:14})," Back to List"]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-100 shadow-sm mb-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-50 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),e.jsx("h4",{className:"font-bold text-lg text-slate-800 mb-2 relative z-10",children:c.title}),e.jsx("p",{className:"text-sm text-slate-500 mb-6 relative z-10",children:c.desc}),e.jsx("div",{className:"space-y-4 relative z-10",children:(T=c.steps)==null?void 0:T.map((t,a)=>e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-indigo-600 text-white flex items-center justify-center text-xs font-bold shadow-md shadow-indigo-200",children:a+1}),e.jsx("span",{className:"text-sm text-slate-600 font-medium pt-0.5",children:t})]},a))})]}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-xl border border-indigo-100 flex gap-3 items-start",children:[e.jsx("div",{className:"text-indigo-600 mt-0.5",children:e.jsx(me,{size:18})}),e.jsx("p",{className:"text-xs text-indigo-800 leading-relaxed",children:"Jika Anda mengalami kendala teknis, silakan hubungi admin via WhatsApp untuk bantuan lebih lanjut."})]})]}):e.jsx("div",{className:"space-y-3",children:Z.map(t=>e.jsxs("button",{onClick:()=>u(t),className:"w-full text-left bg-white border border-slate-200 p-5 rounded-2xl shadow-sm hover:border-indigo-500 hover:shadow-indigo-100 hover:shadow-lg transition-all group duration-300",children:[e.jsxs("h5",{className:"font-bold text-slate-800 flex items-center gap-2 mb-2 group-hover:text-indigo-600 transition-colors",children:[e.jsx("div",{className:"p-1.5 bg-blue-50 text-blue-600 rounded-lg group-hover:bg-indigo-100 group-hover:text-indigo-600 transition-colors",children:e.jsx(W,{size:18})}),t.title]}),e.jsx("p",{className:"text-xs text-slate-500 leading-relaxed pl-9",children:t.desc})]},t.id))})})]})};export{Ae as L,K as T};
