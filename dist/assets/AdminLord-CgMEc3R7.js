import{c as E,r as o,j as e,R as A,T as R,q as z,i as _,f as d,l as L,v as T,t as I,e as w,d as J}from"./index-C5MxSQsq.js";import{A as O,U,D as $,T as q,C as B}from"./AdminLayout-ySf5CHEQ.js";import{G,B as M}from"./log-out-DAX5-8ca.js";import{S as F}from"./save-DmZFUPOU.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],Y=E("terminal",V),W=({user:N})=>{const[n,y]=o.useState("users"),[x,i]=o.useState([]),[m,h]=o.useState(!1),[u,b]=o.useState(null),[t,p]=o.useState(null),[f,g]=o.useState(""),C=["users","registrations","admin_referral_code","admin_database","admin_reward","admin_notification","reward_calculations"],j=async()=>{h(!0),i([]);try{const s=z(_(d,n),L(50)),a=(await T(s)).docs.map(l=>({id:l.id,...l.data()}));i(a)}catch(s){console.error("Lord Access Error:",s),alert("Failed to fetch data. Check console.")}finally{h(!1)}};o.useEffect(()=>{j()},[n]);const S=s=>{p(s.id),g(JSON.stringify(s,null,2)),b(null)},k=async()=>{if(t)try{const s=JSON.parse(f),{id:r,...a}=s;await J(w(d,n,t),a),i(l=>l.map(v=>v.id===t?{id:t,...a}:v)),p(null),alert("Document updated directly.")}catch(s){b("Invalid JSON: "+s.message)}},D=async s=>{if(confirm(`ARE YOU SURE? This will permanently delete document ${s} from ${n}.`))try{await I(w(d,n,s)),i(r=>r.filter(a=>a.id!==s))}catch(r){alert("Delete failed: "+r.message)}},c=({title:s,count:r,icon:a,color:l})=>e.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-6 rounded-xl flex items-center justify-between group hover:border-amber-500/50 transition-all",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase tracking-wider mb-1",children:s}),e.jsx("h3",{className:"text-2xl font-bold text-white group-hover:text-amber-400 transition-colors",children:r})]}),e.jsx("div",{className:`p-3 rounded-lg ${l} bg-opacity-20`,children:e.jsx(a,{className:l.replace("bg-","text-"),size:24})})]});return e.jsxs(O,{user:N,title:"Lord Command Center",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx("div",{onClick:()=>window.location.hash="#/admin/referral",className:"cursor-pointer",children:e.jsx(c,{title:"Referral System",count:"Access",icon:U,color:"bg-indigo-500"})}),e.jsx("div",{onClick:()=>window.location.hash="#/admin/database",className:"cursor-pointer",children:e.jsx(c,{title:"Database Master",count:"Access",icon:$,color:"bg-purple-500"})}),e.jsx("div",{onClick:()=>window.location.hash="#/admin/reward",className:"cursor-pointer",children:e.jsx(c,{title:"Reward Vault",count:"Access",icon:G,color:"bg-emerald-500"})}),e.jsx("div",{onClick:()=>window.location.hash="#/admin/notification",className:"cursor-pointer",children:e.jsx(c,{title:"Broadcasts",count:"Access",icon:M,color:"bg-rose-500"})})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl overflow-hidden shadow-2xl shadow-black",children:[e.jsxs("div",{className:"p-4 border-b border-slate-800 bg-slate-950 flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Y,{size:20,className:"text-amber-500"}),e.jsx("h3",{className:"font-bold text-slate-200",children:"Raw Data Viewer (God Mode)"})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[e.jsx("select",{value:n,onChange:s=>y(s.target.value),className:"bg-slate-800 text-slate-300 text-sm border-none rounded-lg py-2 px-4 outline-none focus:ring-1 focus:ring-amber-500",children:C.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("button",{onClick:j,className:"p-2 bg-slate-800 hover:bg-slate-700 rounded-lg text-slate-400 hover:text-white transition-colors",children:e.jsx(A,{size:18,className:m?"animate-spin":""})})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row h-[600px]",children:[e.jsx("div",{className:"w-full lg:w-1/3 border-r border-slate-800 overflow-y-auto p-2 bg-slate-900/50",children:m?e.jsx("div",{className:"p-4 text-slate-500 text-sm",children:"Scanning sector..."}):x.length===0?e.jsx("div",{className:"p-4 text-slate-600 text-sm",children:"Collection is empty."}):x.map(s=>e.jsxs("div",{onClick:()=>S(s),className:`p-3 rounded-lg cursor-pointer mb-1 border transition-all
                           ${t===s.id?"bg-amber-900/20 border-amber-500/50 text-amber-100":"bg-transparent border-transparent hover:bg-slate-800 text-slate-400"}
                        `,children:[e.jsx("div",{className:"font-mono text-xs font-bold truncate",children:s.id}),e.jsx("div",{className:"text-[10px] opacity-70 truncate",children:s.email||s.fullName||s.title||"No Label"})]},s.id))}),e.jsx("div",{className:"w-full lg:w-2/3 bg-slate-950 p-4 flex flex-col relative",children:t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-xs font-mono text-slate-500",children:["Editing: ",t]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>D(t),className:"text-red-500 hover:bg-red-900/20 p-2 rounded transition-colors",children:e.jsx(q,{size:16})}),e.jsxs("button",{onClick:k,className:"bg-amber-600 hover:bg-amber-700 text-white px-4 py-1.5 rounded text-xs font-bold flex items-center gap-2",children:[e.jsx(F,{size:14})," Save Changes"]})]})]}),e.jsx("textarea",{value:f,onChange:s=>g(s.target.value),className:"flex-1 bg-slate-900 text-green-400 font-mono text-xs p-4 rounded-lg outline-none border border-slate-800 focus:border-amber-900 resize-none",spellCheck:!1}),u&&e.jsxs("div",{className:"absolute bottom-6 left-6 right-6 bg-red-900/80 text-white text-xs p-3 rounded border border-red-500 backdrop-blur-sm flex items-center gap-2",children:[e.jsx(R,{size:14})," ",u]})]}):e.jsxs("div",{className:"flex-1 flex items-center justify-center text-slate-700 flex-col gap-4",children:[e.jsx(B,{size:64,className:"opacity-20"}),e.jsx("p",{children:"Select a document from the left to edit directly."})]})})]})]})]})};export{W as AdminLord};
