import{r,q as E,o as A,d as g,p as P,j as e,L as V,y as I,k as f,e as l,i as F,x as j,F as O}from"./index-BUG421M1.js";import{A as q,T as M}from"./AdminLayout-Cdz-8OTX.js";import{S as X}from"./search-Bp97E1ok.js";import{P as B}from"./plus-Bpa3bQcO.js";import{B as G}from"./menu-CMB18ZPU.js";import{P as U}from"./pen-line-BPujdG9E.js";import{V as R}from"./video-BytXmzPF.js";import{M as W}from"./mic-tUOQdGDi.js";import{F as Y}from"./file-text-B_PUJLpS.js";import{X as $}from"./x-B_SlqjkE.js";import{S as H}from"./save-BJ10daty.js";const ie=({user:u})=>{const[v,y]=r.useState([]),[w,N]=r.useState(!0),[n,C]=r.useState(""),[S,d]=r.useState(!1),[c,x]=r.useState(null),[m,p]=r.useState(!1),[s,a]=r.useState({title:"",subject:"Pronunciation",type:"TEXT",content:"",description:""});r.useEffect(()=>{const t=E(g(l,"lessons"),A("createdAt","desc")),o=P(t,z=>{const D=z.docs.map(h=>({id:h.id,...h.data()}));y(D),N(!1)});return()=>o()},[]);const i=()=>{a({title:"",subject:"Pronunciation",type:"TEXT",content:"",description:""}),x(null),d(!1)},T=t=>{a({title:t.title,subject:t.subject,type:t.type,content:t.content,description:t.description}),x(t.id),d(!0)},k=async t=>{t.preventDefault(),p(!0);try{c?await F(f(l,"lessons",c),{...s,updatedAt:j()}):await O(g(l,"lessons"),{...s,createdAt:j(),createdBy:u.uid}),i()}catch(o){console.error("Save error:",o),alert("Failed to save data.")}finally{p(!1)}},L=async t=>{if(confirm("Are you sure you want to delete this lesson?"))try{await I(f(l,"lessons",t))}catch(o){console.error("Delete error:",o),alert("Failed to delete.")}},b=v.filter(t=>t.title.toLowerCase().includes(n.toLowerCase())||t.subject.toLowerCase().includes(n.toLowerCase()));return e.jsxs(q,{user:u,title:"Content Manager",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 mb-6",children:[e.jsxs("div",{className:"relative w-full md:w-80",children:[e.jsx(X,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),e.jsx("input",{type:"text",placeholder:"Search materials...",value:n,onChange:t=>C(t.target.value),className:"w-full pl-9 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm"})]}),e.jsxs("button",{onClick:()=>{i(),d(!0)},className:"w-full md:w-auto bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2.5 rounded-xl font-bold flex items-center justify-center gap-2 shadow-lg shadow-indigo-200 transition-all",children:[e.jsx(B,{size:18})," Add New Lesson"]})]}),w?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(t=>e.jsx("div",{className:"h-40 bg-slate-200 rounded-xl animate-pulse"},t))}):b.length===0?e.jsxs("div",{className:"text-center py-20 bg-white border-2 border-dashed border-slate-200 rounded-2xl",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-400",children:e.jsx(G,{size:32})}),e.jsx("p",{className:"text-slate-500 font-medium",children:"No learning materials found."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(t=>e.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition-all group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider
                       ${t.subject==="Pronunciation"?"bg-rose-50 text-rose-600":t.subject==="Grammar"?"bg-indigo-50 text-indigo-600":t.subject==="Vocabulary"?"bg-amber-50 text-amber-600":"bg-emerald-50 text-emerald-600"}
                    `,children:t.subject}),e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>T(t),className:"p-1.5 hover:bg-slate-100 rounded text-slate-400 hover:text-indigo-600",children:e.jsx(U,{size:14})}),e.jsx("button",{onClick:()=>L(t.id),className:"p-1.5 hover:bg-red-50 rounded text-slate-400 hover:text-red-600",children:e.jsx(M,{size:14})})]})]}),e.jsx("h3",{className:"font-bold text-slate-800 text-lg mb-2 leading-tight",children:t.title}),e.jsx("p",{className:"text-sm text-slate-500 line-clamp-2 mb-4 h-10",children:t.description}),e.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-400 pt-3 border-t border-slate-100",children:[t.type==="VIDEO"?e.jsx(R,{size:14}):t.type==="AUDIO"?e.jsx(W,{size:14}):e.jsx(Y,{size:14}),e.jsx("span",{children:t.type})]})]},t.id))}),S&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/50 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white w-full max-w-lg rounded-2xl shadow-2xl border border-slate-100 animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-5 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-800",children:c?"Edit Lesson":"Create New Lesson"}),e.jsx("button",{onClick:i,className:"text-slate-400 hover:text-slate-600",children:e.jsx($,{size:20})})]}),e.jsxs("form",{onSubmit:k,className:"p-6 overflow-y-auto space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1 block",children:"Title"}),e.jsx("input",{required:!0,type:"text",value:s.title,onChange:t=>a({...s,title:t.target.value}),className:"w-full p-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none text-sm",placeholder:"e.g. Introduction to Vowels"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1 block",children:"Subject"}),e.jsxs("select",{value:s.subject,onChange:t=>a({...s,subject:t.target.value}),className:"w-full p-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none text-sm bg-white",children:[e.jsx("option",{value:"Pronunciation",children:"Pronunciation"}),e.jsx("option",{value:"Grammar",children:"Grammar"}),e.jsx("option",{value:"Vocabulary",children:"Vocabulary"}),e.jsx("option",{value:"Listening",children:"Listening"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1 block",children:"Type"}),e.jsxs("select",{value:s.type,onChange:t=>a({...s,type:t.target.value}),className:"w-full p-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none text-sm bg-white",children:[e.jsx("option",{value:"TEXT",children:"Article / Text"}),e.jsx("option",{value:"VIDEO",children:"Video (YouTube)"}),e.jsx("option",{value:"AUDIO",children:"Audio"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1 block",children:s.type==="TEXT"?"Content Body":"Media URL"}),s.type==="TEXT"?e.jsx("textarea",{required:!0,value:s.content,onChange:t=>a({...s,content:t.target.value}),className:"w-full p-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none text-sm h-32 resize-none",placeholder:"Write the lesson content here..."}):e.jsx("input",{required:!0,type:"url",value:s.content,onChange:t=>a({...s,content:t.target.value}),className:"w-full p-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none text-sm",placeholder:"https://..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1 block",children:"Description"}),e.jsx("input",{type:"text",value:s.description,onChange:t=>a({...s,description:t.target.value}),className:"w-full p-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none text-sm",placeholder:"Short summary for the card view"})]}),e.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:i,className:"px-5 py-2.5 rounded-xl font-bold text-slate-500 hover:bg-slate-100 transition-colors text-sm",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:m,className:"px-6 py-2.5 rounded-xl font-bold bg-indigo-600 text-white hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200 flex items-center gap-2 text-sm",children:[m?e.jsx(V,{size:16,className:"animate-spin"}):e.jsx(H,{size:16}),"Save Lesson"]})]})]})]})})]})};export{ie as AdminContent};
