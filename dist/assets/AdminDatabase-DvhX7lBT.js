import{c as v,r as n,j as e,E as Ee,T as ie,m as W,R as Ae,q as Y,i as J,f as m,w as Se,v as X,x as Ce,l as ke,y as Ue,z as Re,e as _,s as De,U as Le,d as ze,t as Te,p as _e}from"./index-C5MxSQsq.js";import{A as Be,U as ee,T as se}from"./AdminLayout-ySf5CHEQ.js";import{F as Pe,S as te,a as ae}from"./Skeleton-BX0QDTub.js";import{C as le}from"./circle-check-big-D2dOgAAE.js";import{A as Oe}from"./arrow-right-jm2l9Inu.js";import{C as Ie}from"./chevron-left-DnAGv6LE.js";import{C as Me}from"./log-out-DAX5-8ca.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],B=v("check",Fe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Qe=v("credit-card",$e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],qe=v("shield-alert",Ze);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],re=v("square-check-big",Ge);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],ne=v("square",He),Ke=({isOpen:E,title:i,message:A,onConfirm:g,onCancel:S,isProcessing:b,confirmLabel:j="Ya, Proses",isDestructive:p=!1})=>E?e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/50 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsx("div",{className:"bg-white w-full max-w-sm rounded-2xl shadow-2xl overflow-hidden border border-slate-100 animate-in zoom-in-95 duration-200",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3 text-slate-800",children:[e.jsx("div",{className:`p-2 rounded-full ${p?"bg-red-100 text-red-600":"bg-indigo-100 text-indigo-600"}`,children:e.jsx(ie,{size:20})}),e.jsx("h3",{className:"font-bold text-lg",children:i})]}),e.jsx("p",{className:"text-slate-600 text-sm whitespace-pre-wrap leading-relaxed mb-6 pl-1",children:A}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:S,disabled:b,className:"px-4 py-2 rounded-lg text-slate-600 hover:bg-slate-100 font-bold text-xs transition-colors",children:"Batal"}),e.jsxs("button",{onClick:g,disabled:b,className:`px-4 py-2 rounded-lg text-white font-bold text-xs transition-colors flex items-center gap-2 shadow-md 
                ${p?"bg-red-600 hover:bg-red-700 shadow-red-200":"bg-indigo-600 hover:bg-indigo-700 shadow-indigo-200"}`,children:[b&&e.jsx("div",{className:"w-3 h-3 border-2 border-white/30 border-t-white rounded-full animate-spin"}),j]})]})]})})}):null,ts=({user:E})=>{var H,K,V;const[i,A]=n.useState("QUEUE"),[g,S]=n.useState([]),[b,j]=n.useState([]),[p,C]=n.useState(!1),[P,u]=n.useState(null),[I,o]=n.useState(null),[M,k]=n.useState(null),[F,de]=n.useState(""),[$,oe]=n.useState(""),[d,U]=n.useState("DEFAULT"),[R,ce]=n.useState("ALL"),[D,N]=n.useState(1),O=10,[c,y]=n.useState(new Set),[r,h]=n.useState({isOpen:!1,type:null,data:null}),Q=async()=>{C(!0),o(null);try{const s=Y(J(m,"registrations"),Se("status","==","SENT_TO_DB")),a=(await X(s)).docs.map(l=>({id:l.id,...l.data()}));a.sort((l,f)=>{var x,T;return(((x=l.createdAt)==null?void 0:x.seconds)||0)-(((T=f.createdAt)==null?void 0:T.seconds)||0)}),S(a)}catch(s){console.error("Error fetching queue:",s),o("Failed to load queue.")}finally{C(!1)}},xe=async()=>{C(!0),o(null),y(new Set);try{const s=Y(J(m,"users"),Ce("createdAt","desc"),ke(100)),a=(await X(s)).docs.map(l=>({id:l.id,...l.data()}));j(a)}catch(s){console.error("Error fetching users:",s),o("Failed to load users list.")}finally{C(!1)}};n.useEffect(()=>{N(1),o(null),k(null),i==="QUEUE"?Q():xe()},[E,i]);const he=s=>{if(!s.generatedReferralCode){o("Gagal: Kode Password (Generated Code) kosong.");return}h({isOpen:!0,type:"PROCESS_REG",data:s})},me=async()=>{var t;const s=r.data;if(s){u(s.id);try{const a=s.email.toLowerCase();try{await Ue(a,s.generatedReferralCode)}catch(x){(t=x.message)!=null&&t.includes("email-already-in-use")||console.error(x)}const l=new Date,f=new Date;f.setDate(l.getDate()+30),await Re(_(m,"users",a),{email:a,fullName:s.fullName,displayName:s.fullName,whatsapp:s.whatsapp||"-",referralCode:s.generatedReferralCode,referredBy:s.usedReferralCode!=="-"?s.usedReferralCode:null,role:Le.USER,balance:0,level:"Rookie",createdAt:De(),validUntil:f.toISOString().split("T")[0],photoURL:null},{merge:!0}),await ze(_(m,"registrations",s.id),{status:"VERIFIED"}),S(x=>x.filter(T=>T.id!==s.id)),k(`Berhasil! Data ${s.fullName} diproses.`),h({isOpen:!1,type:null,data:null})}catch(a){o(`Gagal memproses: ${a.message}`)}finally{u(null)}}},pe=s=>{const t=new Set(c);t.has(s)?t.delete(s):t.add(s),y(t)},ue=s=>{if(c.size===s.length&&s.length>0)y(new Set);else{const t=new Set;s.forEach(a=>t.add(a.id)),y(t)}},fe=s=>{h({isOpen:!0,type:"DELETE_USER",data:s})},ge=()=>{h({isOpen:!0,type:"BULK_DELETE_USERS",data:Array.from(c)})},be=async()=>{const s=r.data;u(s.id);try{await Te(_(m,"users",s.id)),j(t=>t.filter(a=>a.id!==s.id)),k(`User ${s.email} berhasil dihapus.`),h({isOpen:!1,type:null,data:null})}catch(t){o("Gagal menghapus user: "+t.message)}finally{u(null)}},je=async()=>{const s=r.data;if(!(!s||s.length===0)){u("BULK");try{const t=_e(m);s.forEach(a=>{t.delete(_(m,"users",a))}),await t.commit(),j(a=>a.filter(l=>!c.has(l.id))),y(new Set),k(`Berhasil menghapus ${s.length} user.`),h({isOpen:!1,type:null,data:null})}catch(t){o("Bulk delete failed: "+t.message)}finally{u(null)}}},Ne=s=>{switch(s){case"VERIFIED":return e.jsxs("span",{className:"inline-flex items-center gap-1 text-[10px] font-bold text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full border border-emerald-100",children:[e.jsx(le,{size:10})," Registered"]});case"SENT_TO_DB":return e.jsxs("span",{className:"inline-flex items-center gap-1 text-[10px] font-bold text-amber-600 bg-amber-50 px-2 py-0.5 rounded-full border border-amber-100",children:[e.jsx(W,{size:10})," Queued"]});case"PAID":return e.jsx("span",{className:"inline-flex items-center gap-1 text-[10px] font-bold text-blue-600 bg-blue-50 px-2 py-0.5 rounded-full border border-blue-100",children:"Paid"});default:return e.jsx("span",{className:"inline-flex items-center gap-1 text-[10px] font-bold text-slate-500 bg-slate-100 px-2 py-0.5 rounded-full",children:"Draft"})}},ye=s=>{if(!s)return"-";const t=s.seconds?new Date(s.seconds*1e3):new Date(s);return new Intl.DateTimeFormat("id-ID",{day:"2-digit",month:"short",year:"2-digit",hour:"2-digit",minute:"2-digit"}).format(t)},we=i==="QUEUE"?g:b,Z=i==="QUEUE"?$:F,w=we.filter(s=>{const t=Z.toLowerCase();if(!(!Z||(s.fullName||"").toLowerCase().includes(t)||(s.email||"").toLowerCase().includes(t)||(s.referralCode||"").toLowerCase().includes(t)))return!1;if(i==="DATABASE"&&R!=="ALL"){const l=(s.role||"user").toLowerCase();if(R==="ADMIN"&&!l.includes("admin")||R==="USER"&&l!=="user")return!1}return!0}).sort((s,t)=>{var a,l;if(i==="DATABASE")switch(d){case"A_Z":return(s.fullName||"").localeCompare(t.fullName||"");case"Z_A":return(t.fullName||"").localeCompare(s.fullName||"");case"BALANCE":return(t.balance||0)-(s.balance||0);case"DEFAULT":default:const f=((a=s.createdAt)==null?void 0:a.seconds)||0;return(((l=t.createdAt)==null?void 0:l.seconds)||0)-f}return 0}),q=D*O,ve=q-O,L=w.slice(ve,q),z=Math.ceil(w.length/O),G=()=>z<=1?null:e.jsxs("div",{className:"flex justify-center items-center gap-4 mt-6",children:[e.jsx("button",{onClick:()=>N(s=>Math.max(s-1,1)),disabled:D===1,className:"p-2 rounded-full hover:bg-slate-100 disabled:opacity-30 disabled:hover:bg-transparent",children:e.jsx(Ie,{size:20,className:"text-slate-600"})}),e.jsxs("span",{className:"text-sm font-bold text-slate-500",children:["Page ",D," of ",z]}),e.jsx("button",{onClick:()=>N(s=>Math.min(s+1,z)),disabled:D===z,className:"p-2 rounded-full hover:bg-slate-100 disabled:opacity-30 disabled:hover:bg-transparent",children:e.jsx(Me,{size:20,className:"text-slate-600"})})]});return e.jsxs(Be,{user:E,title:"Master Database",children:[e.jsxs("div",{className:"bg-white border-b border-slate-200 px-6 py-4 flex flex-wrap gap-4 sticky top-0 z-30 shadow-sm",children:[e.jsxs("button",{onClick:()=>A("QUEUE"),className:`px-5 py-2.5 rounded-xl text-sm font-bold flex items-center gap-2 transition-all duration-200
            ${i==="QUEUE"?"bg-indigo-600 text-white shadow-lg shadow-indigo-200 scale-105":"bg-slate-100 text-slate-500 hover:bg-slate-200 hover:text-slate-700"}
          `,children:[e.jsx(Pe,{size:18}),"Antrian (Pending)",g.length>0&&e.jsx("span",{className:"ml-2 bg-amber-400 text-amber-900 text-[10px] px-2 py-0.5 rounded-full shadow-sm",children:g.length})]}),e.jsxs("button",{onClick:()=>A("DATABASE"),className:`px-5 py-2.5 rounded-xl text-sm font-bold flex items-center gap-2 transition-all duration-200
            ${i==="DATABASE"?"bg-indigo-600 text-white shadow-lg shadow-indigo-200 scale-105":"bg-slate-100 text-slate-500 hover:bg-slate-200 hover:text-slate-700"}
          `,children:[e.jsx(ee,{size:18}),"User Management"]})]}),e.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[i==="QUEUE"&&e.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 text-indigo-700 p-4 rounded-xl flex items-start gap-3",children:[e.jsx(Ee,{size:20,className:"mt-0.5 shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-sm",children:"Mode: Data Entry (FIFO)"}),e.jsx("p",{className:"text-xs mt-1",children:"Menampilkan antrian dari TERLAMA ke TERBARU. Harap proses data paling atas terlebih dahulu."})]})]}),I&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 p-4 rounded-xl flex items-start gap-3 animate-in fade-in",children:[e.jsx(ie,{size:20,className:"mt-0.5 shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-sm",children:"Error"}),e.jsx("p",{className:"text-xs mt-1",children:I})]})]}),M&&e.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 text-emerald-700 p-4 rounded-xl flex items-start gap-3 animate-in fade-in",children:[e.jsx(le,{size:20,className:"mt-0.5 shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-sm",children:"Berhasil"}),e.jsx("p",{className:"text-xs mt-1",children:M})]})]}),i==="QUEUE"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("h3",{className:"font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(W,{size:18,className:"text-amber-500"})," Antrian Pending"]}),e.jsxs("button",{onClick:Q,className:"text-xs font-bold text-indigo-600 hover:underline flex items-center gap-1",children:[e.jsx(Ae,{size:12,className:p?"animate-spin":""})," Refresh"]})]}),e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx(te,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),e.jsx("input",{type:"text",placeholder:"Filter Name/Email...",value:$,onChange:s=>{oe(s.target.value),N(1)},className:"w-full pl-9 pr-4 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 font-semibold border-b border-slate-200 text-xs uppercase tracking-wider",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Waktu Daftar"}),e.jsx("th",{className:"px-6 py-4",children:"Identity"}),e.jsx("th",{className:"px-6 py-4",children:"Codes"}),e.jsx("th",{className:"px-6 py-4",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:p?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-8",children:e.jsx(ae,{className:"h-10 w-full"})})}):L.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-16 text-center text-slate-400",children:"Antrian Kosong."})}):L.map((s,t)=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-xs font-mono text-slate-500",children:ye(s.createdAt)}),t===0&&e.jsx("span",{className:"text-[10px] font-bold text-red-600 bg-red-50 px-1 rounded animate-pulse",children:"PRIORITY"})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-bold text-slate-800",children:s.fullName}),e.jsx("div",{className:"text-xs text-slate-500",children:s.email}),e.jsx("div",{className:"text-[10px] text-slate-400 font-mono",children:s.whatsapp})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"text-xs text-slate-400",children:["Ref: ",e.jsx("span",{className:"font-bold text-slate-600",children:s.usedReferralCode})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Key: ",e.jsx("span",{className:"font-bold text-indigo-600 bg-indigo-50 px-1 rounded",children:s.generatedReferralCode})]})]})}),e.jsx("td",{className:"px-6 py-4",children:Ne(s.status)}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:()=>he(s),disabled:!!P,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-bold text-xs flex items-center justify-center gap-1 transition-colors w-full md:w-auto shadow-md shadow-indigo-100",children:P===s.id?"...":e.jsxs(e.Fragment,{children:[e.jsx(Oe,{size:14})," Proses"]})})})]},s.id))})]})}),e.jsx("div",{className:"pb-6",children:e.jsx(G,{})})]})]}),i==="DATABASE"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"rounded-xl overflow-hidden shadow-lg border border-slate-200 mb-6 font-sans",children:[e.jsxs("div",{className:"bg-[#0099dd] p-4 text-white font-bold text-lg flex items-center gap-2",children:[e.jsx(ee,{size:24}),"User Directory"]}),e.jsxs("div",{className:"bg-[#1e1e1e] p-4 text-slate-300 space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsxs("select",{value:R,onChange:s=>ce(s.target.value),className:"bg-[#2a2a2a] text-sm text-white px-4 py-2 rounded hover:bg-[#333] border-none outline-none cursor-pointer",children:[e.jsx("option",{value:"ALL",children:"Role: All"}),e.jsx("option",{value:"USER",children:"User / Member"}),e.jsx("option",{value:"ADMIN",children:"Admin / Staff"})]}),e.jsxs("div",{className:"flex-1 flex gap-0",children:[e.jsx("input",{type:"text",placeholder:"Cari nama, email, atau kode referral...",value:F,onChange:s=>{de(s.target.value),N(1)},className:"flex-1 bg-[#2a2a2a] text-white text-sm px-4 py-2 rounded-l outline-none focus:bg-[#333] placeholder:text-slate-500"}),e.jsxs("button",{className:"bg-[#0099dd] text-white px-6 py-2 rounded-r font-bold text-sm hover:bg-[#0088c5] flex items-center gap-2 transition-colors",children:[e.jsx(te,{size:16})," Cari"]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm font-medium",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:text-white transition-colors",children:[e.jsx("div",{className:`w-4 h-4 border rounded flex items-center justify-center ${d==="DEFAULT"?"bg-[#00bfa5] border-[#00bfa5]":"border-slate-500"}`,children:d==="DEFAULT"&&e.jsx(B,{size:12,className:"text-white",strokeWidth:4})}),e.jsx("span",{className:d==="DEFAULT"?"text-white":"",children:"Default (Newest)"}),e.jsx("input",{type:"radio",name:"sort",className:"hidden",onClick:()=>U("DEFAULT")})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:text-white transition-colors",children:[e.jsx("div",{className:`w-4 h-4 border rounded flex items-center justify-center ${d==="A_Z"?"bg-[#00bfa5] border-[#00bfa5]":"border-slate-500"}`,children:d==="A_Z"&&e.jsx(B,{size:12,className:"text-white",strokeWidth:4})}),e.jsx("span",{className:d==="A_Z"?"text-white":"",children:"A-Z"}),e.jsx("input",{type:"radio",name:"sort",className:"hidden",onClick:()=>U("A_Z")})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:text-white transition-colors",children:[e.jsx("div",{className:`w-4 h-4 border rounded flex items-center justify-center ${d==="Z_A"?"bg-[#00bfa5] border-[#00bfa5]":"border-slate-500"}`,children:d==="Z_A"&&e.jsx(B,{size:12,className:"text-white",strokeWidth:4})}),e.jsx("span",{className:d==="Z_A"?"text-white":"",children:"Z-A"}),e.jsx("input",{type:"radio",name:"sort",className:"hidden",onClick:()=>U("Z_A")})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:text-white transition-colors",children:[e.jsx("div",{className:`w-4 h-4 border rounded flex items-center justify-center ${d==="BALANCE"?"bg-[#00bfa5] border-[#00bfa5]":"border-slate-500"}`,children:d==="BALANCE"&&e.jsx(B,{size:12,className:"text-white",strokeWidth:4})}),e.jsx("span",{className:d==="BALANCE"?"text-white":"",children:"Balance (Highest)"}),e.jsx("input",{type:"radio",name:"sort",className:"hidden",onClick:()=>U("BALANCE")})]})]}),c.size>0&&e.jsxs("button",{onClick:ge,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-1.5 rounded-lg text-xs font-bold flex items-center gap-2 shadow-lg shadow-red-900/50 transition-all animate-in fade-in slide-in-from-right-4",children:[e.jsx(se,{size:14})," Delete Selected (",c.size,")"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 font-semibold border-b border-slate-200 text-xs uppercase tracking-wider",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 w-10",children:e.jsx("button",{onClick:()=>ue(w),className:"text-slate-400 hover:text-indigo-600",children:c.size===w.length&&w.length>0?e.jsx(re,{size:18,className:"text-indigo-600"}):e.jsx(ne,{size:18})})}),e.jsx("th",{className:"px-6 py-4",children:"User Profile"}),e.jsx("th",{className:"px-6 py-4",children:"Stats"}),e.jsx("th",{className:"px-6 py-4",children:"Role & Status"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:p?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-8",children:e.jsx(ae,{className:"h-10 w-full"})})}):L.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-16 text-center text-slate-400",children:"Tidak ada user ditemukan."})}):L.map(s=>{var t,a;return e.jsxs("tr",{className:`hover:bg-slate-50 transition-colors ${c.has(s.id)?"bg-indigo-50/50":""}`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>pe(s.id),className:"text-slate-300 hover:text-indigo-600",children:c.has(s.id)?e.jsx(re,{size:18,className:"text-indigo-600"}):e.jsx(ne,{size:18})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-xs font-bold text-slate-500 uppercase",children:(t=s.displayName)==null?void 0:t.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-800",children:s.fullName}),e.jsx("div",{className:"text-xs text-slate-500 font-mono",children:s.email})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1",children:[e.jsx(Qe,{size:12})," Bal: ",e.jsx("span",{className:"font-bold text-amber-600",children:(a=s.balance)==null?void 0:a.toLocaleString()})]}),e.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1",children:[e.jsx(qe,{size:12})," Lvl: ",e.jsx("span",{className:"font-bold text-slate-700",children:s.level||"Rookie"})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col items-start gap-1",children:[e.jsx("span",{className:"text-[10px] uppercase font-bold bg-slate-100 text-slate-500 px-2 py-0.5 rounded",children:s.role}),s.referralCode&&e.jsx("span",{className:"text-[10px] font-mono text-indigo-500 bg-indigo-50 px-1 rounded",children:s.referralCode})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:()=>fe(s),className:"p-2 text-slate-300 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete User",children:e.jsx(se,{size:16})})})]},s.id)})})]})}),e.jsx("div",{className:"pb-6",children:e.jsx(G,{})})]})]})]}),e.jsx(Ke,{isOpen:r.isOpen,title:r.type==="PROCESS_REG"?"Konfirmasi Proses Data":r.type==="DELETE_USER"?"Hapus User?":"Hapus Massal?",message:r.type==="PROCESS_REG"?`Data ${(H=r.data)==null?void 0:H.fullName} akan disalin ke database User agar bisa login.`:r.type==="DELETE_USER"?`Yakin menghapus user ${(K=r.data)==null?void 0:K.email}?
Data wallet dan progress akan hilang permanen.`:`Anda akan menghapus ${(V=r.data)==null?void 0:V.length} user terpilih. Tindakan ini tidak dapat dibatalkan.`,onConfirm:r.type==="PROCESS_REG"?me:r.type==="DELETE_USER"?be:je,onCancel:()=>h({isOpen:!1,type:null,data:null}),isProcessing:!!P,isDestructive:r.type!=="PROCESS_REG",confirmLabel:r.type==="PROCESS_REG"?"Ya, Proses":"Hapus Permanen"})]})};export{ts as AdminDatabase};
