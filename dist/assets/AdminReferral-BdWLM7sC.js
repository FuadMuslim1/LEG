import{c as w,r as u,q as fe,i as ge,o as be,j as e,m as V,T as je,e as v,f,n as Z,d as J,p as q,s as Ne,t as we}from"./index-C5MxSQsq.js";import{A as ye,T as se}from"./AdminLayout-ySf5CHEQ.js";import{S as ve,F as De,a as ee}from"./Skeleton-BX0QDTub.js";import{D as Ce,C as ke,F as Re,u as U,w as Se}from"./xlsx-DV0spwX2.js";import{R as Ae}from"./rotate-ccw-CqGlC2K7.js";import{C as Ee}from"./chevron-left-DnAGv6LE.js";import{C as Te}from"./log-out-DAX5-8ca.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],$e=w("arrow-up",_e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ze=w("calendar",Fe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["path",{d:"M11 14h10",key:"1w8e9d"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v1.344",key:"1e62lh"}],["path",{d:"m17 18 4-4-4-4",key:"z2g111"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 1.793-1.113",key:"bjbb7m"}],["rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",key:"ublpy"}]],Me=w("clipboard-paste",Ie);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Le=w("copy",Pe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ae=w("dollar-sign",Be);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Ue=w("mail",Oe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],We=w("plus",Ve);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],W=w("shield-check",He),te=({isOpen:n,title:d,message:D,onConfirm:N,onCancel:g,isProcessing:c,confirmLabel:x="Delete",isDestructive:h=!0})=>n?e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/50 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsx("div",{className:"bg-white w-full max-w-sm rounded-2xl shadow-2xl overflow-hidden border border-slate-100 animate-in zoom-in-95 duration-200",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-2",children:d}),e.jsx("p",{className:"text-slate-600 text-sm whitespace-pre-wrap leading-relaxed mb-6",children:D}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:g,disabled:c,className:"px-4 py-2 rounded-lg text-slate-600 hover:bg-slate-100 font-bold text-xs transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:N,disabled:c,className:`px-4 py-2 rounded-lg text-white font-bold text-xs transition-colors flex items-center gap-2 shadow-md ${h?"bg-red-600 hover:bg-red-700 shadow-red-200":"bg-indigo-600 hover:bg-indigo-700 shadow-indigo-200"}`,children:[c?e.jsx("div",{className:"w-3 h-3 border-2 border-white/30 border-t-white rounded-full animate-spin"}):null,x]})]})]})})}):null,Ge=({req:n,onDeleteClick:d,onUpdateStatus:D,formatDate:N})=>{const g=({status:c})=>{const x={DRAFT:{bg:"bg-slate-100",text:"text-slate-600",border:"border-slate-200",label:"Draft / Unpaid"},SENT_TO_DB:{bg:"bg-amber-50",text:"text-amber-700",border:"border-amber-200",label:"Paid & Queued"},VERIFIED:{bg:"bg-emerald-50",text:"text-emerald-700",border:"border-emerald-200",label:"Registered"},PAID:{bg:"bg-blue-50",text:"text-blue-700",border:"border-blue-200",label:"Paid"}},h=x[c]||x.DRAFT;return e.jsxs("span",{className:`px-2 py-1 rounded-md text-[10px] md:text-xs font-bold border ${h.bg} ${h.text} ${h.border} flex items-center gap-1.5 w-fit shadow-sm uppercase tracking-wider`,children:[c==="VERIFIED"&&e.jsx(W,{size:12}),c==="SENT_TO_DB"&&e.jsx(V,{size:12,className:"animate-pulse"}),h.label]})};return e.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm mb-4 relative overflow-hidden",children:[e.jsx("div",{className:`absolute top-0 left-0 w-1.5 h-full 
         ${n.status==="VERIFIED"?"bg-emerald-500":n.status==="SENT_TO_DB"?"bg-amber-500":"bg-slate-300"}`}),e.jsxs("div",{className:"pl-3",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800 text-lg leading-tight",children:n.fullName}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1 flex items-center gap-1",children:[e.jsx(Ue,{size:12})," ",n.email]})]}),e.jsx(g,{status:n.status})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-slate-50 p-2.5 rounded-lg border border-slate-100",children:[e.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase block mb-1",children:"Generated Key"}),e.jsx("code",{className:"text-sm font-bold text-indigo-600 font-mono break-all",children:n.generatedReferralCode})]}),e.jsxs("div",{className:"bg-slate-50 p-2.5 rounded-lg border border-slate-100",children:[e.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase block mb-1",children:"Referral Used"}),e.jsx("span",{className:"text-sm font-medium text-slate-700",children:n.usedReferralCode})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-slate-100",children:[e.jsxs("div",{className:"text-xs text-slate-400 font-mono flex items-center gap-1",children:[e.jsx("span",{className:"bg-slate-100 px-1.5 py-0.5 rounded",children:N(n.createdAt)}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:n.whatsapp})]}),e.jsxs("div",{className:"flex gap-2",children:[n.status==="DRAFT"&&e.jsxs("button",{onClick:()=>D(n.id,"SENT_TO_DB",n),className:"bg-indigo-600 text-white px-3 py-2 rounded-lg shadow-sm hover:bg-indigo-700 text-xs font-bold flex items-center gap-1",title:"Konfirmasi Bayar & Kirim ke DB",children:[e.jsx(ae,{size:14})," Sudah Bayar"]}),e.jsx("button",{onClick:c=>d(n,c),className:"text-slate-400 p-2 rounded-lg hover:bg-red-50 hover:text-red-600 transition-colors",title:"Hapus Data Antrian",children:e.jsx(se,{size:16})})]})]})]})]})},et=({user:n})=>{const[d,D]=u.useState([]),[N,g]=u.useState(!0),[c,x]=u.useState(null),[h,H]=u.useState(""),[F,C]=u.useState(!1),[z,S]=u.useState(!1),[I,le]=u.useState(""),[A,M]=u.useState(1),P=10,[y,L]=u.useState(null),[re,B]=u.useState(!1),E=t=>{if(!t)return"-";const s=t.seconds?new Date(t.seconds*1e3):new Date(t);return new Intl.DateTimeFormat("id-ID",{day:"2-digit",month:"short",year:"2-digit",hour:"2-digit",minute:"2-digit"}).format(s)};u.useEffect(()=>{g(!0),x(null);const t=fe(ge(f,"registrations")),s=be(t,a=>{const l=[];a.forEach(r=>{l.push({id:r.id,...r.data()})}),l.sort((r,i)=>{var b,m;const o=((b=r.createdAt)==null?void 0:b.seconds)||0,p=((m=i.createdAt)==null?void 0:m.seconds)||0;return o-p}),D(l),g(!1)},a=>{console.error("Listen failed:",a),a.code==="permission-denied"?x("Access Denied: You do not have permission to view registrations."):x(`Error loading data: ${a.message}`),g(!1)});return()=>s()},[]),u.useEffect(()=>{const t=async()=>{const a=d.filter(l=>l.status==="SENT_TO_DB");if(a.length!==0)for(const l of a)try{const r=v(f,"users",l.email.toLowerCase());(await Z(r)).exists()&&await J(v(f,"registrations",l.id),{status:"VERIFIED"})}catch(r){console.error("Auto-verify check failed:",r)}},s=setInterval(t,5e3);return t(),()=>clearInterval(s)},[d]);const ne=(t,s,a,l)=>{const r=t.replace(/[^a-zA-Z]/g,""),i=(r.length>=2?r.substring(0,2):r.padEnd(2,"X")).toUpperCase(),o=s.replace(/\D/g,""),p=o.length>=2?o.slice(-2):o.padStart(2,"0"),m=a!=="-"&&a.trim()!==""?"1":"2",j=new Date,k=String(j.getMonth()+1).padStart(2,"0"),_=String(j.getDate()).padStart(2,"0"),R=String(j.getFullYear()).slice(-2);return`${i}${p}${m}${k}${_}${R}${l}`},ie=()=>{const t=new Date;return t.setHours(0,0,0,0),d.filter(s=>{var l;const a=(l=s.createdAt)!=null&&l.seconds?new Date(s.createdAt.seconds*1e3):new Date;return a.setHours(0,0,0,0),a.getTime()===t.getTime()}).length},oe=async()=>{if(h.trim()){C(!0),x(null);try{const t=q(f);let s=0,a=ie()+1,l=[];if(/Full Name:|Email:|WhatsApp:/i.test(h)){const i=h.split(/Full Name:/i);for(const o of i){if(!o.trim())continue;const p=o.match(/(?:WhatsApp|WA)\s*:\s*([\d\-\+]+)/i),b=o.match(/Email\s*:\s*([^\s\n]+)/i),m=o.match(/Referral\s*:\s*([^\s\n]+)/i),j=o.trim().split(`
`)[0].replace(/[:]/g,"").trim();if(j&&b&&p){const k=j,_=p[1].trim(),R=b[1].trim(),$=m?m[1].trim():"-";l.push(`${k},${_},${R},${$}`)}}}else l=h.split(`
`);for(const i of l){if(!i.trim())continue;const o=i.split(/,|\||\t/).map(p=>p.trim());if(o.length>=3){const p=o[0],b=o[1],m=o[2].toLowerCase(),j=o[3]||"-";if(m.includes("@")&&p.toLowerCase()!=="full name"){const k=v(f,"users",m);if((await Z(k)).exists()){x(`Gagal Memuat: Email ${m} sudah terdaftar sebagai User Aktif di sistem.`),C(!1);return}const R=ne(m,b,j,a),$=v(f,"registrations",m);t.set($,{fullName:p,whatsapp:b,email:m,usedReferralCode:j,generatedReferralCode:R,status:"DRAFT",createdAt:Ne(),createdBy:n.uid,notifiedRewardAdmin:!1}),s++,a++}}}s>0?(await t.commit(),H(""),x(null)):c||x("Format tidak dikenali. Pastikan ada Full Name, WA, dan Email.")}catch(t){console.error("Error processing:",t),x("Error processing data: "+t.message)}finally{C(!1)}}},G=async(t,s,a)=>{try{const l={status:s};s==="SENT_TO_DB"&&a&&a.usedReferralCode!=="-"&&(l.notifiedRewardAdmin=!0);const r=v(f,"registrations",t);await J(r,l)}catch(l){console.error("Error updating status:",l)}},K=(t,s)=>{s&&(s.stopPropagation(),s.preventDefault()),L(t)},de=async()=>{if(y){C(!0);try{if(!y.id)throw new Error("ID Dokumen tidak valid");await we(v(f,"registrations",y.id)),L(null)}catch(t){console.error("Error deleting:",t),x(`Gagal menghapus: ${t.message}`)}finally{C(!1)}}},ce=()=>{B(!0)},xe=async()=>{g(!0);try{const t=d.filter(a=>a.status==="DRAFT"||a.status==="PAID"),s=q(f);t.forEach(a=>s.delete(v(f,"registrations",a.id))),await s.commit(),B(!1)}catch(t){console.error(t)}finally{g(!1)}},me=()=>{const t=`Date,Full Name,WhatsApp,Email,Used Referral,Generated Code,Status
`,s=d.map(i=>`"${E(i.createdAt)}","${i.fullName}","${i.whatsapp}","${i.email}","${i.usedReferralCode}","${i.generatedReferralCode}","${i.status}"`).join(`
`),a=new Blob([t+s],{type:"text/csv"}),l=window.URL.createObjectURL(a),r=document.createElement("a");r.href=l,r.download=`RECEPTION_DATA_${new Date().toISOString().split("T")[0]}.csv`,r.click(),S(!1)},he=()=>{const t=d.map(l=>({Date:E(l.createdAt),"Full Name":l.fullName,WhatsApp:l.whatsapp,Email:l.email,"Used Referral":l.usedReferralCode,"Generated Code":l.generatedReferralCode,Status:l.status})),s=U.json_to_sheet(t),a=U.book_new();U.book_append_sheet(a,s,"Registrations"),Se(a,`RECEPTION_DATA_${new Date().toISOString().split("T")[0]}.xlsx`),S(!1)},ue=({status:t})=>{const s={DRAFT:{bg:"bg-slate-100",text:"text-slate-600",border:"border-slate-200",label:"Draft / Unpaid"},SENT_TO_DB:{bg:"bg-amber-50",text:"text-amber-700",border:"border-amber-200",label:"Paid & Queued"},VERIFIED:{bg:"bg-emerald-50",text:"text-emerald-700",border:"border-emerald-200",label:"Registered"},PAID:{bg:"bg-blue-50",text:"text-blue-700",border:"border-blue-200",label:"Paid"}},a=s[t]||s.DRAFT;return e.jsxs("span",{className:`px-2 py-1 rounded-md text-[10px] md:text-xs font-bold border ${a.bg} ${a.text} ${a.border} flex items-center gap-1.5 w-fit shadow-sm uppercase tracking-wider`,children:[t==="VERIFIED"&&e.jsx(W,{size:12}),t==="SENT_TO_DB"&&e.jsx(V,{size:12,className:"animate-pulse"}),a.label]})},Q=d.filter(t=>{if(!I)return!0;const s=I.toLowerCase();return t.fullName.toLowerCase().includes(s)||t.email.toLowerCase().includes(s)||t.generatedReferralCode.toLowerCase().includes(s)||t.usedReferralCode&&t.usedReferralCode.toLowerCase().includes(s)}),Y=A*P,pe=Y-P,O=Q.slice(pe,Y),T=Math.ceil(Q.length/P),X=()=>T<=1?null:e.jsxs("div",{className:"flex justify-center items-center gap-4 mt-6",children:[e.jsx("button",{onClick:()=>M(t=>Math.max(t-1,1)),disabled:A===1,className:"p-2 rounded-full hover:bg-slate-100 disabled:opacity-30 disabled:hover:bg-transparent",children:e.jsx(Ee,{size:20,className:"text-slate-600"})}),e.jsxs("span",{className:"text-sm font-bold text-slate-500",children:["Page ",A," of ",T]}),e.jsx("button",{onClick:()=>M(t=>Math.min(t+1,T)),disabled:A===T,className:"p-2 rounded-full hover:bg-slate-100 disabled:opacity-30 disabled:hover:bg-transparent",children:e.jsx(Te,{size:20,className:"text-slate-600"})})]});return e.jsxs(ye,{user:n,title:"Referral Generator",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 md:p-6 mb-8",children:[e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start mb-4 gap-4",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Me,{className:"text-indigo-600",size:20}),"Input Data"]}),e.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:["Supports: ",e.jsx("b",{children:"WhatsApp Copy-Paste"})," or ",e.jsx("b",{children:"CSV Format"}),"."]})]})}),e.jsx("textarea",{value:h,onChange:t=>{const s=t.target.value.replace(/\*/g,"");H(s)},placeholder:`Halo Admin, saya ingin mendaftar:
Full Name: Fuad Muslim
WhatsApp: 082338792512
Email: fuad@gmail.com
Referral: fu3312...`,className:"w-full h-48 p-4 bg-slate-50 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:bg-white focus:outline-none font-medium text-slate-900 placeholder:text-slate-400 text-sm mb-4 resize-none transition-all"}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:oe,disabled:F||!h,className:"w-full md:w-auto bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2.5 rounded-lg font-bold shadow-md shadow-indigo-200 flex items-center justify-center gap-2 transition-all disabled:opacity-50 text-sm",children:[F?e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx(We,{size:18}),e.jsx("span",{children:"Generate Referral Code"})]})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm sticky top-[70px] z-20 mb-6",children:[e.jsxs("div",{className:"flex flex-col xl:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex gap-4 md:gap-6 text-sm w-full xl:w-auto overflow-x-auto pb-1 xl:pb-0",children:[e.jsx("div",{className:"flex items-center gap-2 whitespace-nowrap",children:e.jsxs("span",{className:"font-bold text-slate-700",children:["Total: ",d.length]})}),e.jsxs("div",{className:"flex items-center gap-2 text-emerald-700 whitespace-nowrap",children:[e.jsx(W,{size:16,className:"text-emerald-500"}),e.jsxs("span",{className:"font-bold",children:["Registered: ",d.filter(t=>t.status==="VERIFIED").length]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-amber-600 whitespace-nowrap",children:[e.jsx(V,{size:16,className:"text-amber-500"}),e.jsxs("span",{className:"font-bold",children:["Queued to DB: ",d.filter(t=>t.status==="SENT_TO_DB").length]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full xl:w-auto items-stretch md:items-center",children:[e.jsxs("div",{className:"relative flex-1 md:w-64",children:[e.jsx(ve,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),e.jsx("input",{type:"text",placeholder:"Search Name / Email / Code...",value:I,onChange:t=>{le(t.target.value),M(1)},className:"w-full pl-9 pr-4 py-2 bg-slate-100 border-transparent focus:bg-white focus:border-indigo-500 rounded-lg text-sm transition-all focus:ring-2 focus:ring-indigo-100 outline-none"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1 md:flex-none",children:[e.jsxs("button",{onClick:()=>S(!z),className:"w-full justify-center bg-slate-100 text-slate-700 px-3 py-2 rounded-lg hover:bg-slate-200 text-xs font-bold flex items-center gap-2 transition-colors",children:[e.jsx(Ce,{size:14}),e.jsx("span",{children:"Export"}),e.jsx(ke,{size:14,className:`transition-transform duration-200 ${z?"rotate-180":""}`})]}),z&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>S(!1)}),e.jsxs("div",{className:"absolute top-full right-0 mt-2 w-48 bg-white rounded-xl shadow-xl border border-slate-100 z-20 p-1 animate-in fade-in zoom-in-95 duration-200 overflow-hidden",children:[e.jsxs("button",{onClick:me,className:"w-full text-left px-4 py-3 hover:bg-slate-50 rounded-lg text-xs font-bold text-slate-700 flex items-center gap-2 transition-colors",children:[e.jsx(De,{size:16,className:"text-indigo-500"}),e.jsx("span",{children:"Download CSV"})]}),e.jsxs("button",{onClick:he,className:"w-full text-left px-4 py-3 hover:bg-slate-50 rounded-lg text-xs font-bold text-slate-700 flex items-center gap-2 transition-colors",children:[e.jsx(Re,{size:16,className:"text-emerald-500"}),e.jsx("span",{children:"Download Sheet"})]})]})]})]}),e.jsxs("button",{onClick:ce,className:"flex-1 md:flex-none justify-center bg-red-50 text-red-600 px-3 py-2 rounded-lg hover:bg-red-100 border border-red-100 text-xs font-bold flex items-center gap-2 transition-colors",children:[e.jsx(Ae,{size:14})," Clear"]})]})]})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-[10px] text-slate-400 font-medium",children:[e.jsx($e,{size:12,className:"text-indigo-500"}),e.jsx("span",{children:"Sorting: FIFO (Terlama di atas)"})]})]}),c&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 p-4 rounded-xl mb-6 flex items-start gap-3",children:[e.jsx(je,{size:20,className:"mt-0.5 shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-sm",children:"Notification"}),e.jsx("p",{className:"text-xs mt-1",children:c})]})]}),e.jsxs("div",{className:"md:hidden",children:[N?e.jsx(ee,{className:"h-40 w-full mb-4"}):O.map(t=>e.jsx(Ge,{req:t,onDeleteClick:K,onUpdateStatus:G,formatDate:E},t.id)),!N&&d.length===0&&!c&&e.jsx("div",{className:"text-center py-10 text-slate-400",children:"No guests pending."}),e.jsx(X,{})]}),e.jsxs("div",{className:"hidden md:block bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 font-semibold border-b border-slate-200 uppercase tracking-wider text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Status"}),e.jsx("th",{className:"px-6 py-4",children:"Date (FIFO)"}),e.jsx("th",{className:"px-6 py-4",children:"User Details"}),e.jsx("th",{className:"px-6 py-4",children:"Generated Key"}),e.jsx("th",{className:"px-6 py-4",children:"Referral Used"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:N?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-8",children:e.jsx(ee,{className:"h-12 w-full mb-2"})})}):O.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-16 text-center text-slate-400",children:c?"No notifications.":"No data matching search."})}):O.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx(ue,{status:t.status})}),e.jsx("td",{className:"px-6 py-4 text-xs text-slate-500 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(ze,{size:12,className:"text-slate-400"}),E(t.createdAt)]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-bold text-slate-800",children:t.fullName}),e.jsx("div",{className:"text-slate-500 text-xs",children:t.email}),e.jsx("div",{className:"text-slate-400 text-xs font-mono mt-0.5",children:t.whatsapp})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"bg-slate-100 px-2 py-1 rounded border border-slate-200 text-indigo-700 font-mono font-bold",children:t.generatedReferralCode}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText(t.generatedReferralCode),className:"text-slate-400 hover:text-indigo-600",children:e.jsx(Le,{size:14})})]})}),e.jsx("td",{className:"px-6 py-4 text-slate-600",children:t.usedReferralCode!=="-"?e.jsx("span",{className:"text-xs font-bold bg-indigo-50 text-indigo-600 px-2 py-1 rounded",children:t.usedReferralCode}):e.jsx("span",{className:"text-slate-300",children:"-"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.status==="DRAFT"&&e.jsxs("button",{onClick:()=>G(t.id,"SENT_TO_DB",t),className:"flex items-center gap-1.5 px-3 py-1.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 text-xs font-bold transition-colors shadow-md shadow-indigo-100",title:"Konfirmasi Pembayaran & Kirim ke DB",children:[e.jsx(ae,{size:14})," Sudah Bayar"]}),e.jsx("button",{onClick:s=>K(t,s),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Hapus Data",children:e.jsx(se,{size:16})})]})})]},t.id))})]})}),e.jsx("div",{className:"pb-6",children:e.jsx(X,{})})]}),e.jsx(te,{isOpen:!!y,title:"Hapus Data Antrian?",message:y?`Anda yakin ingin menghapus data antrian untuk:

Nama: ${y.fullName}
Email: ${y.email}

PERHATIAN: Tindakan ini hanya menghapus data dari list pendaftaran ini.`:"",onConfirm:de,onCancel:()=>L(null),isProcessing:F,confirmLabel:"Ya, Hapus Data",isDestructive:!0}),e.jsx(te,{isOpen:re,title:"Reset List Antrian?",message:"Apakah Anda yakin ingin menghapus SEMUA data dengan status DRAFT dan PAID?\\n\\nData dengan status Pending (Sent to DB) dan Verified akan tetap AMAN dan tidak terhapus.",onConfirm:xe,onCancel:()=>B(!1),isProcessing:N,confirmLabel:"Reset Sekarang",isDestructive:!0})]})};export{et as AdminReferral};
