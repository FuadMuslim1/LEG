const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/UserDashboard-C5WIOaVQ.js","assets/Layout-psObe5DJ.js","assets/x-B_SlqjkE.js","assets/menu-CMB18ZPU.js","assets/external-link-wjRtWW3a.js","assets/Subject-Bm1emzwC.js","assets/mic-tUOQdGDi.js","assets/headphones-DYPbH5ua.js","assets/search-Bp97E1ok.js","assets/MaterialList-CuZ9E3dY.js","assets/Skeleton-BlqrhN-M.js","assets/file-text-B_PUJLpS.js","assets/video-BytXmzPF.js","assets/Pronunciation-CrUB61FM.js","assets/check-jDPUULAZ.js","assets/rotate-ccw-BcCW5m0t.js","assets/ProfileSettings-sRpDLwUo.js","assets/circle-check-big-B3ml3IW-.js","assets/save-BJ10daty.js","assets/AdminReferral-BnAx1foM.js","assets/AdminLayout-Cdz-8OTX.js","assets/xlsx-Dj-lDoBo.js","assets/plus-Bpa3bQcO.js","assets/chevron-left-bgAivrgu.js","assets/AdminDatabase-CEQyNwrV.js","assets/arrow-right-C7_zQeGa.js","assets/AdminReward-C8R37aqU.js","assets/pen-line-BPujdG9E.js","assets/AdminNotification-OwR_OZHP.js","assets/AdminContent-CRgDtEs9.js","assets/AdminLord-DB8D2B1R.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function Wb(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var zp={exports:{}},Iu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V0;function dR(){if(V0)return Iu;V0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:r,type:i,key:c,ref:a!==void 0?a:null,props:l}}return Iu.Fragment=e,Iu.jsx=t,Iu.jsxs=t,Iu}var M0;function mR(){return M0||(M0=1,zp.exports=dR()),zp.exports}var S=mR(),Bp={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P0;function pR(){if(P0)return Re;P0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),A=Symbol.iterator;function O(M){return M===null||typeof M!="object"?null:(M=A&&M[A]||M["@@iterator"],typeof M=="function"?M:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,q={};function Z(M,ne,he){this.props=M,this.context=ne,this.refs=q,this.updater=he||z}Z.prototype.isReactComponent={},Z.prototype.setState=function(M,ne){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,ne,"setState")},Z.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function ie(){}ie.prototype=Z.prototype;function H(M,ne,he){this.props=M,this.context=ne,this.refs=q,this.updater=he||z}var ae=H.prototype=new ie;ae.constructor=H,Q(ae,Z.prototype),ae.isPureReactComponent=!0;var fe=Array.isArray;function le(){}var R={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function C(M,ne,he){var de=he.ref;return{$$typeof:r,type:M,key:ne,ref:de!==void 0?de:null,props:he}}function P(M,ne){return C(M.type,ne,M.props)}function N(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function k(M){var ne={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(he){return ne[he]})}var x=/\/+/g;function lt(M,ne){return typeof M=="object"&&M!==null&&M.key!=null?k(""+M.key):ne.toString(36)}function Lt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(le,le):(M.status="pending",M.then(function(ne){M.status==="pending"&&(M.status="fulfilled",M.value=ne)},function(ne){M.status==="pending"&&(M.status="rejected",M.reason=ne)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function W(M,ne,he,de,we){var De=typeof M;(De==="undefined"||De==="boolean")&&(M=null);var ze=!1;if(M===null)ze=!0;else switch(De){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(M.$$typeof){case r:case e:ze=!0;break;case _:return ze=M._init,W(ze(M._payload),ne,he,de,we)}}if(ze)return we=we(M),ze=de===""?"."+lt(M,0):de,fe(we)?(he="",ze!=null&&(he=ze.replace(x,"$&/")+"/"),W(we,ne,he,"",function(Ps){return Ps})):we!=null&&(N(we)&&(we=P(we,he+(we.key==null||M&&M.key===we.key?"":(""+we.key).replace(x,"$&/")+"/")+ze)),ne.push(we)),1;ze=0;var Ut=de===""?".":de+":";if(fe(M))for(var ut=0;ut<M.length;ut++)de=M[ut],De=Ut+lt(de,ut),ze+=W(de,ne,he,De,we);else if(ut=O(M),typeof ut=="function")for(M=ut.call(M),ut=0;!(de=M.next()).done;)de=de.value,De=Ut+lt(de,ut++),ze+=W(de,ne,he,De,we);else if(De==="object"){if(typeof M.then=="function")return W(Lt(M),ne,he,de,we);throw ne=String(M),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return ze}function ce(M,ne,he){if(M==null)return M;var de=[],we=0;return W(M,de,"","",function(De){return ne.call(he,De,we++)}),de}function Te(M){if(M._status===-1){var ne=M._result;ne=ne(),ne.then(function(he){(M._status===0||M._status===-1)&&(M._status=1,M._result=he)},function(he){(M._status===0||M._status===-1)&&(M._status=2,M._result=he)}),M._status===-1&&(M._status=0,M._result=ne)}if(M._status===1)return M._result.default;throw M._result}var qe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Ye={map:ce,forEach:function(M,ne,he){ce(M,function(){ne.apply(this,arguments)},he)},count:function(M){var ne=0;return ce(M,function(){ne++}),ne},toArray:function(M){return ce(M,function(ne){return ne})||[]},only:function(M){if(!N(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Re.Activity=T,Re.Children=Ye,Re.Component=Z,Re.Fragment=t,Re.Profiler=a,Re.PureComponent=H,Re.StrictMode=i,Re.Suspense=p,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Re.__COMPILER_RUNTIME={__proto__:null,c:function(M){return R.H.useMemoCache(M)}},Re.cache=function(M){return function(){return M.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(M,ne,he){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var de=Q({},M.props),we=M.key;if(ne!=null)for(De in ne.key!==void 0&&(we=""+ne.key),ne)!I.call(ne,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&ne.ref===void 0||(de[De]=ne[De]);var De=arguments.length-2;if(De===1)de.children=he;else if(1<De){for(var ze=Array(De),Ut=0;Ut<De;Ut++)ze[Ut]=arguments[Ut+2];de.children=ze}return C(M.type,we,de)},Re.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},Re.createElement=function(M,ne,he){var de,we={},De=null;if(ne!=null)for(de in ne.key!==void 0&&(De=""+ne.key),ne)I.call(ne,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(we[de]=ne[de]);var ze=arguments.length-2;if(ze===1)we.children=he;else if(1<ze){for(var Ut=Array(ze),ut=0;ut<ze;ut++)Ut[ut]=arguments[ut+2];we.children=Ut}if(M&&M.defaultProps)for(de in ze=M.defaultProps,ze)we[de]===void 0&&(we[de]=ze[de]);return C(M,De,we)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(M){return{$$typeof:d,render:M}},Re.isValidElement=N,Re.lazy=function(M){return{$$typeof:_,_payload:{_status:-1,_result:M},_init:Te}},Re.memo=function(M,ne){return{$$typeof:g,type:M,compare:ne===void 0?null:ne}},Re.startTransition=function(M){var ne=R.T,he={};R.T=he;try{var de=M(),we=R.S;we!==null&&we(he,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(le,qe)}catch(De){qe(De)}finally{ne!==null&&he.types!==null&&(ne.types=he.types),R.T=ne}},Re.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Re.use=function(M){return R.H.use(M)},Re.useActionState=function(M,ne,he){return R.H.useActionState(M,ne,he)},Re.useCallback=function(M,ne){return R.H.useCallback(M,ne)},Re.useContext=function(M){return R.H.useContext(M)},Re.useDebugValue=function(){},Re.useDeferredValue=function(M,ne){return R.H.useDeferredValue(M,ne)},Re.useEffect=function(M,ne){return R.H.useEffect(M,ne)},Re.useEffectEvent=function(M){return R.H.useEffectEvent(M)},Re.useId=function(){return R.H.useId()},Re.useImperativeHandle=function(M,ne,he){return R.H.useImperativeHandle(M,ne,he)},Re.useInsertionEffect=function(M,ne){return R.H.useInsertionEffect(M,ne)},Re.useLayoutEffect=function(M,ne){return R.H.useLayoutEffect(M,ne)},Re.useMemo=function(M,ne){return R.H.useMemo(M,ne)},Re.useOptimistic=function(M,ne){return R.H.useOptimistic(M,ne)},Re.useReducer=function(M,ne,he){return R.H.useReducer(M,ne,he)},Re.useRef=function(M){return R.H.useRef(M)},Re.useState=function(M){return R.H.useState(M)},Re.useSyncExternalStore=function(M,ne,he){return R.H.useSyncExternalStore(M,ne,he)},Re.useTransition=function(){return R.H.useTransition()},Re.version="19.2.3",Re}var k0;function Qg(){return k0||(k0=1,Bp.exports=pR()),Bp.exports}var K=Qg();const ei=Wb(K);var qp={exports:{}},Ru={},Fp={exports:{}},Hp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L0;function gR(){return L0||(L0=1,(function(r){function e(W,ce){var Te=W.length;W.push(ce);e:for(;0<Te;){var qe=Te-1>>>1,Ye=W[qe];if(0<a(Ye,ce))W[qe]=ce,W[Te]=Ye,Te=qe;else break e}}function t(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var ce=W[0],Te=W.pop();if(Te!==ce){W[0]=Te;e:for(var qe=0,Ye=W.length,M=Ye>>>1;qe<M;){var ne=2*(qe+1)-1,he=W[ne],de=ne+1,we=W[de];if(0>a(he,Te))de<Ye&&0>a(we,he)?(W[qe]=we,W[de]=Te,qe=de):(W[qe]=he,W[ne]=Te,qe=ne);else if(de<Ye&&0>a(we,Te))W[qe]=we,W[de]=Te,qe=de;else break e}}return ce}function a(W,ce){var Te=W.sortIndex-ce.sortIndex;return Te!==0?Te:W.id-ce.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();r.unstable_now=function(){return c.now()-d}}var p=[],g=[],_=1,T=null,A=3,O=!1,z=!1,Q=!1,q=!1,Z=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function ae(W){for(var ce=t(g);ce!==null;){if(ce.callback===null)i(g);else if(ce.startTime<=W)i(g),ce.sortIndex=ce.expirationTime,e(p,ce);else break;ce=t(g)}}function fe(W){if(Q=!1,ae(W),!z)if(t(p)!==null)z=!0,le||(le=!0,k());else{var ce=t(g);ce!==null&&Lt(fe,ce.startTime-W)}}var le=!1,R=-1,I=5,C=-1;function P(){return q?!0:!(r.unstable_now()-C<I)}function N(){if(q=!1,le){var W=r.unstable_now();C=W;var ce=!0;try{e:{z=!1,Q&&(Q=!1,ie(R),R=-1),O=!0;var Te=A;try{t:{for(ae(W),T=t(p);T!==null&&!(T.expirationTime>W&&P());){var qe=T.callback;if(typeof qe=="function"){T.callback=null,A=T.priorityLevel;var Ye=qe(T.expirationTime<=W);if(W=r.unstable_now(),typeof Ye=="function"){T.callback=Ye,ae(W),ce=!0;break t}T===t(p)&&i(p),ae(W)}else i(p);T=t(p)}if(T!==null)ce=!0;else{var M=t(g);M!==null&&Lt(fe,M.startTime-W),ce=!1}}break e}finally{T=null,A=Te,O=!1}ce=void 0}}finally{ce?k():le=!1}}}var k;if(typeof H=="function")k=function(){H(N)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,lt=x.port2;x.port1.onmessage=N,k=function(){lt.postMessage(null)}}else k=function(){Z(N,0)};function Lt(W,ce){R=Z(function(){W(r.unstable_now())},ce)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(W){W.callback=null},r.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<W?Math.floor(1e3/W):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_next=function(W){switch(A){case 1:case 2:case 3:var ce=3;break;default:ce=A}var Te=A;A=ce;try{return W()}finally{A=Te}},r.unstable_requestPaint=function(){q=!0},r.unstable_runWithPriority=function(W,ce){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Te=A;A=W;try{return ce()}finally{A=Te}},r.unstable_scheduleCallback=function(W,ce,Te){var qe=r.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?qe+Te:qe):Te=qe,W){case 1:var Ye=-1;break;case 2:Ye=250;break;case 5:Ye=1073741823;break;case 4:Ye=1e4;break;default:Ye=5e3}return Ye=Te+Ye,W={id:_++,callback:ce,priorityLevel:W,startTime:Te,expirationTime:Ye,sortIndex:-1},Te>qe?(W.sortIndex=Te,e(g,W),t(p)===null&&W===t(g)&&(Q?(ie(R),R=-1):Q=!0,Lt(fe,Te-qe))):(W.sortIndex=Ye,e(p,W),z||O||(z=!0,le||(le=!0,k()))),W},r.unstable_shouldYield=P,r.unstable_wrapCallback=function(W){var ce=A;return function(){var Te=A;A=ce;try{return W.apply(this,arguments)}finally{A=Te}}}})(Hp)),Hp}var U0;function yR(){return U0||(U0=1,Fp.exports=gR()),Fp.exports}var Gp={exports:{}},nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0;function _R(){if(j0)return nn;j0=1;var r=Qg();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:p,containerInfo:g,implementation:_}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,nn.createPortal=function(p,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,_)},nn.flushSync=function(p){var g=c.T,_=i.p;try{if(c.T=null,i.p=2,p)return p()}finally{c.T=g,i.p=_,i.d.f()}},nn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},nn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},nn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var _=g.as,T=d(_,g.crossOrigin),A=typeof g.integrity=="string"?g.integrity:void 0,O=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:A,fetchPriority:O}):_==="script"&&i.d.X(p,{crossOrigin:T,integrity:A,fetchPriority:O,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},nn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=d(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},nn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,T=d(_,g.crossOrigin);i.d.L(p,_,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},nn.preloadModule=function(p,g){if(typeof p=="string")if(g){var _=d(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},nn.requestFormReset=function(p){i.d.r(p)},nn.unstable_batchedUpdates=function(p,g){return p(g)},nn.useFormState=function(p,g,_){return c.H.useFormState(p,g,_)},nn.useFormStatus=function(){return c.H.useHostTransitionStatus()},nn.version="19.2.3",nn}var z0;function vR(){if(z0)return Gp.exports;z0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Gp.exports=_R(),Gp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B0;function ER(){if(B0)return Ru;B0=1;var r=yR(),e=Qg(),t=vR();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(l(n)!==n)throw Error(i(188))}function g(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(i(188));return s!==n?null:n}for(var o=n,u=s;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return p(f),n;if(m===u)return p(f),s;m=m.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=m;else{for(var v=!1,b=f.child;b;){if(b===o){v=!0,o=f,u=m;break}if(b===u){v=!0,u=f,o=m;break}b=b.sibling}if(!v){for(b=m.child;b;){if(b===o){v=!0,o=m,u=f;break}if(b===u){v=!0,u=m,o=f;break}b=b.sibling}if(!v)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:s}function _(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=_(n),s!==null)return s;n=n.sibling}return null}var T=Object.assign,A=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),ie=Symbol.for("react.consumer"),H=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=N&&n[N]||n["@@iterator"],typeof n=="function"?n:null)}var x=Symbol.for("react.client.reference");function lt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===x?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Q:return"Fragment";case Z:return"Profiler";case q:return"StrictMode";case fe:return"Suspense";case le:return"SuspenseList";case C:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case z:return"Portal";case H:return n.displayName||"Context";case ie:return(n._context.displayName||"Context")+".Consumer";case ae:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case R:return s=n.displayName||null,s!==null?s:lt(n.type)||"Memo";case I:s=n._payload,n=n._init;try{return lt(n(s))}catch{}}return null}var Lt=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te={pending:!1,data:null,method:null,action:null},qe=[],Ye=-1;function M(n){return{current:n}}function ne(n){0>Ye||(n.current=qe[Ye],qe[Ye]=null,Ye--)}function he(n,s){Ye++,qe[Ye]=n.current,n.current=s}var de=M(null),we=M(null),De=M(null),ze=M(null);function Ut(n,s){switch(he(De,s),he(we,n),he(de,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?n0(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=n0(s),n=i0(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ne(de),he(de,n)}function ut(){ne(de),ne(we),ne(De)}function Ps(n){n.memoizedState!==null&&he(ze,n);var s=de.current,o=i0(s,n.type);s!==o&&(he(we,n),he(de,o))}function qa(n){we.current===n&&(ne(de),ne(we)),ze.current===n&&(ne(ze),bu._currentValue=Te)}var Fa,Ha;function Ti(n){if(Fa===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Fa=s&&s[1]||"",Ha=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fa+n+Ha}var bl=!1;function ks(n,s){if(!n||bl)return"";bl=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch($){var G=$}Reflect.construct(n,[],te)}else{try{te.call()}catch($){G=$}n.call(te.prototype)}}else{try{throw Error()}catch($){G=$}(te=n())&&typeof te.catch=="function"&&te.catch(function(){})}}catch($){if($&&G&&typeof $.stack=="string")return[$.stack,G.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),v=m[0],b=m[1];if(v&&b){var D=v.split(`
`),F=b.split(`
`);for(f=u=0;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(u===D.length||f===F.length)for(u=D.length-1,f=F.length-1;1<=u&&0<=f&&D[u]!==F[f];)f--;for(;1<=u&&0<=f;u--,f--)if(D[u]!==F[f]){if(u!==1||f!==1)do if(u--,f--,0>f||D[u]!==F[f]){var J=`
`+D[u].replace(" at new "," at ");return n.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",n.displayName)),J}while(1<=u&&0<=f);break}}}finally{bl=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Ti(o):""}function Al(n,s){switch(n.tag){case 26:case 27:case 5:return Ti(n.type);case 16:return Ti("Lazy");case 13:return n.child!==s&&s!==null?Ti("Suspense Fallback"):Ti("Suspense");case 19:return Ti("SuspenseList");case 0:case 15:return ks(n.type,!1);case 11:return ks(n.type.render,!1);case 1:return ks(n.type,!0);case 31:return Ti("Activity");default:return""}}function wl(n){try{var s="",o=null;do s+=Al(n,o),o=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var St=Object.prototype.hasOwnProperty,jt=r.unstable_scheduleCallback,Or=r.unstable_cancelCallback,qd=r.unstable_shouldYield,kc=r.unstable_requestPaint,un=r.unstable_now,Ls=r.unstable_getCurrentPriorityLevel,Sl=r.unstable_ImmediatePriority,Il=r.unstable_UserBlockingPriority,Vr=r.unstable_NormalPriority,Fd=r.unstable_LowPriority,Lc=r.unstable_IdlePriority,Uc=r.log,jc=r.unstable_setDisableYieldValue,ti=null,Yt=null;function Ln(n){if(typeof Uc=="function"&&jc(n),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(ti,n)}catch{}}var Tt=Math.clz32?Math.clz32:Bc,zc=Math.log,Ga=Math.LN2;function Bc(n){return n>>>=0,n===0?32:31-(zc(n)/Ga|0)|0}var bi=256,Us=262144,It=4194304;function Ai(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function wi(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,m=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var b=u&134217727;return b!==0?(u=b&~m,u!==0?f=Ai(u):(v&=b,v!==0?f=Ai(v):o||(o=b&~n,o!==0&&(f=Ai(o))))):(b=u&~m,b!==0?f=Ai(b):v!==0?f=Ai(v):o||(o=u&~n,o!==0&&(f=Ai(o)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:f}function ni(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Hd(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qc(){var n=It;return It<<=1,(It&62914560)===0&&(It=4194304),n}function Si(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function js(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Gd(n,s,o,u,f,m){var v=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var b=n.entanglements,D=n.expirationTimes,F=n.hiddenUpdates;for(o=v&~o;0<o;){var J=31-Tt(o),te=1<<J;b[J]=0,D[J]=-1;var G=F[J];if(G!==null)for(F[J]=null,J=0;J<G.length;J++){var $=G[J];$!==null&&($.lane&=-536870913)}o&=~te}u!==0&&zs(n,u,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(v&~s))}function zs(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-Tt(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function Rl(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-Tt(o),f=1<<u;f&s|n[u]&s&&(n[u]|=s),o&=~f}}function Cl(n,s){var o=s&-s;return o=(o&42)!==0?1:Bs(o),(o&(n.suspendedLanes|s))!==0?0:o}function Bs(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Wi(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Fc(){var n=ce.p;return n!==0?n:(n=window.event,n===void 0?32:I0(n.type))}function ii(n,s){var o=ce.p;try{return ce.p=n,s()}finally{ce.p=o}}var ri=Math.random().toString(36).slice(2),Rt="__reactFiber$"+ri,Ht="__reactProps$"+ri,Ii="__reactContainer$"+ri,Ka="__reactEvents$"+ri,Kd="__reactListeners$"+ri,Hc="__reactHandles$"+ri,Gc="__reactResources$"+ri,Ri="__reactMarker$"+ri;function Qa(n){delete n[Rt],delete n[Ht],delete n[Ka],delete n[Kd],delete n[Hc]}function Ci(n){var s=n[Rt];if(s)return s;for(var o=n.parentNode;o;){if(s=o[Ii]||o[Rt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=c0(n);n!==null;){if(o=n[Rt])return o;n=c0(n)}return s}n=o,o=n.parentNode}return null}function Un(n){if(n=n[Rt]||n[Ii]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function An(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function xi(n){var s=n[Gc];return s||(s=n[Gc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ct(n){n[Ri]=!0}var xl=new Set,Dl={};function Di(n,s){Ni(n,s),Ni(n+"Capture",s)}function Ni(n,s){for(Dl[n]=s,n=0;n<s.length;n++)xl.add(s[n])}var Nl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ol={},Vl={};function Kc(n){return St.call(Vl,n)?!0:St.call(Ol,n)?!1:Nl.test(n)?Vl[n]=!0:(Ol[n]=!0,!1)}function Ya(n,s,o){if(Kc(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function wn(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function xt(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}function Gt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Mr(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ml(n,s,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,m=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(v){o=""+v,m.call(this,v)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function $e(n){if(!n._valueTracker){var s=Mr(n)?"checked":"value";n._valueTracker=Ml(n,s,""+n[s])}}function qs(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=Mr(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function Oi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Fs=/[\n"\\]/g;function mn(n){return n.replace(Fs,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function $a(n,s,o,u,f,m,v,b){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),s!=null?v==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Gt(s)):n.value!==""+Gt(s)&&(n.value=""+Gt(s)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),s!=null?Pl(n,v,Gt(s)):o!=null?Pl(n,v,Gt(o)):u!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.name=""+Gt(b):n.removeAttribute("name")}function Qc(n,s,o,u,f,m,v,b){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){$e(n);return}o=o!=null?""+Gt(o):"",s=s!=null?""+Gt(s):o,b||s===n.value||(n.value=s),n.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=b?n.checked:!!u,n.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),$e(n)}function Pl(n,s,o){s==="number"&&Oi(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Pr(n,s,o,u){if(n=n.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=s.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+Gt(o),s=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function Yc(n,s,o){if(s!=null&&(s=""+Gt(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+Gt(o):""}function kr(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(Lt(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=Gt(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),$e(n)}function pn(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var $c=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kl(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||$c.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function Ll(n,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&kl(n,f,u)}else for(var m in s)s.hasOwnProperty(m)&&kl(n,m,s[m])}function Xa(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Lr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ja(n){return Lr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function si(){}var Ul=null;function jn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ur=null,Vi=null;function Hs(n){var s=Un(n);if(s&&(n=s.stateNode)){var o=n[Ht]||null;e:switch(n=s.stateNode,s.type){case"input":if($a(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+mn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var f=u[Ht]||null;if(!f)throw Error(i(90));$a(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&qs(u)}break e;case"textarea":Yc(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Pr(n,!!o.multiple,s,!1)}}}var Wa=!1;function jr(n,s,o){if(Wa)return n(s,o);Wa=!0;try{var u=n(s);return u}finally{if(Wa=!1,(Ur!==null||Vi!==null)&&(Fh(),Ur&&(s=Ur,n=Vi,Vi=Ur=null,Hs(s),n)))for(s=0;s<n.length;s++)Hs(n[s])}}function ai(n,s){var o=n.stateNode;if(o===null)return null;var u=o[Ht]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gs=!1;if(zn)try{var tt={};Object.defineProperty(tt,"passive",{get:function(){Gs=!0}}),window.addEventListener("test",tt,tt),window.removeEventListener("test",tt,tt)}catch{Gs=!1}var Mi=null,jl=null,Ks=null;function zl(){if(Ks)return Ks;var n,s=jl,o=s.length,u,f="value"in Mi?Mi.value:Mi.textContent,m=f.length;for(n=0;n<o&&s[n]===f[n];n++);var v=o-n;for(u=1;u<=v&&s[o-u]===f[m-u];u++);return Ks=f.slice(n,1<u?1-u:void 0)}function Qs(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Zi(){return!0}function oi(){return!1}function $t(n){function s(o,u,f,m,v){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(o=n[b],this[b]=o?o(m):m[b]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Zi:oi,this.isPropagationStopped=oi,this}return T(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Zi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Zi)},persist:function(){},isPersistent:Zi}),s}var er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pi=$t(er),zr=T({},er,{view:0,detail:0}),Bl=$t(zr),Br,Za,ki,eo=T({},zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ki&&(ki&&n.type==="mousemove"?(Br=n.screenX-ki.screenX,Za=n.screenY-ki.screenY):Za=Br=0,ki=n),Br)},movementY:function(n){return"movementY"in n?n.movementY:Za}}),ql=$t(eo),Ys=T({},eo,{dataTransfer:0}),Jc=$t(Ys),Wc=T({},zr,{relatedTarget:0}),$s=$t(Wc),Fl=T({},er,{animationName:0,elapsedTime:0,pseudoElement:0}),Zc=$t(Fl),to=T({},er,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),eh=$t(to),th=T({},er,{data:0}),Li=$t(th),nh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ih={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sh(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=rh[n])?!!s[n]:!1}function qr(){return sh}var cn=T({},zr,{key:function(n){if(n.key){var s=nh[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Qs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ih[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qr,charCode:function(n){return n.type==="keypress"?Qs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Qs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ah=$t(cn),oh=T({},eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tr=$t(oh),h=T({},zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qr}),y=$t(h),E=T({},er,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=$t(E),j=T({},eo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=$t(j),oe=T({},er,{newState:0,oldState:0}),Ce=$t(oe),bt=[9,13,27,32],Ge=zn&&"CompositionEvent"in window,ct=null;zn&&"documentMode"in document&&(ct=document.documentMode);var Bn=zn&&"TextEvent"in window&&!ct,Ui=zn&&(!Ge||ct&&8<ct&&11>=ct),li=" ",ui=!1;function Xs(n,s){switch(n){case"keyup":return bt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function no(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var io=!1;function LI(n,s){switch(n){case"compositionend":return no(s);case"keypress":return s.which!==32?null:(ui=!0,li);case"textInput":return n=s.data,n===li&&ui?null:n;default:return null}}function UI(n,s){if(io)return n==="compositionend"||!Ge&&Xs(n,s)?(n=zl(),Ks=jl=Mi=null,io=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ui&&s.locale!=="ko"?null:s.data;default:return null}}var jI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function d_(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!jI[n.type]:s==="textarea"}function m_(n,s,o,u){Ur?Vi?Vi.push(u):Vi=[u]:Ur=u,s=Xh(s,"onChange"),0<s.length&&(o=new Pi("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var Hl=null,Gl=null;function zI(n){XE(n,0)}function lh(n){var s=An(n);if(qs(s))return n}function p_(n,s){if(n==="change")return s}var g_=!1;if(zn){var Qd;if(zn){var Yd="oninput"in document;if(!Yd){var y_=document.createElement("div");y_.setAttribute("oninput","return;"),Yd=typeof y_.oninput=="function"}Qd=Yd}else Qd=!1;g_=Qd&&(!document.documentMode||9<document.documentMode)}function __(){Hl&&(Hl.detachEvent("onpropertychange",v_),Gl=Hl=null)}function v_(n){if(n.propertyName==="value"&&lh(Gl)){var s=[];m_(s,Gl,n,jn(n)),jr(zI,s)}}function BI(n,s,o){n==="focusin"?(__(),Hl=s,Gl=o,Hl.attachEvent("onpropertychange",v_)):n==="focusout"&&__()}function qI(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return lh(Gl)}function FI(n,s){if(n==="click")return lh(s)}function HI(n,s){if(n==="input"||n==="change")return lh(s)}function GI(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Sn=typeof Object.is=="function"?Object.is:GI;function Kl(n,s){if(Sn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!St.call(s,f)||!Sn(n[f],s[f]))return!1}return!0}function E_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function T_(n,s){var o=E_(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=E_(o)}}function b_(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?b_(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function A_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Oi(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Oi(n.document)}return s}function $d(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var KI=zn&&"documentMode"in document&&11>=document.documentMode,ro=null,Xd=null,Ql=null,Jd=!1;function w_(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Jd||ro==null||ro!==Oi(u)||(u=ro,"selectionStart"in u&&$d(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ql&&Kl(Ql,u)||(Ql=u,u=Xh(Xd,"onSelect"),0<u.length&&(s=new Pi("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=ro)))}function Js(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var so={animationend:Js("Animation","AnimationEnd"),animationiteration:Js("Animation","AnimationIteration"),animationstart:Js("Animation","AnimationStart"),transitionrun:Js("Transition","TransitionRun"),transitionstart:Js("Transition","TransitionStart"),transitioncancel:Js("Transition","TransitionCancel"),transitionend:Js("Transition","TransitionEnd")},Wd={},S_={};zn&&(S_=document.createElement("div").style,"AnimationEvent"in window||(delete so.animationend.animation,delete so.animationiteration.animation,delete so.animationstart.animation),"TransitionEvent"in window||delete so.transitionend.transition);function Ws(n){if(Wd[n])return Wd[n];if(!so[n])return n;var s=so[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in S_)return Wd[n]=s[o];return n}var I_=Ws("animationend"),R_=Ws("animationiteration"),C_=Ws("animationstart"),QI=Ws("transitionrun"),YI=Ws("transitionstart"),$I=Ws("transitioncancel"),x_=Ws("transitionend"),D_=new Map,Zd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zd.push("scrollEnd");function ci(n,s){D_.set(n,s),Di(s,[n])}var uh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},qn=[],ao=0,em=0;function ch(){for(var n=ao,s=em=ao=0;s<n;){var o=qn[s];qn[s++]=null;var u=qn[s];qn[s++]=null;var f=qn[s];qn[s++]=null;var m=qn[s];if(qn[s++]=null,u!==null&&f!==null){var v=u.pending;v===null?f.next=f:(f.next=v.next,v.next=f),u.pending=f}m!==0&&N_(o,f,m)}}function hh(n,s,o,u){qn[ao++]=n,qn[ao++]=s,qn[ao++]=o,qn[ao++]=u,em|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function tm(n,s,o,u){return hh(n,s,o,u),fh(n)}function Zs(n,s){return hh(n,null,null,s),fh(n)}function N_(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&s!==null&&(f=31-Tt(o),n=m.hiddenUpdates,u=n[f],u===null?n[f]=[s]:u.push(s),s.lane=o|536870912),m):null}function fh(n){if(50<pu)throw pu=0,cp=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var oo={};function XI(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(n,s,o,u){return new XI(n,s,o,u)}function nm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function nr(n,s){var o=n.alternate;return o===null?(o=In(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function O_(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function dh(n,s,o,u,f,m){var v=0;if(u=n,typeof n=="function")nm(n)&&(v=1);else if(typeof n=="string")v=tR(n,o,de.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case C:return n=In(31,o,s,f),n.elementType=C,n.lanes=m,n;case Q:return ea(o.children,f,m,s);case q:v=8,f|=24;break;case Z:return n=In(12,o,s,f|2),n.elementType=Z,n.lanes=m,n;case fe:return n=In(13,o,s,f),n.elementType=fe,n.lanes=m,n;case le:return n=In(19,o,s,f),n.elementType=le,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case H:v=10;break e;case ie:v=9;break e;case ae:v=11;break e;case R:v=14;break e;case I:v=16,u=null;break e}v=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return s=In(v,o,s,f),s.elementType=n,s.type=u,s.lanes=m,s}function ea(n,s,o,u){return n=In(7,n,u,s),n.lanes=o,n}function im(n,s,o){return n=In(6,n,null,s),n.lanes=o,n}function V_(n){var s=In(18,null,null,0);return s.stateNode=n,s}function rm(n,s,o){return s=In(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var M_=new WeakMap;function Fn(n,s){if(typeof n=="object"&&n!==null){var o=M_.get(n);return o!==void 0?o:(s={value:n,source:s,stack:wl(s)},M_.set(n,s),s)}return{value:n,source:s,stack:wl(s)}}var lo=[],uo=0,mh=null,Yl=0,Hn=[],Gn=0,Fr=null,ji=1,zi="";function ir(n,s){lo[uo++]=Yl,lo[uo++]=mh,mh=n,Yl=s}function P_(n,s,o){Hn[Gn++]=ji,Hn[Gn++]=zi,Hn[Gn++]=Fr,Fr=n;var u=ji;n=zi;var f=32-Tt(u)-1;u&=~(1<<f),o+=1;var m=32-Tt(s)+f;if(30<m){var v=f-f%5;m=(u&(1<<v)-1).toString(32),u>>=v,f-=v,ji=1<<32-Tt(s)+f|o<<f|u,zi=m+n}else ji=1<<m|o<<f|u,zi=n}function sm(n){n.return!==null&&(ir(n,1),P_(n,1,0))}function am(n){for(;n===mh;)mh=lo[--uo],lo[uo]=null,Yl=lo[--uo],lo[uo]=null;for(;n===Fr;)Fr=Hn[--Gn],Hn[Gn]=null,zi=Hn[--Gn],Hn[Gn]=null,ji=Hn[--Gn],Hn[Gn]=null}function k_(n,s){Hn[Gn++]=ji,Hn[Gn++]=zi,Hn[Gn++]=Fr,ji=s.id,zi=s.overflow,Fr=n}var Xt=null,at=null,je=!1,Hr=null,Kn=!1,om=Error(i(519));function Gr(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $l(Fn(s,n)),om}function L_(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[Rt]=n,s[Ht]=u,o){case"dialog":Me("cancel",s),Me("close",s);break;case"iframe":case"object":case"embed":Me("load",s);break;case"video":case"audio":for(o=0;o<yu.length;o++)Me(yu[o],s);break;case"source":Me("error",s);break;case"img":case"image":case"link":Me("error",s),Me("load",s);break;case"details":Me("toggle",s);break;case"input":Me("invalid",s),Qc(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Me("invalid",s);break;case"textarea":Me("invalid",s),kr(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||e0(s.textContent,o)?(u.popover!=null&&(Me("beforetoggle",s),Me("toggle",s)),u.onScroll!=null&&Me("scroll",s),u.onScrollEnd!=null&&Me("scrollend",s),u.onClick!=null&&(s.onclick=si),s=!0):s=!1,s||Gr(n,!0)}function U_(n){for(Xt=n.return;Xt;)switch(Xt.tag){case 5:case 31:case 13:Kn=!1;return;case 27:case 3:Kn=!0;return;default:Xt=Xt.return}}function co(n){if(n!==Xt)return!1;if(!je)return U_(n),je=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Sp(n.type,n.memoizedProps)),o=!o),o&&at&&Gr(n),U_(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));at=u0(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));at=u0(n)}else s===27?(s=at,ss(n.type)?(n=Dp,Dp=null,at=n):at=s):at=Xt?Yn(n.stateNode.nextSibling):null;return!0}function ta(){at=Xt=null,je=!1}function lm(){var n=Hr;return n!==null&&(vn===null?vn=n:vn.push.apply(vn,n),Hr=null),n}function $l(n){Hr===null?Hr=[n]:Hr.push(n)}var um=M(null),na=null,rr=null;function Kr(n,s,o){he(um,s._currentValue),s._currentValue=o}function sr(n){n._currentValue=um.current,ne(um)}function cm(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function hm(n,s,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;e:for(;m!==null;){var b=m;m=f;for(var D=0;D<s.length;D++)if(b.context===s[D]){m.lanes|=o,b=m.alternate,b!==null&&(b.lanes|=o),cm(m.return,o,n),u||(v=null);break e}m=b.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(i(341));v.lanes|=o,m=v.alternate,m!==null&&(m.lanes|=o),cm(v,o,n),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===n){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function ho(n,s,o,u){n=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var b=f.type;Sn(f.pendingProps.value,v.value)||(n!==null?n.push(b):n=[b])}}else if(f===ze.current){if(v=f.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(bu):n=[bu])}f=f.return}n!==null&&hm(s,n,o,u),s.flags|=262144}function ph(n){for(n=n.firstContext;n!==null;){if(!Sn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ia(n){na=n,rr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Jt(n){return j_(na,n)}function gh(n,s){return na===null&&ia(n),j_(n,s)}function j_(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},rr===null){if(n===null)throw Error(i(308));rr=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else rr=rr.next=s;return o}var JI=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},WI=r.unstable_scheduleCallback,ZI=r.unstable_NormalPriority,Dt={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fm(){return{controller:new JI,data:new Map,refCount:0}}function Xl(n){n.refCount--,n.refCount===0&&WI(ZI,function(){n.controller.abort()})}var Jl=null,dm=0,fo=0,mo=null;function e1(n,s){if(Jl===null){var o=Jl=[];dm=0,fo=gp(),mo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return dm++,s.then(z_,z_),s}function z_(){if(--dm===0&&Jl!==null){mo!==null&&(mo.status="fulfilled");var n=Jl;Jl=null,fo=0,mo=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function t1(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var B_=W.S;W.S=function(n,s){wE=un(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&e1(n,s),B_!==null&&B_(n,s)};var ra=M(null);function mm(){var n=ra.current;return n!==null?n:st.pooledCache}function yh(n,s){s===null?he(ra,ra.current):he(ra,s.pool)}function q_(){var n=mm();return n===null?null:{parent:Dt._currentValue,pool:n}}var po=Error(i(460)),pm=Error(i(474)),_h=Error(i(542)),vh={then:function(){}};function F_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function H_(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(si,si),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,K_(n),n;default:if(typeof s.status=="string")s.then(si,si);else{if(n=st,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,K_(n),n}throw aa=s,po}}function sa(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(aa=o,po):o}}var aa=null;function G_(){if(aa===null)throw Error(i(459));var n=aa;return aa=null,n}function K_(n){if(n===po||n===_h)throw Error(i(483))}var go=null,Wl=0;function Eh(n){var s=Wl;return Wl+=1,go===null&&(go=[]),H_(go,n,s)}function Zl(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Th(n,s){throw s.$$typeof===A?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Q_(n){function s(L,V){if(n){var B=L.deletions;B===null?(L.deletions=[V],L.flags|=16):B.push(V)}}function o(L,V){if(!n)return null;for(;V!==null;)s(L,V),V=V.sibling;return null}function u(L){for(var V=new Map;L!==null;)L.key!==null?V.set(L.key,L):V.set(L.index,L),L=L.sibling;return V}function f(L,V){return L=nr(L,V),L.index=0,L.sibling=null,L}function m(L,V,B){return L.index=B,n?(B=L.alternate,B!==null?(B=B.index,B<V?(L.flags|=67108866,V):B):(L.flags|=67108866,V)):(L.flags|=1048576,V)}function v(L){return n&&L.alternate===null&&(L.flags|=67108866),L}function b(L,V,B,ee){return V===null||V.tag!==6?(V=im(B,L.mode,ee),V.return=L,V):(V=f(V,B),V.return=L,V)}function D(L,V,B,ee){var ve=B.type;return ve===Q?J(L,V,B.props.children,ee,B.key):V!==null&&(V.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===I&&sa(ve)===V.type)?(V=f(V,B.props),Zl(V,B),V.return=L,V):(V=dh(B.type,B.key,B.props,null,L.mode,ee),Zl(V,B),V.return=L,V)}function F(L,V,B,ee){return V===null||V.tag!==4||V.stateNode.containerInfo!==B.containerInfo||V.stateNode.implementation!==B.implementation?(V=rm(B,L.mode,ee),V.return=L,V):(V=f(V,B.children||[]),V.return=L,V)}function J(L,V,B,ee,ve){return V===null||V.tag!==7?(V=ea(B,L.mode,ee,ve),V.return=L,V):(V=f(V,B),V.return=L,V)}function te(L,V,B){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=im(""+V,L.mode,B),V.return=L,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case O:return B=dh(V.type,V.key,V.props,null,L.mode,B),Zl(B,V),B.return=L,B;case z:return V=rm(V,L.mode,B),V.return=L,V;case I:return V=sa(V),te(L,V,B)}if(Lt(V)||k(V))return V=ea(V,L.mode,B,null),V.return=L,V;if(typeof V.then=="function")return te(L,Eh(V),B);if(V.$$typeof===H)return te(L,gh(L,V),B);Th(L,V)}return null}function G(L,V,B,ee){var ve=V!==null?V.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return ve!==null?null:b(L,V,""+B,ee);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case O:return B.key===ve?D(L,V,B,ee):null;case z:return B.key===ve?F(L,V,B,ee):null;case I:return B=sa(B),G(L,V,B,ee)}if(Lt(B)||k(B))return ve!==null?null:J(L,V,B,ee,null);if(typeof B.then=="function")return G(L,V,Eh(B),ee);if(B.$$typeof===H)return G(L,V,gh(L,B),ee);Th(L,B)}return null}function $(L,V,B,ee,ve){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return L=L.get(B)||null,b(V,L,""+ee,ve);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case O:return L=L.get(ee.key===null?B:ee.key)||null,D(V,L,ee,ve);case z:return L=L.get(ee.key===null?B:ee.key)||null,F(V,L,ee,ve);case I:return ee=sa(ee),$(L,V,B,ee,ve)}if(Lt(ee)||k(ee))return L=L.get(B)||null,J(V,L,ee,ve,null);if(typeof ee.then=="function")return $(L,V,B,Eh(ee),ve);if(ee.$$typeof===H)return $(L,V,B,gh(V,ee),ve);Th(V,ee)}return null}function me(L,V,B,ee){for(var ve=null,Fe=null,ge=V,Ne=V=0,ke=null;ge!==null&&Ne<B.length;Ne++){ge.index>Ne?(ke=ge,ge=null):ke=ge.sibling;var He=G(L,ge,B[Ne],ee);if(He===null){ge===null&&(ge=ke);break}n&&ge&&He.alternate===null&&s(L,ge),V=m(He,V,Ne),Fe===null?ve=He:Fe.sibling=He,Fe=He,ge=ke}if(Ne===B.length)return o(L,ge),je&&ir(L,Ne),ve;if(ge===null){for(;Ne<B.length;Ne++)ge=te(L,B[Ne],ee),ge!==null&&(V=m(ge,V,Ne),Fe===null?ve=ge:Fe.sibling=ge,Fe=ge);return je&&ir(L,Ne),ve}for(ge=u(ge);Ne<B.length;Ne++)ke=$(ge,L,Ne,B[Ne],ee),ke!==null&&(n&&ke.alternate!==null&&ge.delete(ke.key===null?Ne:ke.key),V=m(ke,V,Ne),Fe===null?ve=ke:Fe.sibling=ke,Fe=ke);return n&&ge.forEach(function(cs){return s(L,cs)}),je&&ir(L,Ne),ve}function be(L,V,B,ee){if(B==null)throw Error(i(151));for(var ve=null,Fe=null,ge=V,Ne=V=0,ke=null,He=B.next();ge!==null&&!He.done;Ne++,He=B.next()){ge.index>Ne?(ke=ge,ge=null):ke=ge.sibling;var cs=G(L,ge,He.value,ee);if(cs===null){ge===null&&(ge=ke);break}n&&ge&&cs.alternate===null&&s(L,ge),V=m(cs,V,Ne),Fe===null?ve=cs:Fe.sibling=cs,Fe=cs,ge=ke}if(He.done)return o(L,ge),je&&ir(L,Ne),ve;if(ge===null){for(;!He.done;Ne++,He=B.next())He=te(L,He.value,ee),He!==null&&(V=m(He,V,Ne),Fe===null?ve=He:Fe.sibling=He,Fe=He);return je&&ir(L,Ne),ve}for(ge=u(ge);!He.done;Ne++,He=B.next())He=$(ge,L,Ne,He.value,ee),He!==null&&(n&&He.alternate!==null&&ge.delete(He.key===null?Ne:He.key),V=m(He,V,Ne),Fe===null?ve=He:Fe.sibling=He,Fe=He);return n&&ge.forEach(function(fR){return s(L,fR)}),je&&ir(L,Ne),ve}function rt(L,V,B,ee){if(typeof B=="object"&&B!==null&&B.type===Q&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case O:e:{for(var ve=B.key;V!==null;){if(V.key===ve){if(ve=B.type,ve===Q){if(V.tag===7){o(L,V.sibling),ee=f(V,B.props.children),ee.return=L,L=ee;break e}}else if(V.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===I&&sa(ve)===V.type){o(L,V.sibling),ee=f(V,B.props),Zl(ee,B),ee.return=L,L=ee;break e}o(L,V);break}else s(L,V);V=V.sibling}B.type===Q?(ee=ea(B.props.children,L.mode,ee,B.key),ee.return=L,L=ee):(ee=dh(B.type,B.key,B.props,null,L.mode,ee),Zl(ee,B),ee.return=L,L=ee)}return v(L);case z:e:{for(ve=B.key;V!==null;){if(V.key===ve)if(V.tag===4&&V.stateNode.containerInfo===B.containerInfo&&V.stateNode.implementation===B.implementation){o(L,V.sibling),ee=f(V,B.children||[]),ee.return=L,L=ee;break e}else{o(L,V);break}else s(L,V);V=V.sibling}ee=rm(B,L.mode,ee),ee.return=L,L=ee}return v(L);case I:return B=sa(B),rt(L,V,B,ee)}if(Lt(B))return me(L,V,B,ee);if(k(B)){if(ve=k(B),typeof ve!="function")throw Error(i(150));return B=ve.call(B),be(L,V,B,ee)}if(typeof B.then=="function")return rt(L,V,Eh(B),ee);if(B.$$typeof===H)return rt(L,V,gh(L,B),ee);Th(L,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,V!==null&&V.tag===6?(o(L,V.sibling),ee=f(V,B),ee.return=L,L=ee):(o(L,V),ee=im(B,L.mode,ee),ee.return=L,L=ee),v(L)):o(L,V)}return function(L,V,B,ee){try{Wl=0;var ve=rt(L,V,B,ee);return go=null,ve}catch(ge){if(ge===po||ge===_h)throw ge;var Fe=In(29,ge,null,L.mode);return Fe.lanes=ee,Fe.return=L,Fe}finally{}}}var oa=Q_(!0),Y_=Q_(!1),Qr=!1;function gm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ym(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Yr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function $r(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ke&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=fh(n),N_(n,null,o),s}return hh(n,u,s,o),fh(n)}function eu(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Rl(n,o)}}function _m(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,o=o.next}while(o!==null);m===null?f=m=s:m=m.next=s}else f=m=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var vm=!1;function tu(){if(vm){var n=mo;if(n!==null)throw n}}function nu(n,s,o,u){vm=!1;var f=n.updateQueue;Qr=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var D=b,F=D.next;D.next=null,v===null?m=F:v.next=F,v=D;var J=n.alternate;J!==null&&(J=J.updateQueue,b=J.lastBaseUpdate,b!==v&&(b===null?J.firstBaseUpdate=F:b.next=F,J.lastBaseUpdate=D))}if(m!==null){var te=f.baseState;v=0,J=F=D=null,b=m;do{var G=b.lane&-536870913,$=G!==b.lane;if($?(Pe&G)===G:(u&G)===G){G!==0&&G===fo&&(vm=!0),J!==null&&(J=J.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var me=n,be=b;G=s;var rt=o;switch(be.tag){case 1:if(me=be.payload,typeof me=="function"){te=me.call(rt,te,G);break e}te=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=be.payload,G=typeof me=="function"?me.call(rt,te,G):me,G==null)break e;te=T({},te,G);break e;case 2:Qr=!0}}G=b.callback,G!==null&&(n.flags|=64,$&&(n.flags|=8192),$=f.callbacks,$===null?f.callbacks=[G]:$.push(G))}else $={lane:G,tag:b.tag,payload:b.payload,callback:b.callback,next:null},J===null?(F=J=$,D=te):J=J.next=$,v|=G;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;$=b,b=$.next,$.next=null,f.lastBaseUpdate=$,f.shared.pending=null}}while(!0);J===null&&(D=te),f.baseState=D,f.firstBaseUpdate=F,f.lastBaseUpdate=J,m===null&&(f.shared.lanes=0),es|=v,n.lanes=v,n.memoizedState=te}}function $_(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function X_(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)$_(o[n],s)}var yo=M(null),bh=M(0);function J_(n,s){n=mr,he(bh,n),he(yo,s),mr=n|s.baseLanes}function Em(){he(bh,mr),he(yo,yo.current)}function Tm(){mr=bh.current,ne(yo),ne(bh)}var Rn=M(null),Qn=null;function Xr(n){var s=n.alternate;he(At,At.current&1),he(Rn,n),Qn===null&&(s===null||yo.current!==null||s.memoizedState!==null)&&(Qn=n)}function bm(n){he(At,At.current),he(Rn,n),Qn===null&&(Qn=n)}function W_(n){n.tag===22?(he(At,At.current),he(Rn,n),Qn===null&&(Qn=n)):Jr()}function Jr(){he(At,At.current),he(Rn,Rn.current)}function Cn(n){ne(Rn),Qn===n&&(Qn=null),ne(At)}var At=M(0);function Ah(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Cp(o)||xp(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ar=0,xe=null,nt=null,Nt=null,wh=!1,_o=!1,la=!1,Sh=0,iu=0,vo=null,n1=0;function yt(){throw Error(i(321))}function Am(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!Sn(n[o],s[o]))return!1;return!0}function wm(n,s,o,u,f,m){return ar=m,xe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,W.H=n===null||n.memoizedState===null?Pv:jm,la=!1,m=o(u,f),la=!1,_o&&(m=ev(s,o,u,f)),Z_(n),m}function Z_(n){W.H=au;var s=nt!==null&&nt.next!==null;if(ar=0,Nt=nt=xe=null,wh=!1,iu=0,vo=null,s)throw Error(i(300));n===null||Ot||(n=n.dependencies,n!==null&&ph(n)&&(Ot=!0))}function ev(n,s,o,u){xe=n;var f=0;do{if(_o&&(vo=null),iu=0,_o=!1,25<=f)throw Error(i(301));if(f+=1,Nt=nt=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}W.H=kv,m=s(o,u)}while(_o);return m}function i1(){var n=W.H,s=n.useState()[0];return s=typeof s.then=="function"?ru(s):s,n=n.useState()[0],(nt!==null?nt.memoizedState:null)!==n&&(xe.flags|=1024),s}function Sm(){var n=Sh!==0;return Sh=0,n}function Im(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Rm(n){if(wh){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}wh=!1}ar=0,Nt=nt=xe=null,_o=!1,iu=Sh=0,vo=null}function hn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?xe.memoizedState=Nt=n:Nt=Nt.next=n,Nt}function wt(){if(nt===null){var n=xe.alternate;n=n!==null?n.memoizedState:null}else n=nt.next;var s=Nt===null?xe.memoizedState:Nt.next;if(s!==null)Nt=s,nt=n;else{if(n===null)throw xe.alternate===null?Error(i(467)):Error(i(310));nt=n,n={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},Nt===null?xe.memoizedState=Nt=n:Nt=Nt.next=n}return Nt}function Ih(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ru(n){var s=iu;return iu+=1,vo===null&&(vo=[]),n=H_(vo,n,s),s=xe,(Nt===null?s.memoizedState:Nt.next)===null&&(s=s.alternate,W.H=s===null||s.memoizedState===null?Pv:jm),n}function Rh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ru(n);if(n.$$typeof===H)return Jt(n)}throw Error(i(438,String(n)))}function Cm(n){var s=null,o=xe.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=xe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Ih(),xe.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=P;return s.index++,o}function or(n,s){return typeof s=="function"?s(n):s}function Ch(n){var s=wt();return xm(s,nt,n)}function xm(n,s,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=n.baseQueue,m=u.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}s.baseQueue=f=m,u.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{s=f.next;var b=v=null,D=null,F=s,J=!1;do{var te=F.lane&-536870913;if(te!==F.lane?(Pe&te)===te:(ar&te)===te){var G=F.revertLane;if(G===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),te===fo&&(J=!0);else if((ar&G)===G){F=F.next,G===fo&&(J=!0);continue}else te={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(b=D=te,v=m):D=D.next=te,xe.lanes|=G,es|=G;te=F.action,la&&o(m,te),m=F.hasEagerState?F.eagerState:o(m,te)}else G={lane:te,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(b=D=G,v=m):D=D.next=G,xe.lanes|=te,es|=te;F=F.next}while(F!==null&&F!==s);if(D===null?v=m:D.next=b,!Sn(m,n.memoizedState)&&(Ot=!0,J&&(o=mo,o!==null)))throw o;n.memoizedState=m,n.baseState=v,n.baseQueue=D,u.lastRenderedState=m}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Dm(n){var s=wt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,m=s.memoizedState;if(f!==null){o.pending=null;var v=f=f.next;do m=n(m,v.action),v=v.next;while(v!==f);Sn(m,s.memoizedState)||(Ot=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,u]}function tv(n,s,o){var u=xe,f=wt(),m=je;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=s();var v=!Sn((nt||f).memoizedState,o);if(v&&(f.memoizedState=o,Ot=!0),f=f.queue,Vm(rv.bind(null,u,f,n),[n]),f.getSnapshot!==s||v||Nt!==null&&Nt.memoizedState.tag&1){if(u.flags|=2048,Eo(9,{destroy:void 0},iv.bind(null,u,f,o,s),null),st===null)throw Error(i(349));m||(ar&127)!==0||nv(u,s,o)}return o}function nv(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=xe.updateQueue,s===null?(s=Ih(),xe.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function iv(n,s,o,u){s.value=o,s.getSnapshot=u,sv(s)&&av(n)}function rv(n,s,o){return o(function(){sv(s)&&av(n)})}function sv(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!Sn(n,o)}catch{return!0}}function av(n){var s=Zs(n,2);s!==null&&En(s,n,2)}function Nm(n){var s=hn();if(typeof n=="function"){var o=n;if(n=o(),la){Ln(!0);try{o()}finally{Ln(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:n},s}function ov(n,s,o,u){return n.baseState=o,xm(n,nt,typeof u=="function"?u:or)}function r1(n,s,o,u,f){if(Nh(n))throw Error(i(485));if(n=s.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};W.T!==null?o(!0):m.isTransition=!1,u(m),o=s.pending,o===null?(m.next=s.pending=m,lv(s,m)):(m.next=o.next,s.pending=o.next=m)}}function lv(n,s){var o=s.action,u=s.payload,f=n.state;if(s.isTransition){var m=W.T,v={};W.T=v;try{var b=o(f,u),D=W.S;D!==null&&D(v,b),uv(n,s,b)}catch(F){Om(n,s,F)}finally{m!==null&&v.types!==null&&(m.types=v.types),W.T=m}}else try{m=o(f,u),uv(n,s,m)}catch(F){Om(n,s,F)}}function uv(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){cv(n,s,u)},function(u){return Om(n,s,u)}):cv(n,s,o)}function cv(n,s,o){s.status="fulfilled",s.value=o,hv(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,lv(n,o)))}function Om(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,hv(s),s=s.next;while(s!==u)}n.action=null}function hv(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function fv(n,s){return s}function dv(n,s){if(je){var o=st.formState;if(o!==null){e:{var u=xe;if(je){if(at){t:{for(var f=at,m=Kn;f.nodeType!==8;){if(!m){f=null;break t}if(f=Yn(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){at=Yn(f.nextSibling),u=f.data==="F!";break e}}Gr(u)}u=!1}u&&(s=o[0])}}return o=hn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fv,lastRenderedState:s},o.queue=u,o=Ov.bind(null,xe,u),u.dispatch=o,u=Nm(!1),m=Um.bind(null,xe,!1,u.queue),u=hn(),f={state:s,dispatch:null,action:n,pending:null},u.queue=f,o=r1.bind(null,xe,f,m,o),f.dispatch=o,u.memoizedState=n,[s,o,!1]}function mv(n){var s=wt();return pv(s,nt,n)}function pv(n,s,o){if(s=xm(n,s,fv)[0],n=Ch(or)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=ru(s)}catch(v){throw v===po?_h:v}else u=s;s=wt();var f=s.queue,m=f.dispatch;return o!==s.memoizedState&&(xe.flags|=2048,Eo(9,{destroy:void 0},s1.bind(null,f,o),null)),[u,m,n]}function s1(n,s){n.action=s}function gv(n){var s=wt(),o=nt;if(o!==null)return pv(s,o,n);wt(),s=s.memoizedState,o=wt();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function Eo(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=xe.updateQueue,s===null&&(s=Ih(),xe.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function yv(){return wt().memoizedState}function xh(n,s,o,u){var f=hn();xe.flags|=n,f.memoizedState=Eo(1|s,{destroy:void 0},o,u===void 0?null:u)}function Dh(n,s,o,u){var f=wt();u=u===void 0?null:u;var m=f.memoizedState.inst;nt!==null&&u!==null&&Am(u,nt.memoizedState.deps)?f.memoizedState=Eo(s,m,o,u):(xe.flags|=n,f.memoizedState=Eo(1|s,m,o,u))}function _v(n,s){xh(8390656,8,n,s)}function Vm(n,s){Dh(2048,8,n,s)}function a1(n){xe.flags|=4;var s=xe.updateQueue;if(s===null)s=Ih(),xe.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function vv(n){var s=wt().memoizedState;return a1({ref:s,nextImpl:n}),function(){if((Ke&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function Ev(n,s){return Dh(4,2,n,s)}function Tv(n,s){return Dh(4,4,n,s)}function bv(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Av(n,s,o){o=o!=null?o.concat([n]):null,Dh(4,4,bv.bind(null,s,n),o)}function Mm(){}function wv(n,s){var o=wt();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Am(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function Sv(n,s){var o=wt();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Am(s,u[1]))return u[0];if(u=n(),la){Ln(!0);try{n()}finally{Ln(!1)}}return o.memoizedState=[u,s],u}function Pm(n,s,o){return o===void 0||(ar&1073741824)!==0&&(Pe&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=IE(),xe.lanes|=n,es|=n,o)}function Iv(n,s,o,u){return Sn(o,s)?o:yo.current!==null?(n=Pm(n,o,u),Sn(n,s)||(Ot=!0),n):(ar&42)===0||(ar&1073741824)!==0&&(Pe&261930)===0?(Ot=!0,n.memoizedState=o):(n=IE(),xe.lanes|=n,es|=n,s)}function Rv(n,s,o,u,f){var m=ce.p;ce.p=m!==0&&8>m?m:8;var v=W.T,b={};W.T=b,Um(n,!1,s,o);try{var D=f(),F=W.S;if(F!==null&&F(b,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var J=t1(D,u);su(n,s,J,Nn(n))}else su(n,s,u,Nn(n))}catch(te){su(n,s,{then:function(){},status:"rejected",reason:te},Nn())}finally{ce.p=m,v!==null&&b.types!==null&&(v.types=b.types),W.T=v}}function o1(){}function km(n,s,o,u){if(n.tag!==5)throw Error(i(476));var f=Cv(n).queue;Rv(n,f,s,Te,o===null?o1:function(){return xv(n),o(u)})}function Cv(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:Te,baseState:Te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:Te},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function xv(n){var s=Cv(n);s.next===null&&(s=n.alternate.memoizedState),su(n,s.next.queue,{},Nn())}function Lm(){return Jt(bu)}function Dv(){return wt().memoizedState}function Nv(){return wt().memoizedState}function l1(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=Nn();n=Yr(o);var u=$r(s,n,o);u!==null&&(En(u,s,o),eu(u,s,o)),s={cache:fm()},n.payload=s;return}s=s.return}}function u1(n,s,o){var u=Nn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Nh(n)?Vv(s,o):(o=tm(n,s,o,u),o!==null&&(En(o,n,u),Mv(o,s,u)))}function Ov(n,s,o){var u=Nn();su(n,s,o,u)}function su(n,s,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Nh(n))Vv(s,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var v=s.lastRenderedState,b=m(v,o);if(f.hasEagerState=!0,f.eagerState=b,Sn(b,v))return hh(n,s,f,0),st===null&&ch(),!1}catch{}finally{}if(o=tm(n,s,f,u),o!==null)return En(o,n,u),Mv(o,s,u),!0}return!1}function Um(n,s,o,u){if(u={lane:2,revertLane:gp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Nh(n)){if(s)throw Error(i(479))}else s=tm(n,o,u,2),s!==null&&En(s,n,2)}function Nh(n){var s=n.alternate;return n===xe||s!==null&&s===xe}function Vv(n,s){_o=wh=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function Mv(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Rl(n,o)}}var au={readContext:Jt,use:Rh,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt};au.useEffectEvent=yt;var Pv={readContext:Jt,use:Rh,useCallback:function(n,s){return hn().memoizedState=[n,s===void 0?null:s],n},useContext:Jt,useEffect:_v,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,xh(4194308,4,bv.bind(null,s,n),o)},useLayoutEffect:function(n,s){return xh(4194308,4,n,s)},useInsertionEffect:function(n,s){xh(4,2,n,s)},useMemo:function(n,s){var o=hn();s=s===void 0?null:s;var u=n();if(la){Ln(!0);try{n()}finally{Ln(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=hn();if(o!==void 0){var f=o(s);if(la){Ln(!0);try{o(s)}finally{Ln(!1)}}}else f=s;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=u1.bind(null,xe,n),[u.memoizedState,n]},useRef:function(n){var s=hn();return n={current:n},s.memoizedState=n},useState:function(n){n=Nm(n);var s=n.queue,o=Ov.bind(null,xe,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:Mm,useDeferredValue:function(n,s){var o=hn();return Pm(o,n,s)},useTransition:function(){var n=Nm(!1);return n=Rv.bind(null,xe,n.queue,!0,!1),hn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=xe,f=hn();if(je){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),st===null)throw Error(i(349));(Pe&127)!==0||nv(u,s,o)}f.memoizedState=o;var m={value:o,getSnapshot:s};return f.queue=m,_v(rv.bind(null,u,m,n),[n]),u.flags|=2048,Eo(9,{destroy:void 0},iv.bind(null,u,m,o,s),null),o},useId:function(){var n=hn(),s=st.identifierPrefix;if(je){var o=zi,u=ji;o=(u&~(1<<32-Tt(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Sh++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=n1++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Lm,useFormState:dv,useActionState:dv,useOptimistic:function(n){var s=hn();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Um.bind(null,xe,!0,o),o.dispatch=s,[n,s]},useMemoCache:Cm,useCacheRefresh:function(){return hn().memoizedState=l1.bind(null,xe)},useEffectEvent:function(n){var s=hn(),o={impl:n};return s.memoizedState=o,function(){if((Ke&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},jm={readContext:Jt,use:Rh,useCallback:wv,useContext:Jt,useEffect:Vm,useImperativeHandle:Av,useInsertionEffect:Ev,useLayoutEffect:Tv,useMemo:Sv,useReducer:Ch,useRef:yv,useState:function(){return Ch(or)},useDebugValue:Mm,useDeferredValue:function(n,s){var o=wt();return Iv(o,nt.memoizedState,n,s)},useTransition:function(){var n=Ch(or)[0],s=wt().memoizedState;return[typeof n=="boolean"?n:ru(n),s]},useSyncExternalStore:tv,useId:Dv,useHostTransitionStatus:Lm,useFormState:mv,useActionState:mv,useOptimistic:function(n,s){var o=wt();return ov(o,nt,n,s)},useMemoCache:Cm,useCacheRefresh:Nv};jm.useEffectEvent=vv;var kv={readContext:Jt,use:Rh,useCallback:wv,useContext:Jt,useEffect:Vm,useImperativeHandle:Av,useInsertionEffect:Ev,useLayoutEffect:Tv,useMemo:Sv,useReducer:Dm,useRef:yv,useState:function(){return Dm(or)},useDebugValue:Mm,useDeferredValue:function(n,s){var o=wt();return nt===null?Pm(o,n,s):Iv(o,nt.memoizedState,n,s)},useTransition:function(){var n=Dm(or)[0],s=wt().memoizedState;return[typeof n=="boolean"?n:ru(n),s]},useSyncExternalStore:tv,useId:Dv,useHostTransitionStatus:Lm,useFormState:gv,useActionState:gv,useOptimistic:function(n,s){var o=wt();return nt!==null?ov(o,nt,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Cm,useCacheRefresh:Nv};kv.useEffectEvent=vv;function zm(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:T({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Bm={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=Nn(),f=Yr(u);f.payload=s,o!=null&&(f.callback=o),s=$r(n,f,u),s!==null&&(En(s,n,u),eu(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=Nn(),f=Yr(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=$r(n,f,u),s!==null&&(En(s,n,u),eu(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=Nn(),u=Yr(o);u.tag=2,s!=null&&(u.callback=s),s=$r(n,u,o),s!==null&&(En(s,n,o),eu(s,n,o))}};function Lv(n,s,o,u,f,m,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,v):s.prototype&&s.prototype.isPureReactComponent?!Kl(o,u)||!Kl(f,m):!0}function Uv(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&Bm.enqueueReplaceState(s,s.state,null)}function ua(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=T({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function jv(n){uh(n)}function zv(n){console.error(n)}function Bv(n){uh(n)}function Oh(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function qv(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function qm(n,s,o){return o=Yr(o),o.tag=3,o.payload={element:null},o.callback=function(){Oh(n,s)},o}function Fv(n){return n=Yr(n),n.tag=3,n}function Hv(n,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;n.payload=function(){return f(m)},n.callback=function(){qv(s,o,u)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){qv(s,o,u),typeof f!="function"&&(ts===null?ts=new Set([this]):ts.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function c1(n,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&ho(s,o,f,!0),o=Rn.current,o!==null){switch(o.tag){case 31:case 13:return Qn===null?Hh():o.alternate===null&&_t===0&&(_t=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===vh?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),dp(n,u,f)),!1;case 22:return o.flags|=65536,u===vh?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),dp(n,u,f)),!1}throw Error(i(435,o.tag))}return dp(n,u,f),Hh(),!1}if(je)return s=Rn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==om&&(n=Error(i(422),{cause:u}),$l(Fn(n,o)))):(u!==om&&(s=Error(i(423),{cause:u}),$l(Fn(s,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=Fn(u,o),f=qm(n.stateNode,u,f),_m(n,f),_t!==4&&(_t=2)),!1;var m=Error(i(520),{cause:u});if(m=Fn(m,o),mu===null?mu=[m]:mu.push(m),_t!==4&&(_t=2),s===null)return!0;u=Fn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=qm(o.stateNode,u,n),_m(o,n),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ts===null||!ts.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Fv(f),Hv(f,n,o,u),_m(o,f),!1}o=o.return}while(o!==null);return!1}var Fm=Error(i(461)),Ot=!1;function Wt(n,s,o,u){s.child=n===null?Y_(s,null,o,u):oa(s,n.child,o,u)}function Gv(n,s,o,u,f){o=o.render;var m=s.ref;if("ref"in u){var v={};for(var b in u)b!=="ref"&&(v[b]=u[b])}else v=u;return ia(s),u=wm(n,s,o,v,m,f),b=Sm(),n!==null&&!Ot?(Im(n,s,f),lr(n,s,f)):(je&&b&&sm(s),s.flags|=1,Wt(n,s,u,f),s.child)}function Kv(n,s,o,u,f){if(n===null){var m=o.type;return typeof m=="function"&&!nm(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,Qv(n,s,m,u,f)):(n=dh(o.type,null,u,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,!Jm(n,f)){var v=m.memoizedProps;if(o=o.compare,o=o!==null?o:Kl,o(v,u)&&n.ref===s.ref)return lr(n,s,f)}return s.flags|=1,n=nr(m,u),n.ref=s.ref,n.return=s,s.child=n}function Qv(n,s,o,u,f){if(n!==null){var m=n.memoizedProps;if(Kl(m,u)&&n.ref===s.ref)if(Ot=!1,s.pendingProps=u=m,Jm(n,f))(n.flags&131072)!==0&&(Ot=!0);else return s.lanes=n.lanes,lr(n,s,f)}return Hm(n,s,o,u,f)}function Yv(n,s,o,u){var f=u.children,m=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(u=s.child=n.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~m}else u=0,s.child=null;return $v(n,s,m,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&yh(s,m!==null?m.cachePool:null),m!==null?J_(s,m):Em(),W_(s);else return u=s.lanes=536870912,$v(n,s,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(yh(s,m.cachePool),J_(s,m),Jr(),s.memoizedState=null):(n!==null&&yh(s,null),Em(),Jr());return Wt(n,s,f,o),s.child}function ou(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function $v(n,s,o,u,f){var m=mm();return m=m===null?null:{parent:Dt._currentValue,pool:m},s.memoizedState={baseLanes:o,cachePool:m},n!==null&&yh(s,null),Em(),W_(s),n!==null&&ho(n,s,u,!0),s.childLanes=f,null}function Vh(n,s){return s=Ph({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function Xv(n,s,o){return oa(s,n.child,null,o),n=Vh(s,s.pendingProps),n.flags|=2,Cn(s),s.memoizedState=null,n}function h1(n,s,o){var u=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(je){if(u.mode==="hidden")return n=Vh(s,u),s.lanes=536870912,ou(null,n);if(bm(s),(n=at)?(n=l0(n,Kn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Fr!==null?{id:ji,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},o=V_(n),o.return=s,s.child=o,Xt=s,at=null)):n=null,n===null)throw Gr(s);return s.lanes=536870912,null}return Vh(s,u)}var m=n.memoizedState;if(m!==null){var v=m.dehydrated;if(bm(s),f)if(s.flags&256)s.flags&=-257,s=Xv(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(Ot||ho(n,s,o,!1),f=(o&n.childLanes)!==0,Ot||f){if(u=st,u!==null&&(v=Cl(u,o),v!==0&&v!==m.retryLane))throw m.retryLane=v,Zs(n,v),En(u,n,v),Fm;Hh(),s=Xv(n,s,o)}else n=m.treeContext,at=Yn(v.nextSibling),Xt=s,je=!0,Hr=null,Kn=!1,n!==null&&k_(s,n),s=Vh(s,u),s.flags|=4096;return s}return n=nr(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Mh(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function Hm(n,s,o,u,f){return ia(s),o=wm(n,s,o,u,void 0,f),u=Sm(),n!==null&&!Ot?(Im(n,s,f),lr(n,s,f)):(je&&u&&sm(s),s.flags|=1,Wt(n,s,o,f),s.child)}function Jv(n,s,o,u,f,m){return ia(s),s.updateQueue=null,o=ev(s,u,o,f),Z_(n),u=Sm(),n!==null&&!Ot?(Im(n,s,m),lr(n,s,m)):(je&&u&&sm(s),s.flags|=1,Wt(n,s,o,m),s.child)}function Wv(n,s,o,u,f){if(ia(s),s.stateNode===null){var m=oo,v=o.contextType;typeof v=="object"&&v!==null&&(m=Jt(v)),m=new o(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Bm,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},gm(s),v=o.contextType,m.context=typeof v=="object"&&v!==null?Jt(v):oo,m.state=s.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(zm(s,o,v,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&Bm.enqueueReplaceState(m,m.state,null),nu(s,u,m,f),tu(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){m=s.stateNode;var b=s.memoizedProps,D=ua(o,b);m.props=D;var F=m.context,J=o.contextType;v=oo,typeof J=="object"&&J!==null&&(v=Jt(J));var te=o.getDerivedStateFromProps;J=typeof te=="function"||typeof m.getSnapshotBeforeUpdate=="function",b=s.pendingProps!==b,J||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b||F!==v)&&Uv(s,m,u,v),Qr=!1;var G=s.memoizedState;m.state=G,nu(s,u,m,f),tu(),F=s.memoizedState,b||G!==F||Qr?(typeof te=="function"&&(zm(s,o,te,u),F=s.memoizedState),(D=Qr||Lv(s,o,D,u,G,F,v))?(J||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=F),m.props=u,m.state=F,m.context=v,u=D):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,ym(n,s),v=s.memoizedProps,J=ua(o,v),m.props=J,te=s.pendingProps,G=m.context,F=o.contextType,D=oo,typeof F=="object"&&F!==null&&(D=Jt(F)),b=o.getDerivedStateFromProps,(F=typeof b=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==te||G!==D)&&Uv(s,m,u,D),Qr=!1,G=s.memoizedState,m.state=G,nu(s,u,m,f),tu();var $=s.memoizedState;v!==te||G!==$||Qr||n!==null&&n.dependencies!==null&&ph(n.dependencies)?(typeof b=="function"&&(zm(s,o,b,u),$=s.memoizedState),(J=Qr||Lv(s,o,J,u,G,$,D)||n!==null&&n.dependencies!==null&&ph(n.dependencies))?(F||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,$,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,$,D)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=$),m.props=u,m.state=$,m.context=D,u=J):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),u=!1)}return m=u,Mh(n,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,n!==null&&u?(s.child=oa(s,n.child,null,f),s.child=oa(s,null,o,f)):Wt(n,s,o,f),s.memoizedState=m.state,n=s.child):n=lr(n,s,f),n}function Zv(n,s,o,u){return ta(),s.flags|=256,Wt(n,s,o,u),s.child}var Gm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Km(n){return{baseLanes:n,cachePool:q_()}}function Qm(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=Dn),n}function eE(n,s,o){var u=s.pendingProps,f=!1,m=(s.flags&128)!==0,v;if((v=m)||(v=n!==null&&n.memoizedState===null?!1:(At.current&2)!==0),v&&(f=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,n===null){if(je){if(f?Xr(s):Jr(),(n=at)?(n=l0(n,Kn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Fr!==null?{id:ji,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},o=V_(n),o.return=s,s.child=o,Xt=s,at=null)):n=null,n===null)throw Gr(s);return xp(n)?s.lanes=32:s.lanes=536870912,null}var b=u.children;return u=u.fallback,f?(Jr(),f=s.mode,b=Ph({mode:"hidden",children:b},f),u=ea(u,f,o,null),b.return=s,u.return=s,b.sibling=u,s.child=b,u=s.child,u.memoizedState=Km(o),u.childLanes=Qm(n,v,o),s.memoizedState=Gm,ou(null,u)):(Xr(s),Ym(s,b))}var D=n.memoizedState;if(D!==null&&(b=D.dehydrated,b!==null)){if(m)s.flags&256?(Xr(s),s.flags&=-257,s=$m(n,s,o)):s.memoizedState!==null?(Jr(),s.child=n.child,s.flags|=128,s=null):(Jr(),b=u.fallback,f=s.mode,u=Ph({mode:"visible",children:u.children},f),b=ea(b,f,o,null),b.flags|=2,u.return=s,b.return=s,u.sibling=b,s.child=u,oa(s,n.child,null,o),u=s.child,u.memoizedState=Km(o),u.childLanes=Qm(n,v,o),s.memoizedState=Gm,s=ou(null,u));else if(Xr(s),xp(b)){if(v=b.nextSibling&&b.nextSibling.dataset,v)var F=v.dgst;v=F,u=Error(i(419)),u.stack="",u.digest=v,$l({value:u,source:null,stack:null}),s=$m(n,s,o)}else if(Ot||ho(n,s,o,!1),v=(o&n.childLanes)!==0,Ot||v){if(v=st,v!==null&&(u=Cl(v,o),u!==0&&u!==D.retryLane))throw D.retryLane=u,Zs(n,u),En(v,n,u),Fm;Cp(b)||Hh(),s=$m(n,s,o)}else Cp(b)?(s.flags|=192,s.child=n.child,s=null):(n=D.treeContext,at=Yn(b.nextSibling),Xt=s,je=!0,Hr=null,Kn=!1,n!==null&&k_(s,n),s=Ym(s,u.children),s.flags|=4096);return s}return f?(Jr(),b=u.fallback,f=s.mode,D=n.child,F=D.sibling,u=nr(D,{mode:"hidden",children:u.children}),u.subtreeFlags=D.subtreeFlags&65011712,F!==null?b=nr(F,b):(b=ea(b,f,o,null),b.flags|=2),b.return=s,u.return=s,u.sibling=b,s.child=u,ou(null,u),u=s.child,b=n.child.memoizedState,b===null?b=Km(o):(f=b.cachePool,f!==null?(D=Dt._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=q_(),b={baseLanes:b.baseLanes|o,cachePool:f}),u.memoizedState=b,u.childLanes=Qm(n,v,o),s.memoizedState=Gm,ou(n.child,u)):(Xr(s),o=n.child,n=o.sibling,o=nr(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(v=s.deletions,v===null?(s.deletions=[n],s.flags|=16):v.push(n)),s.child=o,s.memoizedState=null,o)}function Ym(n,s){return s=Ph({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Ph(n,s){return n=In(22,n,null,s),n.lanes=0,n}function $m(n,s,o){return oa(s,n.child,null,o),n=Ym(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function tE(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),cm(n.return,s,o)}function Xm(n,s,o,u,f,m){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:m}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=o,v.tailMode=f,v.treeForkCount=m)}function nE(n,s,o){var u=s.pendingProps,f=u.revealOrder,m=u.tail;u=u.children;var v=At.current,b=(v&2)!==0;if(b?(v=v&1|2,s.flags|=128):v&=1,he(At,v),Wt(n,s,u,o),u=je?Yl:0,!b&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&tE(n,o,s);else if(n.tag===19)tE(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=s.child,f=null;o!==null;)n=o.alternate,n!==null&&Ah(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Xm(s,!1,f,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Ah(n)===null){s.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Xm(s,!0,o,null,m,u);break;case"together":Xm(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function lr(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),es|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(ho(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,o=nr(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=nr(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function Jm(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&ph(n)))}function f1(n,s,o){switch(s.tag){case 3:Ut(s,s.stateNode.containerInfo),Kr(s,Dt,n.memoizedState.cache),ta();break;case 27:case 5:Ps(s);break;case 4:Ut(s,s.stateNode.containerInfo);break;case 10:Kr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,bm(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Xr(s),s.flags|=128,null):(o&s.child.childLanes)!==0?eE(n,s,o):(Xr(s),n=lr(n,s,o),n!==null?n.sibling:null);Xr(s);break;case 19:var f=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(ho(n,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return nE(n,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),he(At,At.current),u)break;return null;case 22:return s.lanes=0,Yv(n,s,o,s.pendingProps);case 24:Kr(s,Dt,n.memoizedState.cache)}return lr(n,s,o)}function iE(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)Ot=!0;else{if(!Jm(n,o)&&(s.flags&128)===0)return Ot=!1,f1(n,s,o);Ot=(n.flags&131072)!==0}else Ot=!1,je&&(s.flags&1048576)!==0&&P_(s,Yl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=sa(s.elementType),s.type=n,typeof n=="function")nm(n)?(u=ua(n,u),s.tag=1,s=Wv(null,s,n,u,o)):(s.tag=0,s=Hm(null,s,n,u,o));else{if(n!=null){var f=n.$$typeof;if(f===ae){s.tag=11,s=Gv(null,s,n,u,o);break e}else if(f===R){s.tag=14,s=Kv(null,s,n,u,o);break e}}throw s=lt(n)||n,Error(i(306,s,""))}}return s;case 0:return Hm(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=ua(u,s.pendingProps),Wv(n,s,u,f,o);case 3:e:{if(Ut(s,s.stateNode.containerInfo),n===null)throw Error(i(387));u=s.pendingProps;var m=s.memoizedState;f=m.element,ym(n,s),nu(s,u,null,o);var v=s.memoizedState;if(u=v.cache,Kr(s,Dt,u),u!==m.cache&&hm(s,[Dt],o,!0),tu(),u=v.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=Zv(n,s,u,o);break e}else if(u!==f){f=Fn(Error(i(424)),s),$l(f),s=Zv(n,s,u,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(at=Yn(n.firstChild),Xt=s,je=!0,Hr=null,Kn=!0,o=Y_(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(ta(),u===f){s=lr(n,s,o);break e}Wt(n,s,u,o)}s=s.child}return s;case 26:return Mh(n,s),n===null?(o=m0(s.type,null,s.pendingProps,null))?s.memoizedState=o:je||(o=s.type,n=s.pendingProps,u=Jh(De.current).createElement(o),u[Rt]=s,u[Ht]=n,Zt(u,o,n),Ct(u),s.stateNode=u):s.memoizedState=m0(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Ps(s),n===null&&je&&(u=s.stateNode=h0(s.type,s.pendingProps,De.current),Xt=s,Kn=!0,f=at,ss(s.type)?(Dp=f,at=Yn(u.firstChild)):at=f),Wt(n,s,s.pendingProps.children,o),Mh(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&je&&((f=u=at)&&(u=q1(u,s.type,s.pendingProps,Kn),u!==null?(s.stateNode=u,Xt=s,at=Yn(u.firstChild),Kn=!1,f=!0):f=!1),f||Gr(s)),Ps(s),f=s.type,m=s.pendingProps,v=n!==null?n.memoizedProps:null,u=m.children,Sp(f,m)?u=null:v!==null&&Sp(f,v)&&(s.flags|=32),s.memoizedState!==null&&(f=wm(n,s,i1,null,null,o),bu._currentValue=f),Mh(n,s),Wt(n,s,u,o),s.child;case 6:return n===null&&je&&((n=o=at)&&(o=F1(o,s.pendingProps,Kn),o!==null?(s.stateNode=o,Xt=s,at=null,n=!0):n=!1),n||Gr(s)),null;case 13:return eE(n,s,o);case 4:return Ut(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=oa(s,null,u,o):Wt(n,s,u,o),s.child;case 11:return Gv(n,s,s.type,s.pendingProps,o);case 7:return Wt(n,s,s.pendingProps,o),s.child;case 8:return Wt(n,s,s.pendingProps.children,o),s.child;case 12:return Wt(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Kr(s,s.type,u.value),Wt(n,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,ia(s),f=Jt(f),u=u(f),s.flags|=1,Wt(n,s,u,o),s.child;case 14:return Kv(n,s,s.type,s.pendingProps,o);case 15:return Qv(n,s,s.type,s.pendingProps,o);case 19:return nE(n,s,o);case 31:return h1(n,s,o);case 22:return Yv(n,s,o,s.pendingProps);case 24:return ia(s),u=Jt(Dt),n===null?(f=mm(),f===null&&(f=st,m=fm(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),s.memoizedState={parent:u,cache:f},gm(s),Kr(s,Dt,f)):((n.lanes&o)!==0&&(ym(n,s),nu(s,null,null,o),tu()),f=n.memoizedState,m=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Kr(s,Dt,u)):(u=m.cache,Kr(s,Dt,u),u!==f.cache&&hm(s,[Dt],o,!0))),Wt(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function ur(n){n.flags|=4}function Wm(n,s,o,u,f){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(DE())n.flags|=8192;else throw aa=vh,pm}else n.flags&=-16777217}function rE(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!v0(s))if(DE())n.flags|=8192;else throw aa=vh,pm}function kh(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?qc():536870912,n.lanes|=s,wo|=s)}function lu(n,s){if(!je)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function ot(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function d1(n,s,o){var u=s.pendingProps;switch(am(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(s),null;case 1:return ot(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),sr(Dt),ut(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(co(s)?ur(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,lm())),ot(s),null;case 26:var f=s.type,m=s.memoizedState;return n===null?(ur(s),m!==null?(ot(s),rE(s,m)):(ot(s),Wm(s,f,null,u,o))):m?m!==n.memoizedState?(ur(s),ot(s),rE(s,m)):(ot(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&ur(s),ot(s),Wm(s,f,n,u,o)),null;case 27:if(qa(s),o=De.current,f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&ur(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ot(s),null}n=de.current,co(s)?L_(s):(n=h0(f,u,o),s.stateNode=n,ur(s))}return ot(s),null;case 5:if(qa(s),f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&ur(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ot(s),null}if(m=de.current,co(s))L_(s);else{var v=Jh(De.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?v.createElement(f,{is:u.is}):v.createElement(f)}}m[Rt]=s,m[Ht]=u;e:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break e;for(;v.sibling===null;){if(v.return===null||v.return===s)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=m;e:switch(Zt(m,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ur(s)}}return ot(s),Wm(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&ur(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(n=De.current,co(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,f=Xt,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[Rt]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||e0(n.nodeValue,o)),n||Gr(s,!0)}else n=Jh(n).createTextNode(u),n[Rt]=s,s.stateNode=n}return ot(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(u=co(s),o!==null){if(n===null){if(!u)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Rt]=s}else ta(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ot(s),n=!1}else o=lm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(Cn(s),s):(Cn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return ot(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=co(s),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Rt]=s}else ta(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ot(s),f=!1}else f=lm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(Cn(s),s):(Cn(s),null)}return Cn(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),kh(s,s.updateQueue),ot(s),null);case 4:return ut(),n===null&&Ep(s.stateNode.containerInfo),ot(s),null;case 10:return sr(s.type),ot(s),null;case 19:if(ne(At),u=s.memoizedState,u===null)return ot(s),null;if(f=(s.flags&128)!==0,m=u.rendering,m===null)if(f)lu(u,!1);else{if(_t!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(m=Ah(n),m!==null){for(s.flags|=128,lu(u,!1),n=m.updateQueue,s.updateQueue=n,kh(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)O_(o,n),o=o.sibling;return he(At,At.current&1|2),je&&ir(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&un()>Bh&&(s.flags|=128,f=!0,lu(u,!1),s.lanes=4194304)}else{if(!f)if(n=Ah(m),n!==null){if(s.flags|=128,f=!0,n=n.updateQueue,s.updateQueue=n,kh(s,n),lu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!je)return ot(s),null}else 2*un()-u.renderingStartTime>Bh&&o!==536870912&&(s.flags|=128,f=!0,lu(u,!1),s.lanes=4194304);u.isBackwards?(m.sibling=s.child,s.child=m):(n=u.last,n!==null?n.sibling=m:s.child=m,u.last=m)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=un(),n.sibling=null,o=At.current,he(At,f?o&1|2:o&1),je&&ir(s,u.treeForkCount),n):(ot(s),null);case 22:case 23:return Cn(s),Tm(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(ot(s),s.subtreeFlags&6&&(s.flags|=8192)):ot(s),o=s.updateQueue,o!==null&&kh(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&ne(ra),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),sr(Dt),ot(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function m1(n,s){switch(am(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return sr(Dt),ut(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return qa(s),null;case 31:if(s.memoizedState!==null){if(Cn(s),s.alternate===null)throw Error(i(340));ta()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Cn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));ta()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ne(At),null;case 4:return ut(),null;case 10:return sr(s.type),null;case 22:case 23:return Cn(s),Tm(),n!==null&&ne(ra),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return sr(Dt),null;case 25:return null;default:return null}}function sE(n,s){switch(am(s),s.tag){case 3:sr(Dt),ut();break;case 26:case 27:case 5:qa(s);break;case 4:ut();break;case 31:s.memoizedState!==null&&Cn(s);break;case 13:Cn(s);break;case 19:ne(At);break;case 10:sr(s.type);break;case 22:case 23:Cn(s),Tm(),n!==null&&ne(ra);break;case 24:sr(Dt)}}function uu(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var m=o.create,v=o.inst;u=m(),v.destroy=u}o=o.next}while(o!==f)}}catch(b){Je(s,s.return,b)}}function Wr(n,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&n)===n){var v=u.inst,b=v.destroy;if(b!==void 0){v.destroy=void 0,f=s;var D=o,F=b;try{F()}catch(J){Je(f,D,J)}}}u=u.next}while(u!==m)}}catch(J){Je(s,s.return,J)}}function aE(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{X_(s,o)}catch(u){Je(n,n.return,u)}}}function oE(n,s,o){o.props=ua(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){Je(n,s,u)}}function cu(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){Je(n,s,f)}}function Bi(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){Je(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){Je(n,s,f)}else o.current=null}function lE(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){Je(n,n.return,f)}}function Zm(n,s,o){try{var u=n.stateNode;k1(u,n.type,o,s),u[Ht]=s}catch(f){Je(n,n.return,f)}}function uE(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ss(n.type)||n.tag===4}function ep(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||uE(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ss(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function tp(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=si));else if(u!==4&&(u===27&&ss(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(tp(n,s,o),n=n.sibling;n!==null;)tp(n,s,o),n=n.sibling}function Lh(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&ss(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Lh(n,s,o),n=n.sibling;n!==null;)Lh(n,s,o),n=n.sibling}function cE(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Zt(s,u,o),s[Rt]=n,s[Ht]=o}catch(m){Je(n,n.return,m)}}var cr=!1,Vt=!1,np=!1,hE=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function p1(n,s){if(n=n.containerInfo,Ap=sf,n=A_(n),$d(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var v=0,b=-1,D=-1,F=0,J=0,te=n,G=null;t:for(;;){for(var $;te!==o||f!==0&&te.nodeType!==3||(b=v+f),te!==m||u!==0&&te.nodeType!==3||(D=v+u),te.nodeType===3&&(v+=te.nodeValue.length),($=te.firstChild)!==null;)G=te,te=$;for(;;){if(te===n)break t;if(G===o&&++F===f&&(b=v),G===m&&++J===u&&(D=v),($=te.nextSibling)!==null)break;te=G,G=te.parentNode}te=$}o=b===-1||D===-1?null:{start:b,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(wp={focusedElem:n,selectionRange:o},sf=!1,Kt=s;Kt!==null;)if(s=Kt,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Kt=n;else for(;Kt!==null;){switch(s=Kt,m=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=s,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var me=ua(o.type,f);n=u.getSnapshotBeforeUpdate(me,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(be){Je(o,o.return,be)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Rp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Rp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,Kt=n;break}Kt=s.return}}function fE(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:fr(n,o),u&4&&uu(5,o);break;case 1:if(fr(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(v){Je(o,o.return,v)}else{var f=ua(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(v){Je(o,o.return,v)}}u&64&&aE(o),u&512&&cu(o,o.return);break;case 3:if(fr(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{X_(n,s)}catch(v){Je(o,o.return,v)}}break;case 27:s===null&&u&4&&cE(o);case 26:case 5:fr(n,o),s===null&&u&4&&lE(o),u&512&&cu(o,o.return);break;case 12:fr(n,o);break;case 31:fr(n,o),u&4&&pE(n,o);break;case 13:fr(n,o),u&4&&gE(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=w1.bind(null,o),H1(n,o))));break;case 22:if(u=o.memoizedState!==null||cr,!u){s=s!==null&&s.memoizedState!==null||Vt,f=cr;var m=Vt;cr=u,(Vt=s)&&!m?dr(n,o,(o.subtreeFlags&8772)!==0):fr(n,o),cr=f,Vt=m}break;case 30:break;default:fr(n,o)}}function dE(n){var s=n.alternate;s!==null&&(n.alternate=null,dE(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Qa(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ht=null,gn=!1;function hr(n,s,o){for(o=o.child;o!==null;)mE(n,s,o),o=o.sibling}function mE(n,s,o){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(ti,o)}catch{}switch(o.tag){case 26:Vt||Bi(o,s),hr(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Vt||Bi(o,s);var u=ht,f=gn;ss(o.type)&&(ht=o.stateNode,gn=!1),hr(n,s,o),vu(o.stateNode),ht=u,gn=f;break;case 5:Vt||Bi(o,s);case 6:if(u=ht,f=gn,ht=null,hr(n,s,o),ht=u,gn=f,ht!==null)if(gn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(o.stateNode)}catch(m){Je(o,s,m)}else try{ht.removeChild(o.stateNode)}catch(m){Je(o,s,m)}break;case 18:ht!==null&&(gn?(n=ht,a0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Oo(n)):a0(ht,o.stateNode));break;case 4:u=ht,f=gn,ht=o.stateNode.containerInfo,gn=!0,hr(n,s,o),ht=u,gn=f;break;case 0:case 11:case 14:case 15:Wr(2,o,s),Vt||Wr(4,o,s),hr(n,s,o);break;case 1:Vt||(Bi(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&oE(o,s,u)),hr(n,s,o);break;case 21:hr(n,s,o);break;case 22:Vt=(u=Vt)||o.memoizedState!==null,hr(n,s,o),Vt=u;break;default:hr(n,s,o)}}function pE(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Oo(n)}catch(o){Je(s,s.return,o)}}}function gE(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Oo(n)}catch(o){Je(s,s.return,o)}}function g1(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new hE),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new hE),s;default:throw Error(i(435,n.tag))}}function Uh(n,s){var o=g1(n);s.forEach(function(u){if(!o.has(u)){o.add(u);var f=S1.bind(null,n,u);u.then(f,f)}})}function yn(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=n,v=s,b=v;e:for(;b!==null;){switch(b.tag){case 27:if(ss(b.type)){ht=b.stateNode,gn=!1;break e}break;case 5:ht=b.stateNode,gn=!1;break e;case 3:case 4:ht=b.stateNode.containerInfo,gn=!0;break e}b=b.return}if(ht===null)throw Error(i(160));mE(m,v,f),ht=null,gn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)yE(s,n),s=s.sibling}var hi=null;function yE(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:yn(s,n),_n(n),u&4&&(Wr(3,n,n.return),uu(3,n),Wr(5,n,n.return));break;case 1:yn(s,n),_n(n),u&512&&(Vt||o===null||Bi(o,o.return)),u&64&&cr&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=hi;if(yn(s,n),_n(n),u&512&&(Vt||o===null||Bi(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Ri]||m[Rt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),Zt(m,u,o),m[Rt]=n,Ct(m),u=m;break e;case"link":var v=y0("link","href",f).get(u+(o.href||""));if(v){for(var b=0;b<v.length;b++)if(m=v[b],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(b,1);break t}}m=f.createElement(u),Zt(m,u,o),f.head.appendChild(m);break;case"meta":if(v=y0("meta","content",f).get(u+(o.content||""))){for(b=0;b<v.length;b++)if(m=v[b],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(b,1);break t}}m=f.createElement(u),Zt(m,u,o),f.head.appendChild(m);break;default:throw Error(i(468,u))}m[Rt]=n,Ct(m),u=m}n.stateNode=u}else _0(f,n.type,n.stateNode);else n.stateNode=g0(f,u,n.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?_0(f,n.type,n.stateNode):g0(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Zm(n,n.memoizedProps,o.memoizedProps)}break;case 27:yn(s,n),_n(n),u&512&&(Vt||o===null||Bi(o,o.return)),o!==null&&u&4&&Zm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(yn(s,n),_n(n),u&512&&(Vt||o===null||Bi(o,o.return)),n.flags&32){f=n.stateNode;try{pn(f,"")}catch(me){Je(n,n.return,me)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,Zm(n,f,o!==null?o.memoizedProps:f)),u&1024&&(np=!0);break;case 6:if(yn(s,n),_n(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(me){Je(n,n.return,me)}}break;case 3:if(ef=null,f=hi,hi=Wh(s.containerInfo),yn(s,n),hi=f,_n(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Oo(s.containerInfo)}catch(me){Je(n,n.return,me)}np&&(np=!1,_E(n));break;case 4:u=hi,hi=Wh(n.stateNode.containerInfo),yn(s,n),_n(n),hi=u;break;case 12:yn(s,n),_n(n);break;case 31:yn(s,n),_n(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Uh(n,u)));break;case 13:yn(s,n),_n(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(zh=un()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Uh(n,u)));break;case 22:f=n.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,F=cr,J=Vt;if(cr=F||f,Vt=J||D,yn(s,n),Vt=J,cr=F,_n(n),u&8192)e:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||D||cr||Vt||ca(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){D=o=s;try{if(m=D.stateNode,f)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{b=D.stateNode;var te=D.memoizedProps.style,G=te!=null&&te.hasOwnProperty("display")?te.display:null;b.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(me){Je(D,D.return,me)}}}else if(s.tag===6){if(o===null){D=s;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(me){Je(D,D.return,me)}}}else if(s.tag===18){if(o===null){D=s;try{var $=D.stateNode;f?o0($,!0):o0(D.stateNode,!1)}catch(me){Je(D,D.return,me)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Uh(n,o))));break;case 19:yn(s,n),_n(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Uh(n,u)));break;case 30:break;case 21:break;default:yn(s,n),_n(n)}}function _n(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if(uE(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=ep(n);Lh(n,m,f);break;case 5:var v=o.stateNode;o.flags&32&&(pn(v,""),o.flags&=-33);var b=ep(n);Lh(n,b,v);break;case 3:case 4:var D=o.stateNode.containerInfo,F=ep(n);tp(n,F,D);break;default:throw Error(i(161))}}catch(J){Je(n,n.return,J)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function _E(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;_E(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function fr(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)fE(n,s.alternate,s),s=s.sibling}function ca(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Wr(4,s,s.return),ca(s);break;case 1:Bi(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&oE(s,s.return,o),ca(s);break;case 27:vu(s.stateNode);case 26:case 5:Bi(s,s.return),ca(s);break;case 22:s.memoizedState===null&&ca(s);break;case 30:ca(s);break;default:ca(s)}n=n.sibling}}function dr(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=n,m=s,v=m.flags;switch(m.tag){case 0:case 11:case 15:dr(f,m,o),uu(4,m);break;case 1:if(dr(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){Je(u,u.return,F)}if(u=m,f=u.updateQueue,f!==null){var b=u.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)$_(D[f],b)}catch(F){Je(u,u.return,F)}}o&&v&64&&aE(m),cu(m,m.return);break;case 27:cE(m);case 26:case 5:dr(f,m,o),o&&u===null&&v&4&&lE(m),cu(m,m.return);break;case 12:dr(f,m,o);break;case 31:dr(f,m,o),o&&v&4&&pE(f,m);break;case 13:dr(f,m,o),o&&v&4&&gE(f,m);break;case 22:m.memoizedState===null&&dr(f,m,o),cu(m,m.return);break;case 30:break;default:dr(f,m,o)}s=s.sibling}}function ip(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Xl(o))}function rp(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Xl(n))}function fi(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)vE(n,s,o,u),s=s.sibling}function vE(n,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:fi(n,s,o,u),f&2048&&uu(9,s);break;case 1:fi(n,s,o,u);break;case 3:fi(n,s,o,u),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Xl(n)));break;case 12:if(f&2048){fi(n,s,o,u),n=s.stateNode;try{var m=s.memoizedProps,v=m.id,b=m.onPostCommit;typeof b=="function"&&b(v,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){Je(s,s.return,D)}}else fi(n,s,o,u);break;case 31:fi(n,s,o,u);break;case 13:fi(n,s,o,u);break;case 23:break;case 22:m=s.stateNode,v=s.alternate,s.memoizedState!==null?m._visibility&2?fi(n,s,o,u):hu(n,s):m._visibility&2?fi(n,s,o,u):(m._visibility|=2,To(n,s,o,u,(s.subtreeFlags&10256)!==0||!1)),f&2048&&ip(v,s);break;case 24:fi(n,s,o,u),f&2048&&rp(s.alternate,s);break;default:fi(n,s,o,u)}}function To(n,s,o,u,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=n,v=s,b=o,D=u,F=v.flags;switch(v.tag){case 0:case 11:case 15:To(m,v,b,D,f),uu(8,v);break;case 23:break;case 22:var J=v.stateNode;v.memoizedState!==null?J._visibility&2?To(m,v,b,D,f):hu(m,v):(J._visibility|=2,To(m,v,b,D,f)),f&&F&2048&&ip(v.alternate,v);break;case 24:To(m,v,b,D,f),f&&F&2048&&rp(v.alternate,v);break;default:To(m,v,b,D,f)}s=s.sibling}}function hu(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,f=u.flags;switch(u.tag){case 22:hu(o,u),f&2048&&ip(u.alternate,u);break;case 24:hu(o,u),f&2048&&rp(u.alternate,u);break;default:hu(o,u)}s=s.sibling}}var fu=8192;function bo(n,s,o){if(n.subtreeFlags&fu)for(n=n.child;n!==null;)EE(n,s,o),n=n.sibling}function EE(n,s,o){switch(n.tag){case 26:bo(n,s,o),n.flags&fu&&n.memoizedState!==null&&nR(o,hi,n.memoizedState,n.memoizedProps);break;case 5:bo(n,s,o);break;case 3:case 4:var u=hi;hi=Wh(n.stateNode.containerInfo),bo(n,s,o),hi=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=fu,fu=16777216,bo(n,s,o),fu=u):bo(n,s,o));break;default:bo(n,s,o)}}function TE(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function du(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Kt=u,AE(u,n)}TE(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)bE(n),n=n.sibling}function bE(n){switch(n.tag){case 0:case 11:case 15:du(n),n.flags&2048&&Wr(9,n,n.return);break;case 3:du(n);break;case 12:du(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,jh(n)):du(n);break;default:du(n)}}function jh(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Kt=u,AE(u,n)}TE(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Wr(8,s,s.return),jh(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,jh(s));break;default:jh(s)}n=n.sibling}}function AE(n,s){for(;Kt!==null;){var o=Kt;switch(o.tag){case 0:case 11:case 15:Wr(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Xl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Kt=u;else e:for(o=n;Kt!==null;){u=Kt;var f=u.sibling,m=u.return;if(dE(u),u===o){Kt=null;break e}if(f!==null){f.return=m,Kt=f;break e}Kt=m}}}var y1={getCacheForType:function(n){var s=Jt(Dt),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return Jt(Dt).controller.signal}},_1=typeof WeakMap=="function"?WeakMap:Map,Ke=0,st=null,Ve=null,Pe=0,Xe=0,xn=null,Zr=!1,Ao=!1,sp=!1,mr=0,_t=0,es=0,ha=0,ap=0,Dn=0,wo=0,mu=null,vn=null,op=!1,zh=0,wE=0,Bh=1/0,qh=null,ts=null,zt=0,ns=null,So=null,pr=0,lp=0,up=null,SE=null,pu=0,cp=null;function Nn(){return(Ke&2)!==0&&Pe!==0?Pe&-Pe:W.T!==null?gp():Fc()}function IE(){if(Dn===0)if((Pe&536870912)===0||je){var n=Us;Us<<=1,(Us&3932160)===0&&(Us=262144),Dn=n}else Dn=536870912;return n=Rn.current,n!==null&&(n.flags|=32),Dn}function En(n,s,o){(n===st&&(Xe===2||Xe===9)||n.cancelPendingCommit!==null)&&(Io(n,0),is(n,Pe,Dn,!1)),js(n,o),((Ke&2)===0||n!==st)&&(n===st&&((Ke&2)===0&&(ha|=o),_t===4&&is(n,Pe,Dn,!1)),qi(n))}function RE(n,s,o){if((Ke&6)!==0)throw Error(i(327));var u=!o&&(s&127)===0&&(s&n.expiredLanes)===0||ni(n,s),f=u?T1(n,s):fp(n,s,!0),m=u;do{if(f===0){Ao&&!u&&is(n,s,0,!1);break}else{if(o=n.current.alternate,m&&!v1(o)){f=fp(n,s,!1),m=!1;continue}if(f===2){if(m=s,n.errorRecoveryDisabledLanes&m)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var b=n;f=mu;var D=b.current.memoizedState.isDehydrated;if(D&&(Io(b,v).flags|=256),v=fp(b,v,!1),v!==2){if(sp&&!D){b.errorRecoveryDisabledLanes|=m,ha|=m,f=4;break e}m=vn,vn=f,m!==null&&(vn===null?vn=m:vn.push.apply(vn,m))}f=v}if(m=!1,f!==2)continue}}if(f===1){Io(n,0),is(n,s,0,!0);break}e:{switch(u=n,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:is(u,s,Dn,!Zr);break e;case 2:vn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=zh+300-un(),10<f)){if(is(u,s,Dn,!Zr),wi(u,0,!0)!==0)break e;pr=s,u.timeoutHandle=r0(CE.bind(null,u,o,vn,qh,op,s,Dn,ha,wo,Zr,m,"Throttled",-0,0),f);break e}CE(u,o,vn,qh,op,s,Dn,ha,wo,Zr,m,null,-0,0)}}break}while(!0);qi(n)}function CE(n,s,o,u,f,m,v,b,D,F,J,te,G,$){if(n.timeoutHandle=-1,te=s.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:si},EE(s,m,te);var me=(m&62914560)===m?zh-un():(m&4194048)===m?wE-un():0;if(me=iR(te,me),me!==null){pr=m,n.cancelPendingCommit=me(kE.bind(null,n,s,m,o,u,f,v,b,D,J,te,null,G,$)),is(n,m,v,!F);return}}kE(n,s,m,o,u,f,v,b,D)}function v1(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!Sn(m(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function is(n,s,o,u){s&=~ap,s&=~ha,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var f=s;0<f;){var m=31-Tt(f),v=1<<m;u[m]=-1,f&=~v}o!==0&&zs(n,o,s)}function Fh(){return(Ke&6)===0?(gu(0),!1):!0}function hp(){if(Ve!==null){if(Xe===0)var n=Ve.return;else n=Ve,rr=na=null,Rm(n),go=null,Wl=0,n=Ve;for(;n!==null;)sE(n.alternate,n),n=n.return;Ve=null}}function Io(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,j1(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),pr=0,hp(),st=n,Ve=o=nr(n.current,null),Pe=s,Xe=0,xn=null,Zr=!1,Ao=ni(n,s),sp=!1,wo=Dn=ap=ha=es=_t=0,vn=mu=null,op=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var f=31-Tt(u),m=1<<f;s|=n[f],u&=~m}return mr=s,ch(),o}function xE(n,s){xe=null,W.H=au,s===po||s===_h?(s=G_(),Xe=3):s===pm?(s=G_(),Xe=4):Xe=s===Fm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,xn=s,Ve===null&&(_t=1,Oh(n,Fn(s,n.current)))}function DE(){var n=Rn.current;return n===null?!0:(Pe&4194048)===Pe?Qn===null:(Pe&62914560)===Pe||(Pe&536870912)!==0?n===Qn:!1}function NE(){var n=W.H;return W.H=au,n===null?au:n}function OE(){var n=W.A;return W.A=y1,n}function Hh(){_t=4,Zr||(Pe&4194048)!==Pe&&Rn.current!==null||(Ao=!0),(es&134217727)===0&&(ha&134217727)===0||st===null||is(st,Pe,Dn,!1)}function fp(n,s,o){var u=Ke;Ke|=2;var f=NE(),m=OE();(st!==n||Pe!==s)&&(qh=null,Io(n,s)),s=!1;var v=_t;e:do try{if(Xe!==0&&Ve!==null){var b=Ve,D=xn;switch(Xe){case 8:hp(),v=6;break e;case 3:case 2:case 9:case 6:Rn.current===null&&(s=!0);var F=Xe;if(Xe=0,xn=null,Ro(n,b,D,F),o&&Ao){v=0;break e}break;default:F=Xe,Xe=0,xn=null,Ro(n,b,D,F)}}E1(),v=_t;break}catch(J){xE(n,J)}while(!0);return s&&n.shellSuspendCounter++,rr=na=null,Ke=u,W.H=f,W.A=m,Ve===null&&(st=null,Pe=0,ch()),v}function E1(){for(;Ve!==null;)VE(Ve)}function T1(n,s){var o=Ke;Ke|=2;var u=NE(),f=OE();st!==n||Pe!==s?(qh=null,Bh=un()+500,Io(n,s)):Ao=ni(n,s);e:do try{if(Xe!==0&&Ve!==null){s=Ve;var m=xn;t:switch(Xe){case 1:Xe=0,xn=null,Ro(n,s,m,1);break;case 2:case 9:if(F_(m)){Xe=0,xn=null,ME(s);break}s=function(){Xe!==2&&Xe!==9||st!==n||(Xe=7),qi(n)},m.then(s,s);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:F_(m)?(Xe=0,xn=null,ME(s)):(Xe=0,xn=null,Ro(n,s,m,7));break;case 5:var v=null;switch(Ve.tag){case 26:v=Ve.memoizedState;case 5:case 27:var b=Ve;if(v?v0(v):b.stateNode.complete){Xe=0,xn=null;var D=b.sibling;if(D!==null)Ve=D;else{var F=b.return;F!==null?(Ve=F,Gh(F)):Ve=null}break t}}Xe=0,xn=null,Ro(n,s,m,5);break;case 6:Xe=0,xn=null,Ro(n,s,m,6);break;case 8:hp(),_t=6;break e;default:throw Error(i(462))}}b1();break}catch(J){xE(n,J)}while(!0);return rr=na=null,W.H=u,W.A=f,Ke=o,Ve!==null?0:(st=null,Pe=0,ch(),_t)}function b1(){for(;Ve!==null&&!qd();)VE(Ve)}function VE(n){var s=iE(n.alternate,n,mr);n.memoizedProps=n.pendingProps,s===null?Gh(n):Ve=s}function ME(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=Jv(o,s,s.pendingProps,s.type,void 0,Pe);break;case 11:s=Jv(o,s,s.pendingProps,s.type.render,s.ref,Pe);break;case 5:Rm(s);default:sE(o,s),s=Ve=O_(s,mr),s=iE(o,s,mr)}n.memoizedProps=n.pendingProps,s===null?Gh(n):Ve=s}function Ro(n,s,o,u){rr=na=null,Rm(s),go=null,Wl=0;var f=s.return;try{if(c1(n,f,s,o,Pe)){_t=1,Oh(n,Fn(o,n.current)),Ve=null;return}}catch(m){if(f!==null)throw Ve=f,m;_t=1,Oh(n,Fn(o,n.current)),Ve=null;return}s.flags&32768?(je||u===1?n=!0:Ao||(Pe&536870912)!==0?n=!1:(Zr=n=!0,(u===2||u===9||u===3||u===6)&&(u=Rn.current,u!==null&&u.tag===13&&(u.flags|=16384))),PE(s,n)):Gh(s)}function Gh(n){var s=n;do{if((s.flags&32768)!==0){PE(s,Zr);return}n=s.return;var o=d1(s.alternate,s,mr);if(o!==null){Ve=o;return}if(s=s.sibling,s!==null){Ve=s;return}Ve=s=n}while(s!==null);_t===0&&(_t=5)}function PE(n,s){do{var o=m1(n.alternate,n);if(o!==null){o.flags&=32767,Ve=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){Ve=n;return}Ve=n=o}while(n!==null);_t=6,Ve=null}function kE(n,s,o,u,f,m,v,b,D){n.cancelPendingCommit=null;do Kh();while(zt!==0);if((Ke&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=em,Gd(n,o,m,v,b,D),n===st&&(Ve=st=null,Pe=0),So=s,ns=n,pr=o,lp=m,up=f,SE=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,I1(Vr,function(){return BE(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=W.T,W.T=null,f=ce.p,ce.p=2,v=Ke,Ke|=4;try{p1(n,s,o)}finally{Ke=v,ce.p=f,W.T=u}}zt=1,LE(),UE(),jE()}}function LE(){if(zt===1){zt=0;var n=ns,s=So,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=W.T,W.T=null;var u=ce.p;ce.p=2;var f=Ke;Ke|=4;try{yE(s,n);var m=wp,v=A_(n.containerInfo),b=m.focusedElem,D=m.selectionRange;if(v!==b&&b&&b.ownerDocument&&b_(b.ownerDocument.documentElement,b)){if(D!==null&&$d(b)){var F=D.start,J=D.end;if(J===void 0&&(J=F),"selectionStart"in b)b.selectionStart=F,b.selectionEnd=Math.min(J,b.value.length);else{var te=b.ownerDocument||document,G=te&&te.defaultView||window;if(G.getSelection){var $=G.getSelection(),me=b.textContent.length,be=Math.min(D.start,me),rt=D.end===void 0?be:Math.min(D.end,me);!$.extend&&be>rt&&(v=rt,rt=be,be=v);var L=T_(b,be),V=T_(b,rt);if(L&&V&&($.rangeCount!==1||$.anchorNode!==L.node||$.anchorOffset!==L.offset||$.focusNode!==V.node||$.focusOffset!==V.offset)){var B=te.createRange();B.setStart(L.node,L.offset),$.removeAllRanges(),be>rt?($.addRange(B),$.extend(V.node,V.offset)):(B.setEnd(V.node,V.offset),$.addRange(B))}}}}for(te=[],$=b;$=$.parentNode;)$.nodeType===1&&te.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<te.length;b++){var ee=te[b];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}sf=!!Ap,wp=Ap=null}finally{Ke=f,ce.p=u,W.T=o}}n.current=s,zt=2}}function UE(){if(zt===2){zt=0;var n=ns,s=So,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=W.T,W.T=null;var u=ce.p;ce.p=2;var f=Ke;Ke|=4;try{fE(n,s.alternate,s)}finally{Ke=f,ce.p=u,W.T=o}}zt=3}}function jE(){if(zt===4||zt===3){zt=0,kc();var n=ns,s=So,o=pr,u=SE;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?zt=5:(zt=0,So=ns=null,zE(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(ts=null),Wi(o),s=s.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(ti,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=W.T,f=ce.p,ce.p=2,W.T=null;try{for(var m=n.onRecoverableError,v=0;v<u.length;v++){var b=u[v];m(b.value,{componentStack:b.stack})}}finally{W.T=s,ce.p=f}}(pr&3)!==0&&Kh(),qi(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===cp?pu++:(pu=0,cp=n):pu=0,gu(0)}}function zE(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Xl(s)))}function Kh(){return LE(),UE(),jE(),BE()}function BE(){if(zt!==5)return!1;var n=ns,s=lp;lp=0;var o=Wi(pr),u=W.T,f=ce.p;try{ce.p=32>o?32:o,W.T=null,o=up,up=null;var m=ns,v=pr;if(zt=0,So=ns=null,pr=0,(Ke&6)!==0)throw Error(i(331));var b=Ke;if(Ke|=4,bE(m.current),vE(m,m.current,v,o),Ke=b,gu(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(ti,m)}catch{}return!0}finally{ce.p=f,W.T=u,zE(n,s)}}function qE(n,s,o){s=Fn(o,s),s=qm(n.stateNode,s,2),n=$r(n,s,2),n!==null&&(js(n,2),qi(n))}function Je(n,s,o){if(n.tag===3)qE(n,n,o);else for(;s!==null;){if(s.tag===3){qE(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ts===null||!ts.has(u))){n=Fn(o,n),o=Fv(2),u=$r(s,o,2),u!==null&&(Hv(o,u,s,n),js(u,2),qi(u));break}}s=s.return}}function dp(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new _1;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(sp=!0,f.add(o),n=A1.bind(null,n,s,o),s.then(n,n))}function A1(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,st===n&&(Pe&o)===o&&(_t===4||_t===3&&(Pe&62914560)===Pe&&300>un()-zh?(Ke&2)===0&&Io(n,0):ap|=o,wo===Pe&&(wo=0)),qi(n)}function FE(n,s){s===0&&(s=qc()),n=Zs(n,s),n!==null&&(js(n,s),qi(n))}function w1(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),FE(n,o)}function S1(n,s){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),FE(n,o)}function I1(n,s){return jt(n,s)}var Qh=null,Co=null,mp=!1,Yh=!1,pp=!1,rs=0;function qi(n){n!==Co&&n.next===null&&(Co===null?Qh=Co=n:Co=Co.next=n),Yh=!0,mp||(mp=!0,C1())}function gu(n,s){if(!pp&&Yh){pp=!0;do for(var o=!1,u=Qh;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var v=u.suspendedLanes,b=u.pingedLanes;m=(1<<31-Tt(42|n)+1)-1,m&=f&~(v&~b),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,QE(u,m))}else m=Pe,m=wi(u,u===st?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||ni(u,m)||(o=!0,QE(u,m));u=u.next}while(o);pp=!1}}function R1(){HE()}function HE(){Yh=mp=!1;var n=0;rs!==0&&U1()&&(n=rs);for(var s=un(),o=null,u=Qh;u!==null;){var f=u.next,m=GE(u,s);m===0?(u.next=null,o===null?Qh=f:o.next=f,f===null&&(Co=o)):(o=u,(n!==0||(m&3)!==0)&&(Yh=!0)),u=f}zt!==0&&zt!==5||gu(n),rs!==0&&(rs=0)}function GE(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var v=31-Tt(m),b=1<<v,D=f[v];D===-1?((b&o)===0||(b&u)!==0)&&(f[v]=Hd(b,s)):D<=s&&(n.expiredLanes|=b),m&=~b}if(s=st,o=Pe,o=wi(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(Xe===2||Xe===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Or(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||ni(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&Or(u),Wi(o)){case 2:case 8:o=Il;break;case 32:o=Vr;break;case 268435456:o=Lc;break;default:o=Vr}return u=KE.bind(null,n),o=jt(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&Or(u),n.callbackPriority=2,n.callbackNode=null,2}function KE(n,s){if(zt!==0&&zt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Kh()&&n.callbackNode!==o)return null;var u=Pe;return u=wi(n,n===st?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(RE(n,u,s),GE(n,un()),n.callbackNode!=null&&n.callbackNode===o?KE.bind(null,n):null)}function QE(n,s){if(Kh())return null;RE(n,s,!0)}function C1(){z1(function(){(Ke&6)!==0?jt(Sl,R1):HE()})}function gp(){if(rs===0){var n=fo;n===0&&(n=bi,bi<<=1,(bi&261888)===0&&(bi=256)),rs=n}return rs}function YE(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ja(""+n)}function $E(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function x1(n,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var m=YE((f[Ht]||null).action),v=u.submitter;v&&(s=(s=v[Ht]||null)?YE(s.formAction):v.getAttribute("formAction"),s!==null&&(m=s,v=null));var b=new Pi("action","action",null,u,f);n.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(rs!==0){var D=v?$E(f,v):new FormData(f);km(o,{pending:!0,data:D,method:f.method,action:m},null,D)}}else typeof m=="function"&&(b.preventDefault(),D=v?$E(f,v):new FormData(f),km(o,{pending:!0,data:D,method:f.method,action:m},m,D))},currentTarget:f}]})}}for(var yp=0;yp<Zd.length;yp++){var _p=Zd[yp],D1=_p.toLowerCase(),N1=_p[0].toUpperCase()+_p.slice(1);ci(D1,"on"+N1)}ci(I_,"onAnimationEnd"),ci(R_,"onAnimationIteration"),ci(C_,"onAnimationStart"),ci("dblclick","onDoubleClick"),ci("focusin","onFocus"),ci("focusout","onBlur"),ci(QI,"onTransitionRun"),ci(YI,"onTransitionStart"),ci($I,"onTransitionCancel"),ci(x_,"onTransitionEnd"),Ni("onMouseEnter",["mouseout","mouseover"]),Ni("onMouseLeave",["mouseout","mouseover"]),Ni("onPointerEnter",["pointerout","pointerover"]),Ni("onPointerLeave",["pointerout","pointerover"]),Di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Di("onBeforeInput",["compositionend","keypress","textInput","paste"]),Di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),O1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yu));function XE(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var m=void 0;if(s)for(var v=u.length-1;0<=v;v--){var b=u[v],D=b.instance,F=b.currentTarget;if(b=b.listener,D!==m&&f.isPropagationStopped())break e;m=b,f.currentTarget=F;try{m(f)}catch(J){uh(J)}f.currentTarget=null,m=D}else for(v=0;v<u.length;v++){if(b=u[v],D=b.instance,F=b.currentTarget,b=b.listener,D!==m&&f.isPropagationStopped())break e;m=b,f.currentTarget=F;try{m(f)}catch(J){uh(J)}f.currentTarget=null,m=D}}}}function Me(n,s){var o=s[Ka];o===void 0&&(o=s[Ka]=new Set);var u=n+"__bubble";o.has(u)||(JE(s,n,2,!1),o.add(u))}function vp(n,s,o){var u=0;s&&(u|=4),JE(o,n,u,s)}var $h="_reactListening"+Math.random().toString(36).slice(2);function Ep(n){if(!n[$h]){n[$h]=!0,xl.forEach(function(o){o!=="selectionchange"&&(O1.has(o)||vp(o,!1,n),vp(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[$h]||(s[$h]=!0,vp("selectionchange",!1,s))}}function JE(n,s,o,u){switch(I0(s)){case 2:var f=aR;break;case 8:f=oR;break;default:f=Pp}o=f.bind(null,s,o,n),f=void 0,!Gs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(s,o,{capture:!0,passive:f}):n.addEventListener(s,o,!0):f!==void 0?n.addEventListener(s,o,{passive:f}):n.addEventListener(s,o,!1)}function Tp(n,s,o,u,f){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var b=u.stateNode.containerInfo;if(b===f)break;if(v===4)for(v=u.return;v!==null;){var D=v.tag;if((D===3||D===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;b!==null;){if(v=Ci(b),v===null)return;if(D=v.tag,D===5||D===6||D===26||D===27){u=m=v;continue e}b=b.parentNode}}u=u.return}jr(function(){var F=m,J=jn(o),te=[];e:{var G=D_.get(n);if(G!==void 0){var $=Pi,me=n;switch(n){case"keypress":if(Qs(o)===0)break e;case"keydown":case"keyup":$=ah;break;case"focusin":me="focus",$=$s;break;case"focusout":me="blur",$=$s;break;case"beforeblur":case"afterblur":$=$s;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=ql;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Jc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=y;break;case I_:case R_:case C_:$=Zc;break;case x_:$=w;break;case"scroll":case"scrollend":$=Bl;break;case"wheel":$=Y;break;case"copy":case"cut":case"paste":$=eh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=tr;break;case"toggle":case"beforetoggle":$=Ce}var be=(s&4)!==0,rt=!be&&(n==="scroll"||n==="scrollend"),L=be?G!==null?G+"Capture":null:G;be=[];for(var V=F,B;V!==null;){var ee=V;if(B=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||B===null||L===null||(ee=ai(V,L),ee!=null&&be.push(_u(V,ee,B))),rt)break;V=V.return}0<be.length&&(G=new $(G,me,null,o,J),te.push({event:G,listeners:be}))}}if((s&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",$=n==="mouseout"||n==="pointerout",G&&o!==Ul&&(me=o.relatedTarget||o.fromElement)&&(Ci(me)||me[Ii]))break e;if(($||G)&&(G=J.window===J?J:(G=J.ownerDocument)?G.defaultView||G.parentWindow:window,$?(me=o.relatedTarget||o.toElement,$=F,me=me?Ci(me):null,me!==null&&(rt=l(me),be=me.tag,me!==rt||be!==5&&be!==27&&be!==6)&&(me=null)):($=null,me=F),$!==me)){if(be=ql,ee="onMouseLeave",L="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(be=tr,ee="onPointerLeave",L="onPointerEnter",V="pointer"),rt=$==null?G:An($),B=me==null?G:An(me),G=new be(ee,V+"leave",$,o,J),G.target=rt,G.relatedTarget=B,ee=null,Ci(J)===F&&(be=new be(L,V+"enter",me,o,J),be.target=B,be.relatedTarget=rt,ee=be),rt=ee,$&&me)t:{for(be=V1,L=$,V=me,B=0,ee=L;ee;ee=be(ee))B++;ee=0;for(var ve=V;ve;ve=be(ve))ee++;for(;0<B-ee;)L=be(L),B--;for(;0<ee-B;)V=be(V),ee--;for(;B--;){if(L===V||V!==null&&L===V.alternate){be=L;break t}L=be(L),V=be(V)}be=null}else be=null;$!==null&&WE(te,G,$,be,!1),me!==null&&rt!==null&&WE(te,rt,me,be,!0)}}e:{if(G=F?An(F):window,$=G.nodeName&&G.nodeName.toLowerCase(),$==="select"||$==="input"&&G.type==="file")var Fe=p_;else if(d_(G))if(g_)Fe=HI;else{Fe=qI;var ge=BI}else $=G.nodeName,!$||$.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&Xa(F.elementType)&&(Fe=p_):Fe=FI;if(Fe&&(Fe=Fe(n,F))){m_(te,Fe,o,J);break e}ge&&ge(n,G,F),n==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&Pl(G,"number",G.value)}switch(ge=F?An(F):window,n){case"focusin":(d_(ge)||ge.contentEditable==="true")&&(ro=ge,Xd=F,Ql=null);break;case"focusout":Ql=Xd=ro=null;break;case"mousedown":Jd=!0;break;case"contextmenu":case"mouseup":case"dragend":Jd=!1,w_(te,o,J);break;case"selectionchange":if(KI)break;case"keydown":case"keyup":w_(te,o,J)}var Ne;if(Ge)e:{switch(n){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else io?Xs(n,o)&&(ke="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(ke="onCompositionStart");ke&&(Ui&&o.locale!=="ko"&&(io||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&io&&(Ne=zl()):(Mi=J,jl="value"in Mi?Mi.value:Mi.textContent,io=!0)),ge=Xh(F,ke),0<ge.length&&(ke=new Li(ke,n,null,o,J),te.push({event:ke,listeners:ge}),Ne?ke.data=Ne:(Ne=no(o),Ne!==null&&(ke.data=Ne)))),(Ne=Bn?LI(n,o):UI(n,o))&&(ke=Xh(F,"onBeforeInput"),0<ke.length&&(ge=new Li("onBeforeInput","beforeinput",null,o,J),te.push({event:ge,listeners:ke}),ge.data=Ne)),x1(te,n,F,o,J)}XE(te,s)})}function _u(n,s,o){return{instance:n,listener:s,currentTarget:o}}function Xh(n,s){for(var o=s+"Capture",u=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=ai(n,o),f!=null&&u.unshift(_u(n,f,m)),f=ai(n,s),f!=null&&u.push(_u(n,f,m))),n.tag===3)return u;n=n.return}return[]}function V1(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function WE(n,s,o,u,f){for(var m=s._reactName,v=[];o!==null&&o!==u;){var b=o,D=b.alternate,F=b.stateNode;if(b=b.tag,D!==null&&D===u)break;b!==5&&b!==26&&b!==27||F===null||(D=F,f?(F=ai(o,m),F!=null&&v.unshift(_u(o,F,D))):f||(F=ai(o,m),F!=null&&v.push(_u(o,F,D)))),o=o.return}v.length!==0&&n.push({event:s,listeners:v})}var M1=/\r\n?/g,P1=/\u0000|\uFFFD/g;function ZE(n){return(typeof n=="string"?n:""+n).replace(M1,`
`).replace(P1,"")}function e0(n,s){return s=ZE(s),ZE(n)===s}function it(n,s,o,u,f,m){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||pn(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&pn(n,""+u);break;case"className":wn(n,"class",u);break;case"tabIndex":wn(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":wn(n,o,u);break;case"style":Ll(n,u,m);break;case"data":if(s!=="object"){wn(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ja(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&it(n,s,"name",f.name,f,null),it(n,s,"formEncType",f.formEncType,f,null),it(n,s,"formMethod",f.formMethod,f,null),it(n,s,"formTarget",f.formTarget,f,null)):(it(n,s,"encType",f.encType,f,null),it(n,s,"method",f.method,f,null),it(n,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ja(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=si);break;case"onScroll":u!=null&&Me("scroll",n);break;case"onScrollEnd":u!=null&&Me("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Ja(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Me("beforetoggle",n),Me("toggle",n),Ya(n,"popover",u);break;case"xlinkActuate":xt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":xt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":xt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":xt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":xt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":xt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":xt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":xt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":xt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ya(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Xc.get(o)||o,Ya(n,o,u))}}function bp(n,s,o,u,f,m){switch(o){case"style":Ll(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?pn(n,u):(typeof u=="number"||typeof u=="bigint")&&pn(n,""+u);break;case"onScroll":u!=null&&Me("scroll",n);break;case"onScrollEnd":u!=null&&Me("scrollend",n);break;case"onClick":u!=null&&(n.onclick=si);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Dl.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),m=n[Ht]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(s,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,f);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Ya(n,o,u)}}}function Zt(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",n),Me("load",n);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var v=o[m];if(v!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:it(n,s,m,v,o,null)}}f&&it(n,s,"srcSet",o.srcSet,o,null),u&&it(n,s,"src",o.src,o,null);return;case"input":Me("invalid",n);var b=m=v=f=null,D=null,F=null;for(u in o)if(o.hasOwnProperty(u)){var J=o[u];if(J!=null)switch(u){case"name":f=J;break;case"type":v=J;break;case"checked":D=J;break;case"defaultChecked":F=J;break;case"value":m=J;break;case"defaultValue":b=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,s));break;default:it(n,s,u,J,o,null)}}Qc(n,m,b,D,F,v,f,!1);return;case"select":Me("invalid",n),u=v=m=null;for(f in o)if(o.hasOwnProperty(f)&&(b=o[f],b!=null))switch(f){case"value":m=b;break;case"defaultValue":v=b;break;case"multiple":u=b;default:it(n,s,f,b,o,null)}s=m,o=v,n.multiple=!!u,s!=null?Pr(n,!!u,s,!1):o!=null&&Pr(n,!!u,o,!0);return;case"textarea":Me("invalid",n),m=f=u=null;for(v in o)if(o.hasOwnProperty(v)&&(b=o[v],b!=null))switch(v){case"value":u=b;break;case"defaultValue":f=b;break;case"children":m=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:it(n,s,v,b,o,null)}kr(n,u,f,m);return;case"option":for(D in o)if(o.hasOwnProperty(D)&&(u=o[D],u!=null))switch(D){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:it(n,s,D,u,o,null)}return;case"dialog":Me("beforetoggle",n),Me("toggle",n),Me("cancel",n),Me("close",n);break;case"iframe":case"object":Me("load",n);break;case"video":case"audio":for(u=0;u<yu.length;u++)Me(yu[u],n);break;case"image":Me("error",n),Me("load",n);break;case"details":Me("toggle",n);break;case"embed":case"source":case"link":Me("error",n),Me("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in o)if(o.hasOwnProperty(F)&&(u=o[F],u!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:it(n,s,F,u,o,null)}return;default:if(Xa(s)){for(J in o)o.hasOwnProperty(J)&&(u=o[J],u!==void 0&&bp(n,s,J,u,o,void 0));return}}for(b in o)o.hasOwnProperty(b)&&(u=o[b],u!=null&&it(n,s,b,u,o,null))}function k1(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,b=null,D=null,F=null,J=null;for($ in o){var te=o[$];if(o.hasOwnProperty($)&&te!=null)switch($){case"checked":break;case"value":break;case"defaultValue":D=te;default:u.hasOwnProperty($)||it(n,s,$,null,u,te)}}for(var G in u){var $=u[G];if(te=o[G],u.hasOwnProperty(G)&&($!=null||te!=null))switch(G){case"type":m=$;break;case"name":f=$;break;case"checked":F=$;break;case"defaultChecked":J=$;break;case"value":v=$;break;case"defaultValue":b=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,s));break;default:$!==te&&it(n,s,G,$,u,te)}}$a(n,v,b,D,F,J,m,f);return;case"select":$=v=b=G=null;for(m in o)if(D=o[m],o.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":$=D;default:u.hasOwnProperty(m)||it(n,s,m,null,u,D)}for(f in u)if(m=u[f],D=o[f],u.hasOwnProperty(f)&&(m!=null||D!=null))switch(f){case"value":G=m;break;case"defaultValue":b=m;break;case"multiple":v=m;default:m!==D&&it(n,s,f,m,u,D)}s=b,o=v,u=$,G!=null?Pr(n,!!o,G,!1):!!u!=!!o&&(s!=null?Pr(n,!!o,s,!0):Pr(n,!!o,o?[]:"",!1));return;case"textarea":$=G=null;for(b in o)if(f=o[b],o.hasOwnProperty(b)&&f!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:it(n,s,b,null,u,f)}for(v in u)if(f=u[v],m=o[v],u.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":G=f;break;case"defaultValue":$=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&it(n,s,v,f,u,m)}Yc(n,G,$);return;case"option":for(var me in o)if(G=o[me],o.hasOwnProperty(me)&&G!=null&&!u.hasOwnProperty(me))switch(me){case"selected":n.selected=!1;break;default:it(n,s,me,null,u,G)}for(D in u)if(G=u[D],$=o[D],u.hasOwnProperty(D)&&G!==$&&(G!=null||$!=null))switch(D){case"selected":n.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:it(n,s,D,G,u,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in o)G=o[be],o.hasOwnProperty(be)&&G!=null&&!u.hasOwnProperty(be)&&it(n,s,be,null,u,G);for(F in u)if(G=u[F],$=o[F],u.hasOwnProperty(F)&&G!==$&&(G!=null||$!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,s));break;default:it(n,s,F,G,u,$)}return;default:if(Xa(s)){for(var rt in o)G=o[rt],o.hasOwnProperty(rt)&&G!==void 0&&!u.hasOwnProperty(rt)&&bp(n,s,rt,void 0,u,G);for(J in u)G=u[J],$=o[J],!u.hasOwnProperty(J)||G===$||G===void 0&&$===void 0||bp(n,s,J,G,u,$);return}}for(var L in o)G=o[L],o.hasOwnProperty(L)&&G!=null&&!u.hasOwnProperty(L)&&it(n,s,L,null,u,G);for(te in u)G=u[te],$=o[te],!u.hasOwnProperty(te)||G===$||G==null&&$==null||it(n,s,te,G,u,$)}function t0(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function L1(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],m=f.transferSize,v=f.initiatorType,b=f.duration;if(m&&b&&t0(v)){for(v=0,b=f.responseEnd,u+=1;u<o.length;u++){var D=o[u],F=D.startTime;if(F>b)break;var J=D.transferSize,te=D.initiatorType;J&&t0(te)&&(D=D.responseEnd,v+=J*(D<b?1:(b-F)/(D-F)))}if(--u,s+=8*(m+v)/(f.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Ap=null,wp=null;function Jh(n){return n.nodeType===9?n:n.ownerDocument}function n0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function i0(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Sp(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ip=null;function U1(){var n=window.event;return n&&n.type==="popstate"?n===Ip?!1:(Ip=n,!0):(Ip=null,!1)}var r0=typeof setTimeout=="function"?setTimeout:void 0,j1=typeof clearTimeout=="function"?clearTimeout:void 0,s0=typeof Promise=="function"?Promise:void 0,z1=typeof queueMicrotask=="function"?queueMicrotask:typeof s0<"u"?function(n){return s0.resolve(null).then(n).catch(B1)}:r0;function B1(n){setTimeout(function(){throw n})}function ss(n){return n==="head"}function a0(n,s){var o=s,u=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(f),Oo(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")vu(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,vu(o);for(var m=o.firstChild;m;){var v=m.nextSibling,b=m.nodeName;m[Ri]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=v}}else o==="body"&&vu(n.ownerDocument.body);o=f}while(o);Oo(s)}function o0(n,s){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function Rp(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Rp(o),Qa(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function q1(n,s,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Ri])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Yn(n.nextSibling),n===null)break}return null}function F1(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Yn(n.nextSibling),n===null))return null;return n}function l0(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Yn(n.nextSibling),n===null))return null;return n}function Cp(n){return n.data==="$?"||n.data==="$~"}function xp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function H1(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Yn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Dp=null;function u0(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return Yn(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function c0(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function h0(n,s,o){switch(s=Jh(o),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function vu(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Qa(n)}var $n=new Map,f0=new Set;function Wh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var gr=ce.d;ce.d={f:G1,r:K1,D:Q1,C:Y1,L:$1,m:X1,X:W1,S:J1,M:Z1};function G1(){var n=gr.f(),s=Fh();return n||s}function K1(n){var s=Un(n);s!==null&&s.tag===5&&s.type==="form"?xv(s):gr.r(n)}var xo=typeof document>"u"?null:document;function d0(n,s,o){var u=xo;if(u&&typeof s=="string"&&s){var f=mn(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),f0.has(f)||(f0.add(f),n={rel:n,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),Zt(s,"link",n),Ct(s),u.head.appendChild(s)))}}function Q1(n){gr.D(n),d0("dns-prefetch",n,null)}function Y1(n,s){gr.C(n,s),d0("preconnect",n,s)}function $1(n,s,o){gr.L(n,s,o);var u=xo;if(u&&n&&s){var f='link[rel="preload"][as="'+mn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+mn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+mn(o.imageSizes)+'"]')):f+='[href="'+mn(n)+'"]';var m=f;switch(s){case"style":m=Do(n);break;case"script":m=No(n)}$n.has(m)||(n=T({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),$n.set(m,n),u.querySelector(f)!==null||s==="style"&&u.querySelector(Eu(m))||s==="script"&&u.querySelector(Tu(m))||(s=u.createElement("link"),Zt(s,"link",n),Ct(s),u.head.appendChild(s)))}}function X1(n,s){gr.m(n,s);var o=xo;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+mn(u)+'"][href="'+mn(n)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=No(n)}if(!$n.has(m)&&(n=T({rel:"modulepreload",href:n},s),$n.set(m,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Tu(m)))return}u=o.createElement("link"),Zt(u,"link",n),Ct(u),o.head.appendChild(u)}}}function J1(n,s,o){gr.S(n,s,o);var u=xo;if(u&&n){var f=xi(u).hoistableStyles,m=Do(n);s=s||"default";var v=f.get(m);if(!v){var b={loading:0,preload:null};if(v=u.querySelector(Eu(m)))b.loading=5;else{n=T({rel:"stylesheet",href:n,"data-precedence":s},o),(o=$n.get(m))&&Np(n,o);var D=v=u.createElement("link");Ct(D),Zt(D,"link",n),D._p=new Promise(function(F,J){D.onload=F,D.onerror=J}),D.addEventListener("load",function(){b.loading|=1}),D.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Zh(v,s,u)}v={type:"stylesheet",instance:v,count:1,state:b},f.set(m,v)}}}function W1(n,s){gr.X(n,s);var o=xo;if(o&&n){var u=xi(o).hoistableScripts,f=No(n),m=u.get(f);m||(m=o.querySelector(Tu(f)),m||(n=T({src:n,async:!0},s),(s=$n.get(f))&&Op(n,s),m=o.createElement("script"),Ct(m),Zt(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function Z1(n,s){gr.M(n,s);var o=xo;if(o&&n){var u=xi(o).hoistableScripts,f=No(n),m=u.get(f);m||(m=o.querySelector(Tu(f)),m||(n=T({src:n,async:!0,type:"module"},s),(s=$n.get(f))&&Op(n,s),m=o.createElement("script"),Ct(m),Zt(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function m0(n,s,o,u){var f=(f=De.current)?Wh(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Do(o.href),o=xi(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Do(o.href);var m=xi(f).hoistableStyles,v=m.get(n);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,v),(m=f.querySelector(Eu(n)))&&!m._p&&(v.instance=m,v.state.loading=5),$n.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},$n.set(n,o),m||eR(f,n,o,v.state))),s&&u===null)throw Error(i(528,""));return v}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=No(o),o=xi(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Do(n){return'href="'+mn(n)+'"'}function Eu(n){return'link[rel="stylesheet"]['+n+"]"}function p0(n){return T({},n,{"data-precedence":n.precedence,precedence:null})}function eR(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Zt(s,"link",o),Ct(s),n.head.appendChild(s))}function No(n){return'[src="'+mn(n)+'"]'}function Tu(n){return"script[async]"+n}function g0(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+mn(o.href)+'"]');if(u)return s.instance=u,Ct(u),u;var f=T({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Ct(u),Zt(u,"style",f),Zh(u,o.precedence,n),s.instance=u;case"stylesheet":f=Do(o.href);var m=n.querySelector(Eu(f));if(m)return s.state.loading|=4,s.instance=m,Ct(m),m;u=p0(o),(f=$n.get(f))&&Np(u,f),m=(n.ownerDocument||n).createElement("link"),Ct(m);var v=m;return v._p=new Promise(function(b,D){v.onload=b,v.onerror=D}),Zt(m,"link",u),s.state.loading|=4,Zh(m,o.precedence,n),s.instance=m;case"script":return m=No(o.src),(f=n.querySelector(Tu(m)))?(s.instance=f,Ct(f),f):(u=o,(f=$n.get(m))&&(u=T({},o),Op(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),Ct(f),Zt(f,"link",u),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Zh(u,o.precedence,n));return s.instance}function Zh(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,v=0;v<u.length;v++){var b=u[v];if(b.dataset.precedence===s)m=b;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function Np(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Op(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var ef=null;function y0(n,s,o){if(ef===null){var u=new Map,f=ef=new Map;f.set(o,u)}else f=ef,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[Ri]||m[Rt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(s)||"";v=n+v;var b=u.get(v);b?b.push(m):u.set(v,[m])}}return u}function _0(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function tR(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function v0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function nR(n,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=Do(u.href),m=s.querySelector(Eu(f));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=tf.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=m,Ct(m);return}m=s.ownerDocument||s,u=p0(u),(f=$n.get(f))&&Np(u,f),m=m.createElement("link"),Ct(m);var v=m;v._p=new Promise(function(b,D){v.onload=b,v.onerror=D}),Zt(m,"link",u),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=tf.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var Vp=0;function iR(n,s){return n.stylesheets&&n.count===0&&rf(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&rf(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+s);0<n.imgBytes&&Vp===0&&(Vp=62500*L1());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&rf(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>Vp?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function tf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)rf(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var nf=null;function rf(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,nf=new Map,s.forEach(rR,n),nf=null,tf.call(n))}function rR(n,s){if(!(s.state.loading&4)){var o=nf.get(n);if(o)var u=o.get(null);else{o=new Map,nf.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),u=v)}u&&o.set(null,u)}f=s.instance,v=f.getAttribute("data-precedence"),m=o.get(v)||u,m===u&&o.set(null,f),o.set(v,f),this.count++,u=tf.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var bu={$$typeof:H,Provider:null,Consumer:null,_currentValue:Te,_currentValue2:Te,_threadCount:0};function sR(n,s,o,u,f,m,v,b,D){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Si(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Si(0),this.hiddenUpdates=Si(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function E0(n,s,o,u,f,m,v,b,D,F,J,te){return n=new sR(n,s,o,v,D,F,J,te,b),s=1,m===!0&&(s|=24),m=In(3,null,null,s),n.current=m,m.stateNode=n,s=fm(),s.refCount++,n.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:s},gm(m),n}function T0(n){return n?(n=oo,n):oo}function b0(n,s,o,u,f,m){f=T0(f),u.context===null?u.context=f:u.pendingContext=f,u=Yr(s),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=$r(n,u,s),o!==null&&(En(o,n,s),eu(o,n,s))}function A0(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function Mp(n,s){A0(n,s),(n=n.alternate)&&A0(n,s)}function w0(n){if(n.tag===13||n.tag===31){var s=Zs(n,67108864);s!==null&&En(s,n,67108864),Mp(n,67108864)}}function S0(n){if(n.tag===13||n.tag===31){var s=Nn();s=Bs(s);var o=Zs(n,s);o!==null&&En(o,n,s),Mp(n,s)}}var sf=!0;function aR(n,s,o,u){var f=W.T;W.T=null;var m=ce.p;try{ce.p=2,Pp(n,s,o,u)}finally{ce.p=m,W.T=f}}function oR(n,s,o,u){var f=W.T;W.T=null;var m=ce.p;try{ce.p=8,Pp(n,s,o,u)}finally{ce.p=m,W.T=f}}function Pp(n,s,o,u){if(sf){var f=kp(u);if(f===null)Tp(n,s,u,af,o),R0(n,u);else if(uR(f,n,s,o,u))u.stopPropagation();else if(R0(n,u),s&4&&-1<lR.indexOf(n)){for(;f!==null;){var m=Un(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Ai(m.pendingLanes);if(v!==0){var b=m;for(b.pendingLanes|=2,b.entangledLanes|=2;v;){var D=1<<31-Tt(v);b.entanglements[1]|=D,v&=~D}qi(m),(Ke&6)===0&&(Bh=un()+500,gu(0))}}break;case 31:case 13:b=Zs(m,2),b!==null&&En(b,m,2),Fh(),Mp(m,2)}if(m=kp(u),m===null&&Tp(n,s,u,af,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else Tp(n,s,u,null,o)}}function kp(n){return n=jn(n),Lp(n)}var af=null;function Lp(n){if(af=null,n=Ci(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===31){if(n=d(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return af=n,null}function I0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ls()){case Sl:return 2;case Il:return 8;case Vr:case Fd:return 32;case Lc:return 268435456;default:return 32}default:return 32}}var Up=!1,as=null,os=null,ls=null,Au=new Map,wu=new Map,us=[],lR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function R0(n,s){switch(n){case"focusin":case"focusout":as=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":ls=null;break;case"pointerover":case"pointerout":Au.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":wu.delete(s.pointerId)}}function Su(n,s,o,u,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},s!==null&&(s=Un(s),s!==null&&w0(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function uR(n,s,o,u,f){switch(s){case"focusin":return as=Su(as,n,s,o,u,f),!0;case"dragenter":return os=Su(os,n,s,o,u,f),!0;case"mouseover":return ls=Su(ls,n,s,o,u,f),!0;case"pointerover":var m=f.pointerId;return Au.set(m,Su(Au.get(m)||null,n,s,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,wu.set(m,Su(wu.get(m)||null,n,s,o,u,f)),!0}return!1}function C0(n){var s=Ci(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,ii(n.priority,function(){S0(o)});return}}else if(s===31){if(s=d(o),s!==null){n.blockedOn=s,ii(n.priority,function(){S0(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function of(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=kp(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Ul=u,o.target.dispatchEvent(u),Ul=null}else return s=Un(o),s!==null&&w0(s),n.blockedOn=o,!1;s.shift()}return!0}function x0(n,s,o){of(n)&&o.delete(s)}function cR(){Up=!1,as!==null&&of(as)&&(as=null),os!==null&&of(os)&&(os=null),ls!==null&&of(ls)&&(ls=null),Au.forEach(x0),wu.forEach(x0)}function lf(n,s){n.blockedOn===s&&(n.blockedOn=null,Up||(Up=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,cR)))}var uf=null;function D0(n){uf!==n&&(uf=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){uf===n&&(uf=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],f=n[s+2];if(typeof u!="function"){if(Lp(u||o)===null)continue;break}var m=Un(o);m!==null&&(n.splice(s,3),s-=3,km(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Oo(n){function s(D){return lf(D,n)}as!==null&&lf(as,n),os!==null&&lf(os,n),ls!==null&&lf(ls,n),Au.forEach(s),wu.forEach(s);for(var o=0;o<us.length;o++){var u=us[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<us.length&&(o=us[0],o.blockedOn===null);)C0(o),o.blockedOn===null&&us.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],v=f[Ht]||null;if(typeof m=="function")v||D0(o);else if(v){var b=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[Ht]||null)b=v.formAction;else if(Lp(f)!==null)continue}else b=v.action;typeof b=="function"?o[u+1]=b:(o.splice(u,3),u-=3),D0(o)}}}function N0(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function jp(n){this._internalRoot=n}cf.prototype.render=jp.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=Nn();b0(o,u,n,s,null,null)},cf.prototype.unmount=jp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;b0(n.current,2,null,n,null,null),Fh(),s[Ii]=null}};function cf(n){this._internalRoot=n}cf.prototype.unstable_scheduleHydration=function(n){if(n){var s=Fc();n={blockedOn:null,target:n,priority:s};for(var o=0;o<us.length&&s!==0&&s<us[o].priority;o++);us.splice(o,0,n),o===0&&C0(n)}};var O0=e.version;if(O0!=="19.2.3")throw Error(i(527,O0,"19.2.3"));ce.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=g(s),n=n!==null?_(n):null,n=n===null?null:n.stateNode,n};var hR={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hf.isDisabled&&hf.supportsFiber)try{ti=hf.inject(hR),Yt=hf}catch{}}return Ru.createRoot=function(n,s){if(!a(n))throw Error(i(299));var o=!1,u="",f=jv,m=zv,v=Bv;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=E0(n,1,!1,null,null,o,u,null,f,m,v,N0),n[Ii]=s.current,Ep(n),new jp(s)},Ru.hydrateRoot=function(n,s,o){if(!a(n))throw Error(i(299));var u=!1,f="",m=jv,v=zv,b=Bv,D=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError),o.formState!==void 0&&(D=o.formState)),s=E0(n,1,!0,s,o??null,u,f,D,m,v,b,N0),s.context=T0(null),o=s.current,u=Nn(),u=Bs(u),f=Yr(u),f.callback=null,$r(o,f,u),o=u,s.current.lanes=o,js(s,o),qi(s),n[Ii]=s.current,Ep(n),new cf(s)},Ru.version="19.2.3",Ru}var q0;function TR(){if(q0)return qp.exports;q0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),qp.exports=ER(),qp.exports}var bR=TR();const AR=Wb(bR),wR="modulepreload",SR=function(r){return"/"+r},F0={},yi=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){let c=function(g){return Promise.all(g.map(_=>Promise.resolve(_).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));a=c(t.map(g=>{if(g=SR(g),g in F0)return;F0[g]=!0;const _=g.endsWith(".css"),T=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${T}`))return;const A=document.createElement("link");if(A.rel=_?"stylesheet":wR,_||(A.as="script"),A.crossOrigin="",A.href=g,p&&A.setAttribute("nonce",p),document.head.appendChild(A),_)return new Promise((O,z)=>{A.addEventListener("load",O),A.addEventListener("error",()=>z(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return a.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})};/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var H0="popstate";function IR(r={}){function e(a,l){let{pathname:c="/",search:d="",hash:p=""}=ja(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),cg("",{pathname:c,search:d,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let c=a.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let p=a.location.href,g=p.indexOf("#");d=g===-1?p:p.slice(0,g)}return d+"#"+(typeof l=="string"?l:Ju(l))}function i(a,l){Mn(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return CR(e,t,i,r)}function dt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Mn(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function RR(){return Math.random().toString(36).substring(2,10)}function G0(r,e){return{usr:r.state,key:r.key,idx:e}}function cg(r,e,t=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?ja(e):e,state:t,key:e&&e.key||i||RR()}}function Ju({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function ja(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substring(i),r=r.substring(0,i)),r&&(e.pathname=r)}return e}function CR(r,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,d="POP",p=null,g=_();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function _(){return(c.state||{idx:null}).idx}function T(){d="POP";let q=_(),Z=q==null?null:q-g;g=q,p&&p({action:d,location:Q.location,delta:Z})}function A(q,Z){d="PUSH";let ie=cg(Q.location,q,Z);t&&t(ie,q),g=_()+1;let H=G0(ie,g),ae=Q.createHref(ie);try{c.pushState(H,"",ae)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;a.location.assign(ae)}l&&p&&p({action:d,location:Q.location,delta:1})}function O(q,Z){d="REPLACE";let ie=cg(Q.location,q,Z);t&&t(ie,q),g=_();let H=G0(ie,g),ae=Q.createHref(ie);c.replaceState(H,"",ae),l&&p&&p({action:d,location:Q.location,delta:0})}function z(q){return xR(q)}let Q={get action(){return d},get location(){return r(a,c)},listen(q){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(H0,T),p=q,()=>{a.removeEventListener(H0,T),p=null}},createHref(q){return e(a,q)},createURL:z,encodeLocation(q){let Z=z(q);return{pathname:Z.pathname,search:Z.search,hash:Z.hash}},push:A,replace:O,go(q){return c.go(q)}};return Q}function xR(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),dt(t,"No window.location.(origin|href) available to create URL");let i=typeof r=="string"?r:Ju(r);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function Zb(r,e,t="/"){return DR(r,e,t,!1)}function DR(r,e,t,i){let a=typeof e=="string"?ja(e):e,l=br(a.pathname||"/",t);if(l==null)return null;let c=eA(r);NR(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let g=qR(l);d=zR(c[p],g,i)}return d}function eA(r,e=[],t=[],i="",a=!1){let l=(c,d,p=a,g)=>{let _={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(i)&&p)return;dt(_.relativePath.startsWith(i),`Absolute route path "${_.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(i.length)}let T=Er([i,_.relativePath]),A=t.concat(_);c.children&&c.children.length>0&&(dt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),eA(c.children,e,A,T,p)),!(c.path==null&&!c.index)&&e.push({path:T,score:UR(T,c.index),routesMeta:A})};return r.forEach((c,d)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))l(c,d);else for(let g of tA(c.path))l(c,d,!0,g)}),e}function tA(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=tA(i.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),a&&d.push(...c),d.map(p=>r.startsWith("/")&&p===""?"/":p)}function NR(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:jR(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var OR=/^:[\w-]+$/,VR=3,MR=2,PR=1,kR=10,LR=-2,K0=r=>r==="*";function UR(r,e){let t=r.split("/"),i=t.length;return t.some(K0)&&(i+=LR),e&&(i+=MR),t.filter(a=>!K0(a)).reduce((a,l)=>a+(OR.test(l)?VR:l===""?PR:kR),i)}function jR(r,e){return r.length===e.length&&r.slice(0,-1).every((i,a)=>i===e[a])?r[r.length-1]-e[e.length-1]:0}function zR(r,e,t=!1){let{routesMeta:i}=r,a={},l="/",c=[];for(let d=0;d<i.length;++d){let p=i[d],g=d===i.length-1,_=l==="/"?e:e.slice(l.length)||"/",T=zf({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},_),A=p.route;if(!T&&g&&t&&!i[i.length-1].route.index&&(T=zf({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!T)return null;Object.assign(a,T.params),c.push({params:a,pathname:Er([l,T.pathname]),pathnameBase:KR(Er([l,T.pathnameBase])),route:A}),T.pathnameBase!=="/"&&(l=Er([l,T.pathnameBase]))}return c}function zf(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=BR(r.path,r.caseSensitive,r.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:i.reduce((g,{paramName:_,isOptional:T},A)=>{if(_==="*"){let z=d[A]||"";c=l.slice(0,l.length-z.length).replace(/(.)\/+$/,"$1")}const O=d[A];return T&&!O?g[_]=void 0:g[_]=(O||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:r}}function BR(r,e=!1,t=!0){Mn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(i.push({paramName:"*"}),a+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":r!==""&&r!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function qR(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Mn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function br(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}var nA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,FR=r=>nA.test(r);function HR(r,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof r=="string"?ja(r):r,l;if(t)if(FR(t))l=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Mn(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?l=Q0(t.substring(1),"/"):l=Q0(t,e)}else l=e;return{pathname:l,search:QR(i),hash:YR(a)}}function Q0(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Kp(r,e,t,i){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function GR(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Yg(r){let e=GR(r);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function $g(r,e,t,i=!1){let a;typeof r=="string"?a=ja(r):(a={...r},dt(!a.pathname||!a.pathname.includes("?"),Kp("?","pathname","search",a)),dt(!a.pathname||!a.pathname.includes("#"),Kp("#","pathname","hash",a)),dt(!a.search||!a.search.includes("#"),Kp("#","search","hash",a)));let l=r===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let T=e.length-1;if(!i&&c.startsWith("..")){let A=c.split("/");for(;A[0]==="..";)A.shift(),T-=1;a.pathname=A.join("/")}d=T>=0?e[T]:"/"}let p=HR(a,d),g=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||_)&&(p.pathname+="/"),p}var Er=r=>r.join("/").replace(/\/\/+/g,"/"),KR=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),QR=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,YR=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,$R=class{constructor(r,e,t,i=!1){this.status=r,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function XR(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function JR(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var iA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function rA(r,e){let t=r;if(typeof t!="string"||!nA.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,a=!1;if(iA)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),d=br(c.pathname,e);c.origin===l.origin&&d!=null?t=d+c.search+c.hash:a=!0}catch{Mn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:a,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var sA=["POST","PUT","PATCH","DELETE"];new Set(sA);var WR=["GET",...sA];new Set(WR);var dl=K.createContext(null);dl.displayName="DataRouter";var dd=K.createContext(null);dd.displayName="DataRouterState";var ZR=K.createContext(!1),aA=K.createContext({isTransitioning:!1});aA.displayName="ViewTransition";var eC=K.createContext(new Map);eC.displayName="Fetchers";var tC=K.createContext(null);tC.displayName="Await";var kn=K.createContext(null);kn.displayName="Navigation";var fc=K.createContext(null);fc.displayName="Location";var _i=K.createContext({outlet:null,matches:[],isDataRoute:!1});_i.displayName="Route";var Xg=K.createContext(null);Xg.displayName="RouteError";var oA="REACT_ROUTER_ERROR",nC="REDIRECT",iC="ROUTE_ERROR_RESPONSE";function rC(r){if(r.startsWith(`${oA}:${nC}:{`))try{let e=JSON.parse(r.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function sC(r){if(r.startsWith(`${oA}:${iC}:{`))try{let e=JSON.parse(r.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new $R(e.status,e.statusText,e.data)}catch{}}function aC(r,{relative:e}={}){dt(ml(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=K.useContext(kn),{hash:a,pathname:l,search:c}=dc(r,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Er([t,l])),i.createHref({pathname:d,search:c,hash:a})}function ml(){return K.useContext(fc)!=null}function Ns(){return dt(ml(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(fc).location}var lA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uA(r){K.useContext(kn).static||K.useLayoutEffect(r)}function md(){let{isDataRoute:r}=K.useContext(_i);return r?vC():oC()}function oC(){dt(ml(),"useNavigate() may be used only in the context of a <Router> component.");let r=K.useContext(dl),{basename:e,navigator:t}=K.useContext(kn),{matches:i}=K.useContext(_i),{pathname:a}=Ns(),l=JSON.stringify(Yg(i)),c=K.useRef(!1);return uA(()=>{c.current=!0}),K.useCallback((p,g={})=>{if(Mn(c.current,lA),!c.current)return;if(typeof p=="number"){t.go(p);return}let _=$g(p,JSON.parse(l),a,g.relative==="path");r==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Er([e,_.pathname])),(g.replace?t.replace:t.push)(_,g.state,g)},[e,t,l,a,r])}K.createContext(null);function Tk(){let{matches:r}=K.useContext(_i),e=r[r.length-1];return e?e.params:{}}function dc(r,{relative:e}={}){let{matches:t}=K.useContext(_i),{pathname:i}=Ns(),a=JSON.stringify(Yg(t));return K.useMemo(()=>$g(r,JSON.parse(a),i,e==="path"),[r,a,i,e])}function lC(r,e){return cA(r,e)}function cA(r,e,t,i,a){var ie;dt(ml(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=K.useContext(kn),{matches:c}=K.useContext(_i),d=c[c.length-1],p=d?d.params:{},g=d?d.pathname:"/",_=d?d.pathnameBase:"/",T=d&&d.route;{let H=T&&T.path||"";fA(g,!T||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let A=Ns(),O;if(e){let H=typeof e=="string"?ja(e):e;dt(_==="/"||((ie=H.pathname)==null?void 0:ie.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${H.pathname}" was given in the \`location\` prop.`),O=H}else O=A;let z=O.pathname||"/",Q=z;if(_!=="/"){let H=_.replace(/^\//,"").split("/");Q="/"+z.replace(/^\//,"").split("/").slice(H.length).join("/")}let q=Zb(r,{pathname:Q});Mn(T||q!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),Mn(q==null||q[q.length-1].route.element!==void 0||q[q.length-1].route.Component!==void 0||q[q.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Z=dC(q&&q.map(H=>Object.assign({},H,{params:Object.assign({},p,H.params),pathname:Er([_,l.encodeLocation?l.encodeLocation(H.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?_:Er([_,l.encodeLocation?l.encodeLocation(H.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathnameBase])})),c,t,i,a);return e&&Z?K.createElement(fc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},Z):Z}function uC(){let r=_C(),e=XR(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",r),c=K.createElement(K.Fragment,null,K.createElement("p",null," Hey developer "),K.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",K.createElement("code",{style:l},"ErrorBoundary")," or"," ",K.createElement("code",{style:l},"errorElement")," prop on your route.")),K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:a},t):null,c)}var cC=K.createElement(uC,null),hA=class extends K.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const t=sC(r.digest);t&&(r=t)}let e=r!==void 0?K.createElement(_i.Provider,{value:this.props.routeContext},K.createElement(Xg.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?K.createElement(hC,{error:r},e):e}};hA.contextType=ZR;var Qp=new WeakMap;function hC({children:r,error:e}){let{basename:t}=K.useContext(kn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=rC(e.digest);if(i){let a=Qp.get(e);if(a)throw a;let l=rA(i.location,t);if(iA&&!Qp.get(e))if(l.isExternal||i.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:i.replace}));throw Qp.set(e,c),c}return K.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return r}function fC({routeContext:r,match:e,children:t}){let i=K.useContext(dl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),K.createElement(_i.Provider,{value:r},t)}function dC(r,e=[],t=null,i=null,a=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let l=r,c=t==null?void 0:t.errors;if(c!=null){let _=l.findIndex(T=>T.route.id&&(c==null?void 0:c[T.route.id])!==void 0);dt(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,_+1))}let d=!1,p=-1;if(t)for(let _=0;_<l.length;_++){let T=l[_];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(p=_),T.route.id){let{loaderData:A,errors:O}=t,z=T.route.loader&&!A.hasOwnProperty(T.route.id)&&(!O||O[T.route.id]===void 0);if(T.route.lazy||z){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let g=t&&i?(_,T)=>{var A,O;i(_,{location:t.location,params:((O=(A=t.matches)==null?void 0:A[0])==null?void 0:O.params)??{},unstable_pattern:JR(t.matches),errorInfo:T})}:void 0;return l.reduceRight((_,T,A)=>{let O,z=!1,Q=null,q=null;t&&(O=c&&T.route.id?c[T.route.id]:void 0,Q=T.route.errorElement||cC,d&&(p<0&&A===0?(fA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),z=!0,q=null):p===A&&(z=!0,q=T.route.hydrateFallbackElement||null)));let Z=e.concat(l.slice(0,A+1)),ie=()=>{let H;return O?H=Q:z?H=q:T.route.Component?H=K.createElement(T.route.Component,null):T.route.element?H=T.route.element:H=_,K.createElement(fC,{match:T,routeContext:{outlet:_,matches:Z,isDataRoute:t!=null},children:H})};return t&&(T.route.ErrorBoundary||T.route.errorElement||A===0)?K.createElement(hA,{location:t.location,revalidation:t.revalidation,component:Q,error:O,children:ie(),routeContext:{outlet:null,matches:Z,isDataRoute:!0},onError:g}):ie()},null)}function Jg(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mC(r){let e=K.useContext(dl);return dt(e,Jg(r)),e}function pC(r){let e=K.useContext(dd);return dt(e,Jg(r)),e}function gC(r){let e=K.useContext(_i);return dt(e,Jg(r)),e}function Wg(r){let e=gC(r),t=e.matches[e.matches.length-1];return dt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function yC(){return Wg("useRouteId")}function _C(){var i;let r=K.useContext(Xg),e=pC("useRouteError"),t=Wg("useRouteError");return r!==void 0?r:(i=e.errors)==null?void 0:i[t]}function vC(){let{router:r}=mC("useNavigate"),e=Wg("useNavigate"),t=K.useRef(!1);return uA(()=>{t.current=!0}),K.useCallback(async(a,l={})=>{Mn(t.current,lA),t.current&&(typeof a=="number"?await r.navigate(a):await r.navigate(a,{fromRouteId:e,...l}))},[r,e])}var Y0={};function fA(r,e,t){!e&&!Y0[r]&&(Y0[r]=!0,Mn(!1,t))}K.memo(EC);function EC({routes:r,future:e,state:t,onError:i}){return cA(r,void 0,t,i,e)}function ff({to:r,replace:e,state:t,relative:i}){dt(ml(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=K.useContext(kn);Mn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=K.useContext(_i),{pathname:c}=Ns(),d=md(),p=$g(r,Yg(l),c,i==="path"),g=JSON.stringify(p);return K.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:i})},[d,g,i,e,t]),null}function Tn(r){dt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function TC({basename:r="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1,unstable_useTransitions:c}){dt(!ml(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=r.replace(/^\/*/,"/"),p=K.useMemo(()=>({basename:d,navigator:a,static:l,unstable_useTransitions:c,future:{}}),[d,a,l,c]);typeof t=="string"&&(t=ja(t));let{pathname:g="/",search:_="",hash:T="",state:A=null,key:O="default"}=t,z=K.useMemo(()=>{let Q=br(g,d);return Q==null?null:{location:{pathname:Q,search:_,hash:T,state:A,key:O},navigationType:i}},[d,g,_,T,A,O,i]);return Mn(z!=null,`<Router basename="${d}"> is not able to match the URL "${g}${_}${T}" because it does not start with the basename, so the <Router> won't render anything.`),z==null?null:K.createElement(kn.Provider,{value:p},K.createElement(fc.Provider,{children:e,value:z}))}function bC({children:r,location:e}){return lC(hg(r),e)}function hg(r,e=[]){let t=[];return K.Children.forEach(r,(i,a)=>{if(!K.isValidElement(i))return;let l=[...e,a];if(i.type===K.Fragment){t.push.apply(t,hg(i.props.children,l));return}dt(i.type===Tn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),dt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=hg(i.props.children,l)),t.push(c)}),t}var bf="get",Af="application/x-www-form-urlencoded";function pd(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function AC(r){return pd(r)&&r.tagName.toLowerCase()==="button"}function wC(r){return pd(r)&&r.tagName.toLowerCase()==="form"}function SC(r){return pd(r)&&r.tagName.toLowerCase()==="input"}function IC(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function RC(r,e){return r.button===0&&(!e||e==="_self")&&!IC(r)}var df=null;function CC(){if(df===null)try{new FormData(document.createElement("form"),0),df=!1}catch{df=!0}return df}var xC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Yp(r){return r!=null&&!xC.has(r)?(Mn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Af}"`),null):r}function DC(r,e){let t,i,a,l,c;if(wC(r)){let d=r.getAttribute("action");i=d?br(d,e):null,t=r.getAttribute("method")||bf,a=Yp(r.getAttribute("enctype"))||Af,l=new FormData(r)}else if(AC(r)||SC(r)&&(r.type==="submit"||r.type==="image")){let d=r.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||d.getAttribute("action");if(i=p?br(p,e):null,t=r.getAttribute("formmethod")||d.getAttribute("method")||bf,a=Yp(r.getAttribute("formenctype"))||Yp(d.getAttribute("enctype"))||Af,l=new FormData(d,r),!CC()){let{name:g,type:_,value:T}=r;if(_==="image"){let A=g?`${g}.`:"";l.append(`${A}x`,"0"),l.append(`${A}y`,"0")}else g&&l.append(g,T)}}else{if(pd(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=bf,i=null,a=Af,c=r}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Zg(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function NC(r,e,t){let i=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&br(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function OC(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function VC(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function MC(r,e,t){let i=await Promise.all(r.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await OC(l,t);return c.links?c.links():[]}return[]}));return UC(i.flat(1).filter(VC).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function $0(r,e,t,i,a,l){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>{var _;return t[g].pathname!==p.pathname||((_=t[g].route.path)==null?void 0:_.endsWith("*"))&&t[g].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,g)=>c(p,g)||d(p,g)):l==="data"?e.filter((p,g)=>{var T;let _=i.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(c(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let A=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((T=t[0])==null?void 0:T.params)||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function PC(r,e,{includeHydrateFallback:t}={}){return kC(r.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function kC(r){return[...new Set(r)]}function LC(r){let e={},t=Object.keys(r).sort();for(let i of t)e[i]=r[i];return e}function UC(r,e){let t=new Set;return new Set(e),r.reduce((i,a)=>{let l=JSON.stringify(LC(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}function dA(){let r=K.useContext(dl);return Zg(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function jC(){let r=K.useContext(dd);return Zg(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var ey=K.createContext(void 0);ey.displayName="FrameworkContext";function mA(){let r=K.useContext(ey);return Zg(r,"You must render this element inside a <HydratedRouter> element"),r}function zC(r,e){let t=K.useContext(ey),[i,a]=K.useState(!1),[l,c]=K.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:_,onTouchStart:T}=e,A=K.useRef(null);K.useEffect(()=>{if(r==="render"&&c(!0),r==="viewport"){let Q=Z=>{Z.forEach(ie=>{c(ie.isIntersecting)})},q=new IntersectionObserver(Q,{threshold:.5});return A.current&&q.observe(A.current),()=>{q.disconnect()}}},[r]),K.useEffect(()=>{if(i){let Q=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(Q)}}},[i]);let O=()=>{a(!0)},z=()=>{a(!1),c(!1)};return t?r!=="intent"?[l,A,{}]:[l,A,{onFocus:Cu(d,O),onBlur:Cu(p,z),onMouseEnter:Cu(g,O),onMouseLeave:Cu(_,z),onTouchStart:Cu(T,O)}]:[!1,A,{}]}function Cu(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function BC({page:r,...e}){let{router:t}=dA(),i=K.useMemo(()=>Zb(t.routes,r,t.basename),[t.routes,r,t.basename]);return i?K.createElement(FC,{page:r,matches:i,...e}):null}function qC(r){let{manifest:e,routeModules:t}=mA(),[i,a]=K.useState([]);return K.useEffect(()=>{let l=!1;return MC(r,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[r,e,t]),i}function FC({page:r,matches:e,...t}){let i=Ns(),{manifest:a,routeModules:l}=mA(),{basename:c}=dA(),{loaderData:d,matches:p}=jC(),g=K.useMemo(()=>$0(r,e,p,a,i,"data"),[r,e,p,a,i]),_=K.useMemo(()=>$0(r,e,p,a,i,"assets"),[r,e,p,a,i]),T=K.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let z=new Set,Q=!1;if(e.forEach(Z=>{var H;let ie=a.routes[Z.route.id];!ie||!ie.hasLoader||(!g.some(ae=>ae.route.id===Z.route.id)&&Z.route.id in d&&((H=l[Z.route.id])!=null&&H.shouldRevalidate)||ie.hasClientLoader?Q=!0:z.add(Z.route.id))}),z.size===0)return[];let q=NC(r,c,"data");return Q&&z.size>0&&q.searchParams.set("_routes",e.filter(Z=>z.has(Z.route.id)).map(Z=>Z.route.id).join(",")),[q.pathname+q.search]},[c,d,i,a,g,e,r,l]),A=K.useMemo(()=>PC(_,a),[_,a]),O=qC(_);return K.createElement(K.Fragment,null,T.map(z=>K.createElement("link",{key:z,rel:"prefetch",as:"fetch",href:z,...t})),A.map(z=>K.createElement("link",{key:z,rel:"modulepreload",href:z,...t})),O.map(({key:z,link:Q})=>K.createElement("link",{key:z,nonce:t.nonce,...Q})))}function HC(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var GC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{GC&&(window.__reactRouterVersion="7.11.0")}catch{}function KC({basename:r,children:e,unstable_useTransitions:t,window:i}){let a=K.useRef();a.current==null&&(a.current=IR({window:i,v5Compat:!0}));let l=a.current,[c,d]=K.useState({action:l.action,location:l.location}),p=K.useCallback(g=>{t===!1?d(g):K.startTransition(()=>d(g))},[t]);return K.useLayoutEffect(()=>l.listen(p),[l,p]),K.createElement(TC,{basename:r,children:e,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:t})}var pA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gd=K.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:d,target:p,to:g,preventScrollReset:_,viewTransition:T,unstable_defaultShouldRevalidate:A,...O},z){let{basename:Q,unstable_useTransitions:q}=K.useContext(kn),Z=typeof g=="string"&&pA.test(g),ie=rA(g,Q);g=ie.to;let H=aC(g,{relative:a}),[ae,fe,le]=zC(i,O),R=XC(g,{replace:c,state:d,target:p,preventScrollReset:_,relative:a,viewTransition:T,unstable_defaultShouldRevalidate:A,unstable_useTransitions:q});function I(P){e&&e(P),P.defaultPrevented||R(P)}let C=K.createElement("a",{...O,...le,href:ie.absoluteURL||H,onClick:ie.isExternal||l?e:I,ref:HC(z,fe),target:p,"data-discover":!Z&&t==="render"?"true":void 0});return ae&&!Z?K.createElement(K.Fragment,null,C,K.createElement(BC,{page:H})):C});gd.displayName="Link";var QC=K.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:d,children:p,...g},_){let T=dc(c,{relative:g.relative}),A=Ns(),O=K.useContext(dd),{navigator:z,basename:Q}=K.useContext(kn),q=O!=null&&tx(T)&&d===!0,Z=z.encodeLocation?z.encodeLocation(T).pathname:T.pathname,ie=A.pathname,H=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;t||(ie=ie.toLowerCase(),H=H?H.toLowerCase():null,Z=Z.toLowerCase()),H&&Q&&(H=br(H,Q)||H);const ae=Z!=="/"&&Z.endsWith("/")?Z.length-1:Z.length;let fe=ie===Z||!a&&ie.startsWith(Z)&&ie.charAt(ae)==="/",le=H!=null&&(H===Z||!a&&H.startsWith(Z)&&H.charAt(Z.length)==="/"),R={isActive:fe,isPending:le,isTransitioning:q},I=fe?e:void 0,C;typeof i=="function"?C=i(R):C=[i,fe?"active":null,le?"pending":null,q?"transitioning":null].filter(Boolean).join(" ");let P=typeof l=="function"?l(R):l;return K.createElement(gd,{...g,"aria-current":I,className:C,ref:_,style:P,to:c,viewTransition:d},typeof p=="function"?p(R):p)});QC.displayName="NavLink";var YC=K.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:c=bf,action:d,onSubmit:p,relative:g,preventScrollReset:_,viewTransition:T,unstable_defaultShouldRevalidate:A,...O},z)=>{let{unstable_useTransitions:Q}=K.useContext(kn),q=ZC(),Z=ex(d,{relative:g}),ie=c.toLowerCase()==="get"?"get":"post",H=typeof d=="string"&&pA.test(d),ae=fe=>{if(p&&p(fe),fe.defaultPrevented)return;fe.preventDefault();let le=fe.nativeEvent.submitter,R=(le==null?void 0:le.getAttribute("formmethod"))||c,I=()=>q(le||fe.currentTarget,{fetcherKey:e,method:R,navigate:t,replace:a,state:l,relative:g,preventScrollReset:_,viewTransition:T,unstable_defaultShouldRevalidate:A});Q&&t!==!1?K.startTransition(()=>I()):I()};return K.createElement("form",{ref:z,method:ie,action:Z,onSubmit:i?p:ae,...O,"data-discover":!H&&r==="render"?"true":void 0})});YC.displayName="Form";function $C(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gA(r){let e=K.useContext(dl);return dt(e,$C(r)),e}function XC(r,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:p}={}){let g=md(),_=Ns(),T=dc(r,{relative:l});return K.useCallback(A=>{if(RC(A,e)){A.preventDefault();let O=t!==void 0?t:Ju(_)===Ju(T),z=()=>g(r,{replace:O,state:i,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d});p?K.startTransition(()=>z()):z()}},[_,g,T,t,i,e,r,a,l,c,d,p])}var JC=0,WC=()=>`__${String(++JC)}__`;function ZC(){let{router:r}=gA("useSubmit"),{basename:e}=K.useContext(kn),t=yC(),i=r.fetch,a=r.navigate;return K.useCallback(async(l,c={})=>{let{action:d,method:p,encType:g,formData:_,body:T}=DC(l,e);if(c.navigate===!1){let A=c.fetcherKey||WC();await i(A,t,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:_,body:T,formMethod:c.method||p,formEncType:c.encType||g,flushSync:c.flushSync})}else await a(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:_,body:T,formMethod:c.method||p,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,a,e,t])}function ex(r,{relative:e}={}){let{basename:t}=K.useContext(kn),i=K.useContext(_i);dt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...dc(r||".",{relative:e})},c=Ns();if(r==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(_=>_==="")){d.delete("index"),p.filter(T=>T).forEach(T=>d.append("index",T));let _=d.toString();l.search=_?`?${_}`:""}}return(!r||r===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Er([t,l.pathname])),Ju(l)}function tx(r,{relative:e}={}){let t=K.useContext(aA);dt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=gA("useViewTransitionState"),a=dc(r,{relative:e});if(!t.isTransitioning)return!1;let l=br(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=br(t.nextLocation.pathname,i)||t.nextLocation.pathname;return zf(a.pathname,c)!=null||zf(a.pathname,l)!=null}const nx=()=>{};var X0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let a=r.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},ix=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const a=r[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[t++],c=r[t++],d=r[t++],p=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],c=r[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},_A={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<r.length;a+=3){const l=r[a],c=a+1<r.length,d=c?r[a+1]:0,p=a+2<r.length,g=p?r[a+2]:0,_=l>>2,T=(l&3)<<4|d>>4;let A=(d&15)<<2|g>>6,O=g&63;p||(O=64,c||(A=64)),i.push(t[_],t[T],t[A],t[O])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(yA(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):ix(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<r.length;){const l=t[r.charAt(a++)],d=a<r.length?t[r.charAt(a)]:0;++a;const g=a<r.length?t[r.charAt(a)]:64;++a;const T=a<r.length?t[r.charAt(a)]:64;if(++a,l==null||d==null||g==null||T==null)throw new rx;const A=l<<2|d>>4;if(i.push(A),g!==64){const O=d<<4&240|g>>2;if(i.push(O),T!==64){const z=g<<6&192|T;i.push(z)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class rx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sx=function(r){const e=yA(r);return _A.encodeByteArray(e,!0)},Bf=function(r){return sx(r).replace(/\./g,"")},vA=function(r){try{return _A.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=()=>EA().__FIREBASE_DEFAULTS__,ox=()=>{if(typeof process>"u"||typeof X0>"u")return;const r=X0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},lx=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&vA(r[1]);return e&&JSON.parse(e)},yd=()=>{try{return nx()||ax()||ox()||lx()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},TA=r=>{var e,t;return(t=(e=yd())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},ux=r=>{const e=TA(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},bA=()=>{var r;return(r=yd())==null?void 0:r.config},AA=r=>{var e;return(e=yd())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function wA(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Bf(JSON.stringify(t)),Bf(JSON.stringify(c)),""].join(".")}const Bu={};function fx(){const r={prod:[],emulator:[]};for(const e of Object.keys(Bu))Bu[e]?r.emulator.push(e):r.prod.push(e);return r}function dx(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let J0=!1;function SA(r,e){if(typeof window>"u"||typeof document>"u"||!pl(window.location.host)||Bu[r]===e||Bu[r]||J0)return;Bu[r]=e;function t(A){return`__firebase__banner__${A}`}const i="__firebase__banner",l=fx().prod.length>0;function c(){const A=document.getElementById(i);A&&A.remove()}function d(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function p(A,O){A.setAttribute("width","24"),A.setAttribute("id",O),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function g(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{J0=!0,c()},A}function _(A,O){A.setAttribute("id",O),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function T(){const A=dx(i),O=t("text"),z=document.getElementById(O)||document.createElement("span"),Q=t("learnmore"),q=document.getElementById(Q)||document.createElement("a"),Z=t("preprendIcon"),ie=document.getElementById(Z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const H=A.element;d(H),_(q,Q);const ae=g();p(ie,Z),H.append(ie,z,q,ae),document.body.appendChild(H)}l?(z.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function IA(){var e;const r=(e=yd())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function px(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gx(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function yx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _x(){const r=qt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function RA(){return!IA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function CA(){return!IA()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function xA(){try{return typeof indexedDB=="object"}catch{return!1}}function vx(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="FirebaseError";class Rr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Ex,Object.setPrototypeOf(this,Rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mc.prototype.create)}}class mc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?Tx(l,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Rr(a,d,i)}}function Tx(r,e){return r.replace(bx,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const bx=/\{\$([^}]+)}/g;function Ax(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ia(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=r[a],c=e[a];if(W0(l)&&W0(c)){if(!Ia(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function W0(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Mu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Pu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function wx(r,e){const t=new Sx(r,e);return t.subscribe.bind(t)}class Sx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Ix(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=$p),a.error===void 0&&(a.error=$p),a.complete===void 0&&(a.complete=$p);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ix(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function $p(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(r){return r&&r._delegate?r._delegate:r}class Ra{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new cx;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xx(e))try{this.getOrInitializeService({instanceIdentifier:da})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=da){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=da){return this.instances.has(e)}getOptions(e=da){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Cx(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=da){return this.component?this.component.multipleInstances?e:da:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Cx(r){return r===da?void 0:r}function xx(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Rx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Le||(Le={}));const Nx={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},Ox=Le.INFO,Vx={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},Mx=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),a=Vx[e];if(a)console[a](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ty{constructor(e){this.name=e,this._logLevel=Ox,this._logHandler=Mx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Nx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const Px=(r,e)=>e.some(t=>r instanceof t);let Z0,eT;function kx(){return Z0||(Z0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Lx(){return eT||(eT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const DA=new WeakMap,fg=new WeakMap,NA=new WeakMap,Xp=new WeakMap,ny=new WeakMap;function Ux(r){const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",c)},l=()=>{t(Ts(r.result)),a()},c=()=>{i(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&DA.set(t,r)}).catch(()=>{}),ny.set(e,r),e}function jx(r){if(fg.has(r))return;const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",c),r.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",c),r.addEventListener("abort",c)});fg.set(r,e)}let dg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return fg.get(r);if(e==="objectStoreNames")return r.objectStoreNames||NA.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ts(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function zx(r){dg=r(dg)}function Bx(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Jp(this),e,...t);return NA.set(i,e.sort?e.sort():[e]),Ts(i)}:Lx().includes(r)?function(...e){return r.apply(Jp(this),e),Ts(DA.get(this))}:function(...e){return Ts(r.apply(Jp(this),e))}}function qx(r){return typeof r=="function"?Bx(r):(r instanceof IDBTransaction&&jx(r),Px(r,kx())?new Proxy(r,dg):r)}function Ts(r){if(r instanceof IDBRequest)return Ux(r);if(Xp.has(r))return Xp.get(r);const e=qx(r);return e!==r&&(Xp.set(r,e),ny.set(e,r)),e}const Jp=r=>ny.get(r);function Fx(r,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(r,e),d=Ts(c);return i&&c.addEventListener("upgradeneeded",p=>{i(Ts(c.result),p.oldVersion,p.newVersion,Ts(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const Hx=["get","getKey","getAll","getAllKeys","count"],Gx=["put","add","delete","clear"],Wp=new Map;function tT(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Wp.get(e))return Wp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=Gx.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||Hx.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,a?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&p.done]))[0]};return Wp.set(e,l),l}zx(r=>({...r,get:(e,t,i)=>tT(e,t)||r.get(e,t,i),has:(e,t)=>!!tT(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Qx(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Qx(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mg="@firebase/app",nT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar=new ty("@firebase/app"),Yx="@firebase/app-compat",$x="@firebase/analytics-compat",Xx="@firebase/analytics",Jx="@firebase/app-check-compat",Wx="@firebase/app-check",Zx="@firebase/auth",eD="@firebase/auth-compat",tD="@firebase/database",nD="@firebase/data-connect",iD="@firebase/database-compat",rD="@firebase/functions",sD="@firebase/functions-compat",aD="@firebase/installations",oD="@firebase/installations-compat",lD="@firebase/messaging",uD="@firebase/messaging-compat",cD="@firebase/performance",hD="@firebase/performance-compat",fD="@firebase/remote-config",dD="@firebase/remote-config-compat",mD="@firebase/storage",pD="@firebase/storage-compat",gD="@firebase/firestore",yD="@firebase/ai",_D="@firebase/firestore-compat",vD="firebase",ED="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="[DEFAULT]",TD={[mg]:"fire-core",[Yx]:"fire-core-compat",[Xx]:"fire-analytics",[$x]:"fire-analytics-compat",[Wx]:"fire-app-check",[Jx]:"fire-app-check-compat",[Zx]:"fire-auth",[eD]:"fire-auth-compat",[tD]:"fire-rtdb",[nD]:"fire-data-connect",[iD]:"fire-rtdb-compat",[rD]:"fire-fn",[sD]:"fire-fn-compat",[aD]:"fire-iid",[oD]:"fire-iid-compat",[lD]:"fire-fcm",[uD]:"fire-fcm-compat",[cD]:"fire-perf",[hD]:"fire-perf-compat",[fD]:"fire-rc",[dD]:"fire-rc-compat",[mD]:"fire-gcs",[pD]:"fire-gcs-compat",[gD]:"fire-fst",[_D]:"fire-fst-compat",[yD]:"fire-vertex","fire-js":"fire-js",[vD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=new Map,gg=new Map,yg=new Map;function iT(r,e){try{r.container.addComponent(e)}catch(t){Ar.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Xo(r){const e=r.name;if(yg.has(e))return Ar.debug(`There were multiple attempts to register component ${e}.`),!1;yg.set(e,r);for(const t of $o.values())iT(t,r);for(const t of gg.values())iT(t,r);return!0}function iy(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Xn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bs=new mc("app","Firebase",bD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ra("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=ED;function ry(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:pg,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw bs.create("bad-app-name",{appName:String(a)});if(t||(t=bA()),!t)throw bs.create("no-options");const l=$o.get(a);if(l){if(Ia(t,l.options)&&Ia(i,l.config))return l;throw bs.create("duplicate-app",{appName:a})}const c=new Dx(a);for(const p of yg.values())c.addComponent(p);const d=new AD(t,i,c);return $o.set(a,d),d}function OA(r=pg){const e=$o.get(r);if(!e&&r===pg&&bA())return ry();if(!e)throw bs.create("no-app",{appName:r});return e}async function wD(r){let e=!1;const t=r.name;$o.has(t)?(e=!0,$o.delete(t)):gg.has(t)&&r.decRefCount()<=0&&(gg.delete(t),e=!0),e&&(await Promise.all(r.container.getProviders().map(i=>i.delete())),r.isDeleted=!0)}function As(r,e,t){let i=TD[r]??r;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ar.warn(c.join(" "));return}Xo(new Ra(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD="firebase-heartbeat-database",ID=1,Wu="firebase-heartbeat-store";let Zp=null;function VA(){return Zp||(Zp=Fx(SD,ID,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Wu)}catch(t){console.warn(t)}}}}).catch(r=>{throw bs.create("idb-open",{originalErrorMessage:r.message})})),Zp}async function RD(r){try{const t=(await VA()).transaction(Wu),i=await t.objectStore(Wu).get(MA(r));return await t.done,i}catch(e){if(e instanceof Rr)Ar.warn(e.message);else{const t=bs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ar.warn(t.message)}}}async function rT(r,e){try{const i=(await VA()).transaction(Wu,"readwrite");await i.objectStore(Wu).put(e,MA(r)),await i.done}catch(t){if(t instanceof Rr)Ar.warn(t.message);else{const i=bs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ar.warn(i.message)}}}function MA(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=1024,xD=30;class DD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new OD(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=sT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>xD){const c=VD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ar.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=sT(),{heartbeatsToSend:i,unsentEntries:a}=ND(this._heartbeatsCache.heartbeats),l=Bf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ar.warn(t),""}}}function sT(){return new Date().toISOString().substring(0,10)}function ND(r,e=CD){const t=[];let i=r.slice();for(const a of r){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),aT(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),aT(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class OD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xA()?vx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await RD(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return rT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return rT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function aT(r){return Bf(JSON.stringify({version:2,heartbeats:r})).length}function VD(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(r){Xo(new Ra("platform-logger",e=>new Kx(e),"PRIVATE")),Xo(new Ra("heartbeat",e=>new DD(e),"PRIVATE")),As(mg,nT,r),As(mg,nT,"esm2020"),As("fire-js","")}MD("");var PD="firebase",kD="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */As(PD,kD,"app");function PA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LD=PA,kA=new mc("auth","Firebase",PA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf=new ty("@firebase/auth");function UD(r,...e){qf.logLevel<=Le.WARN&&qf.warn(`Auth (${gl}): ${r}`,...e)}function wf(r,...e){qf.logLevel<=Le.ERROR&&qf.error(`Auth (${gl}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(r,...e){throw sy(r,...e)}function Ki(r,...e){return sy(r,...e)}function LA(r,e,t){const i={...LD(),[e]:t};return new mc("auth","Firebase",i).create(e,{appName:r.name})}function Tr(r){return LA(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sy(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return kA.create(r,...e)}function Ae(r,e,...t){if(!r)throw sy(e,...t)}function yr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw wf(e),new Error(e)}function wr(r,e){r||yr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function jD(){return oT()==="http:"||oT()==="https:"}function oT(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jD()||gx()||"connection"in navigator)?navigator.onLine:!0}function BD(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,t){this.shortDelay=e,this.longDelay=t,wr(t>e,"Short delay should be less than long delay!"),this.isMobile=mx()||yx()}get(){return zD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(r,e){wr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HD=new gc(3e4,6e4);function Cr(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function vi(r,e,t,i,a={}){return jA(r,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=pc({key:r.config.apiKey,...c}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g={method:e,headers:p,...l};return px()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&pl(r.emulatorConfig.host)&&(g.credentials="include"),UA.fetch()(await zA(r,r.config.apiHost,t,d),g)})}async function jA(r,e,t){r._canInitEmulator=!1;const i={...qD,...e};try{const a=new KD(r),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw mf(r,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw mf(r,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw mf(r,"email-already-in-use",c);if(p==="USER_DISABLED")throw mf(r,"user-disabled",c);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw LA(r,_,g);pi(r,_)}}catch(a){if(a instanceof Rr)throw a;pi(r,"network-request-failed",{message:String(a)})}}async function yc(r,e,t,i,a={}){const l=await vi(r,e,t,i,a);return"mfaPendingCredential"in l&&pi(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function zA(r,e,t,i){const a=`${e}${t}?${i}`,l=r,c=l.config.emulator?ay(r.config,a):`${r.config.apiScheme}://${a}`;return FD.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function GD(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class KD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ki(this.auth,"network-request-failed")),HD.get())})}}function mf(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=Ki(r,e,i);return a.customData._tokenResponse=t,a}function lT(r){return r!==void 0&&r.enterprise!==void 0}class QD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return GD(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function YD(r,e){return vi(r,"GET","/v2/recaptchaConfig",Cr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $D(r,e){return vi(r,"POST","/v1/accounts:delete",e)}async function Ff(r,e){return vi(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XD(r,e=!1){const t=mt(r),i=await t.getIdToken(e),a=oy(i);Ae(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:i,authTime:qu(eg(a.auth_time)),issuedAtTime:qu(eg(a.iat)),expirationTime:qu(eg(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function eg(r){return Number(r)*1e3}function oy(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return wf("JWT malformed, contained fewer than 3 sections"),null;try{const a=vA(t);return a?JSON.parse(a):(wf("Failed to decode base64 JWT payload"),null)}catch(a){return wf("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function uT(r){const e=oy(r);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ca(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Rr&&JD(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function JD({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qu(this.lastLoginAt),this.creationTime=qu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hf(r){var T;const e=r.auth,t=await r.getIdToken(),i=await Ca(r,Ff(e,{idToken:t}));Ae(i==null?void 0:i.users.length,e,"internal-error");const a=i.users[0];r._notifyReloadListener(a);const l=(T=a.providerUserInfo)!=null&&T.length?BA(a.providerUserInfo):[],c=eN(r.providerData,l),d=r.isAnonymous,p=!(r.email&&a.passwordHash)&&!(c!=null&&c.length),g=d?p:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new vg(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(r,_)}async function ZD(r){const e=mt(r);await Hf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eN(r,e){return[...r.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function BA(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(r,e){const t=await jA(r,{},async()=>{const i=pc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=r.config,c=await zA(r,a,"/v1/token",`key=${l}`),d=await r._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return r.emulatorConfig&&pl(r.emulatorConfig.host)&&(p.credentials="include"),UA.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function nN(r,e){return vi(r,"POST","/v2/accounts:revokeToken",Cr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):uT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const t=uT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await tN(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,c=new Go;return i&&(Ae(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(Ae(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Ae(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Go,this.toJSON())}_performRefresh(){return yr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(r,e){Ae(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class mi{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new WD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new vg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Ca(this,this.stsTokenManager.getToken(this.auth,e));return Ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return XD(this,e)}reload(){return ZD(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new mi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Hf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xn(this.auth.app))return Promise.reject(Tr(this.auth));const e=await this.getIdToken();return await Ca(this,$D(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:T,emailVerified:A,isAnonymous:O,providerData:z,stsTokenManager:Q}=t;Ae(T&&Q,e,"internal-error");const q=Go.fromJSON(this.name,Q);Ae(typeof T=="string",e,"internal-error"),hs(i,e.name),hs(a,e.name),Ae(typeof A=="boolean",e,"internal-error"),Ae(typeof O=="boolean",e,"internal-error"),hs(l,e.name),hs(c,e.name),hs(d,e.name),hs(p,e.name),hs(g,e.name),hs(_,e.name);const Z=new mi({uid:T,auth:e,email:a,emailVerified:A,displayName:i,isAnonymous:O,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:q,createdAt:g,lastLoginAt:_});return z&&Array.isArray(z)&&(Z.providerData=z.map(ie=>({...ie}))),p&&(Z._redirectEventId=p),Z}static async _fromIdTokenResponse(e,t,i=!1){const a=new Go;a.updateFromServerResponse(t);const l=new mi({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await Hf(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Ae(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?BA(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),d=new Go;d.updateFromIdToken(i);const p=new mi({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new vg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=new Map;function _r(r){wr(r instanceof Function,"Expected a class definition");let e=cT.get(r);return e?(wr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,cT.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}qA.type="NONE";const hT=qA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(r,e,t){return`firebase:${r}:${e}:${t}`}class Ko{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=Sf(this.userKey,a.apiKey,l),this.fullPersistenceKey=Sf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ff(this.auth,{idToken:e}).catch(()=>{});return t?mi._fromGetAccountInfoResponse(this.auth,t,e):null}return mi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ko(_r(hT),e,i);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||_r(hT);const c=Sf(i,e.config.apiKey,e.name);let d=null;for(const g of t)try{const _=await g._get(c);if(_){let T;if(typeof _=="string"){const A=await Ff(e,{idToken:_}).catch(()=>{});if(!A)break;T=await mi._fromGetAccountInfoResponse(e,A,_)}else T=mi._fromJSON(e,_);g!==l&&(d=T),l=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Ko(l,e,i):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Ko(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(KA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YA(e))return"Blackberry";if($A(e))return"Webos";if(HA(e))return"Safari";if((e.includes("chrome/")||GA(e))&&!e.includes("edge/"))return"Chrome";if(QA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function FA(r=qt()){return/firefox\//i.test(r)}function HA(r=qt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GA(r=qt()){return/crios\//i.test(r)}function KA(r=qt()){return/iemobile/i.test(r)}function QA(r=qt()){return/android/i.test(r)}function YA(r=qt()){return/blackberry/i.test(r)}function $A(r=qt()){return/webos/i.test(r)}function ly(r=qt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function iN(r=qt()){var e;return ly(r)&&!!((e=window.navigator)!=null&&e.standalone)}function rN(){return _x()&&document.documentMode===10}function XA(r=qt()){return ly(r)||QA(r)||$A(r)||YA(r)||/windows phone/i.test(r)||KA(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(r,e=[]){let t;switch(r){case"Browser":t=fT(qt());break;case"Worker":t=`${fT(qt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${gl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aN(r,e={}){return vi(r,"GET","/v2/passwordPolicy",Cr(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=6;class lN{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??oN,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dT(this),this.idTokenSubscription=new dT(this),this.beforeStateQueue=new sN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_r(t)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await Ko.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ff(this,{idToken:e}),i=await mi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Xn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(i=p.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Hf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xn(this.app))return Promise.reject(Tr(this));const t=e?mt(e):null;return t&&Ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xn(this.app)?Promise.reject(Tr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xn(this.app)?Promise.reject(Tr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_r(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aN(this),t=new lN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new mc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await nN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_r(e)||this._popupRedirectResolver;Ae(t,this,"argument-error"),this.redirectPersistenceManager=await Ko.create(this,[_r(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,a);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=JA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&UD(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Os(r){return mt(r)}class dT{constructor(e){this.auth=e,this.observer=null,this.addObserver=wx(t=>this.observer=t)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _d={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cN(r){_d=r}function WA(r){return _d.loadJS(r)}function hN(){return _d.recaptchaEnterpriseScript}function fN(){return _d.gapiScript}function dN(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class mN{constructor(){this.enterprise=new pN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class pN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const gN="recaptcha-enterprise",ZA="NO_RECAPTCHA";class yN{constructor(e){this.type=gN,this.auth=Os(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{YD(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new QD(p);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(p=>{d(p)})})}function a(l,c,d){const p=window.grecaptcha;lT(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(ZA)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new mN().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(d=>{if(!t&&lT(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=hN();p.length!==0&&(p+=d),WA(p).then(()=>{a(d,l,c)}).catch(g=>{c(g)})}}).catch(d=>{c(d)})})}}async function mT(r,e,t,i=!1,a=!1){const l=new yN(r);let c;if(a)c=ZA;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Gf(r,e,t,i,a){var l;if((l=r._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await mT(r,e,t,t==="getOobCode");return i(r,c)}else return i(r,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await mT(r,e,t,t==="getOobCode");return i(r,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(r,e){const t=iy(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Ia(l,e??{}))return a;pi(a,"already-initialized")}return t.initialize({options:e})}function vN(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(_r);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function EN(r,e,t){const i=Os(r);Ae(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=ew(e),{host:c,port:d}=TN(e),p=d===null?"":`:${d}`,g={url:`${l}//${c}${p}/`},_=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Ae(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ae(Ia(g,i.config.emulator)&&Ia(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,pl(c)?(wA(`${l}//${c}${p}`),SA("Auth",!0)):bN()}function ew(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function TN(r){const e=ew(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:pT(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:pT(c)}}}function pT(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function bN(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return yr("not implemented")}_getIdTokenResponse(e){return yr("not implemented")}_linkToIdToken(e,t){return yr("not implemented")}_getReauthenticationResolver(e){return yr("not implemented")}}async function AN(r,e){return vi(r,"POST","/v1/accounts:update",e)}async function wN(r,e){return vi(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(r,e){return yc(r,"POST","/v1/accounts:signInWithPassword",Cr(r,e))}async function IN(r,e){return vi(r,"POST","/v1/accounts:sendOobCode",Cr(r,e))}async function RN(r,e){return IN(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CN(r,e){return yc(r,"POST","/v1/accounts:signInWithEmailLink",Cr(r,e))}async function xN(r,e){return yc(r,"POST","/v1/accounts:signInWithEmailLink",Cr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu extends uy{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Zu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Zu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gf(e,t,"signInWithPassword",SN);case"emailLink":return CN(e,{email:this._email,oobCode:this._password});default:pi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gf(e,i,"signUpPassword",wN);case"emailLink":return xN(e,{idToken:t,email:this._email,oobCode:this._password});default:pi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qo(r,e){return yc(r,"POST","/v1/accounts:signInWithIdp",Cr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN="http://localhost";class xa extends uy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):pi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const c=new xa(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Qo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Qo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qo(e,t)}buildRequest(){const e={requestUri:DN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ON(r){const e=Mu(Pu(r)).link,t=e?Mu(Pu(e)).deep_link_id:null,i=Mu(Pu(r)).deep_link_id;return(i?Mu(Pu(i)).link:null)||i||t||e||r}class cy{constructor(e){const t=Mu(Pu(e)),i=t.apiKey??null,a=t.oobCode??null,l=NN(t.mode??null);Ae(i&&a&&l,"argument-error"),this.apiKey=i,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=ON(e);try{return new cy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(){this.providerId=yl.PROVIDER_ID}static credential(e,t){return Zu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=cy.parseLink(t);return Ae(i,"argument-error"),Zu._fromEmailAndCode(e,i.code,i.tenantId)}}yl.PROVIDER_ID="password";yl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";yl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends tw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends _c{constructor(){super("facebook.com")}static credential(e){return xa._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ps.credential(e.oauthAccessToken)}catch{return null}}}ps.FACEBOOK_SIGN_IN_METHOD="facebook.com";ps.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends _c{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xa._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return gs.credential(t,i)}catch{return null}}}gs.GOOGLE_SIGN_IN_METHOD="google.com";gs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends _c{constructor(){super("github.com")}static credential(e){return xa._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ys.credential(e.oauthAccessToken)}catch{return null}}}ys.GITHUB_SIGN_IN_METHOD="github.com";ys.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends _c{constructor(){super("twitter.com")}static credential(e,t){return xa._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return _s.credential(t,i)}catch{return null}}}_s.TWITTER_SIGN_IN_METHOD="twitter.com";_s.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(r,e){return yc(r,"POST","/v1/accounts:signUp",Cr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await mi._fromIdTokenResponse(e,i,a),c=gT(i);return new Da({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=gT(i);return new Da({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function gT(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf extends Rr{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Kf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new Kf(e,t,i,a)}}function nw(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Kf._fromErrorAndOperation(r,l,e,i):l})}async function MN(r,e,t=!1){const i=await Ca(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Da._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PN(r,e,t=!1){const{auth:i}=r;if(Xn(i.app))return Promise.reject(Tr(i));const a="reauthenticate";try{const l=await Ca(r,nw(i,a,e,r),t);Ae(l.idToken,i,"internal-error");const c=oy(l.idToken);Ae(c,i,"internal-error");const{sub:d}=c;return Ae(r.uid===d,i,"user-mismatch"),Da._forOperation(r,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&pi(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iw(r,e,t=!1){if(Xn(r.app))return Promise.reject(Tr(r));const i="signIn",a=await nw(r,i,e),l=await Da._fromIdTokenResponse(r,i,a);return t||await r._updateCurrentUser(l.user),l}async function kN(r,e){return iw(Os(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rw(r){const e=Os(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function LN(r,e,t){const i=Os(r);await Gf(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",RN)}async function UN(r,e,t){if(Xn(r.app))return Promise.reject(Tr(r));const i=Os(r),c=await Gf(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VN).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&rw(r),p}),d=await Da._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(d.user),d}function jN(r,e,t){return Xn(r.app)?Promise.reject(Tr(r)):kN(mt(r),yl.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&rw(r),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(r,e){return vi(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bk(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=mt(r),l={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await Ca(i,zN(i.auth,l));i.displayName=c.displayName||null,i.photoURL=c.photoUrl||null;const d=i.providerData.find(({providerId:p})=>p==="password");d&&(d.displayName=i.displayName,d.photoURL=i.photoURL),await i._updateTokensIfNecessary(c)}function Ak(r,e){return BN(mt(r),null,e)}async function BN(r,e,t){const{auth:i}=r,l={idToken:await r.getIdToken(),returnSecureToken:!0};t&&(l.password=t);const c=await Ca(r,AN(i,l));await r._updateTokensIfNecessary(c,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(r,e){return mt(r).setPersistence(e)}function FN(r,e,t,i){return mt(r).onIdTokenChanged(e,t,i)}function HN(r,e,t){return mt(r).beforeAuthStateChanged(e,t)}function GN(r,e,t,i){return mt(r).onAuthStateChanged(e,t,i)}function sw(r){return mt(r).signOut()}const Qf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Qf,"1"),this.storage.removeItem(Qf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=1e3,QN=10;class ow extends aw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=XA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);rN()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,QN):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},KN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ow.type="LOCAL";const lw=ow;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw extends aw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}uw.type="SESSION";const cw=uw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new vd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),p=await YN(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const g=hy("",20);a.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(T){const A=T;if(A.data.eventId===g)switch(A.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(A.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(){return window}function XN(r){Qi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(){return typeof Qi().WorkerGlobalScope<"u"&&typeof Qi().importScripts=="function"}async function JN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function WN(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function ZN(){return hw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="firebaseLocalStorageDb",e2=1,Yf="firebaseLocalStorage",dw="fbase_key";class vc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ed(r,e){return r.transaction([Yf],e?"readwrite":"readonly").objectStore(Yf)}function t2(){const r=indexedDB.deleteDatabase(fw);return new vc(r).toPromise()}function Eg(){const r=indexedDB.open(fw,e2);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Yf,{keyPath:dw})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Yf)?e(i):(i.close(),await t2(),e(await Eg()))})})}async function yT(r,e,t){const i=Ed(r,!0).put({[dw]:e,value:t});return new vc(i).toPromise()}async function n2(r,e){const t=Ed(r,!1).get(e),i=await new vc(t).toPromise();return i===void 0?null:i.value}function _T(r,e){const t=Ed(r,!0).delete(e);return new vc(t).toPromise()}const i2=800,r2=3;class mw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Eg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>r2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vd._getInstance(ZN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await JN(),!this.activeServiceWorker)return;this.sender=new $N(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||WN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Eg();return await yT(e,Qf,"1"),await _T(e,Qf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>yT(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>n2(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>_T(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Ed(a,!1).getAll();return new vc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),i2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mw.type="LOCAL";const s2=mw;new gc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(r,e){return e?_r(e):(Ae(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy extends uy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Qo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Qo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function o2(r){return iw(r.auth,new fy(r),r.bypassAuthState)}function l2(r){const{auth:e,user:t}=r;return Ae(t,e,"internal-error"),PN(t,new fy(r),r.bypassAuthState)}async function u2(r){const{auth:e,user:t}=r;return Ae(t,e,"internal-error"),MN(t,new fy(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return o2;case"linkViaPopup":case"linkViaRedirect":return u2;case"reauthViaPopup":case"reauthViaRedirect":return l2;default:pi(this.auth,"internal-error")}}resolve(e){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=new gc(2e3,1e4);class Ho extends pw{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,Ho.currentPopupAction&&Ho.currentPopupAction.cancel(),Ho.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){wr(this.filter.length===1,"Popup operations only handle one event");const e=hy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ki(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ki(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ho.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ki(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,c2.get())};e()}}Ho.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2="pendingRedirect",If=new Map;class f2 extends pw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=If.get(this.auth._key());if(!e){try{const i=await d2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}If.set(this.auth._key(),e)}return this.bypassAuthState||If.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function d2(r,e){const t=g2(e),i=p2(r);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function m2(r,e){If.set(r._key(),e)}function p2(r){return _r(r._redirectPersistence)}function g2(r){return Sf(h2,r.config.apiKey,r.name)}async function y2(r,e,t=!1){if(Xn(r.app))return Promise.reject(Tr(r));const i=Os(r),a=a2(i,e),c=await new f2(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=600*1e3;class v2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!E2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!gw(e)){const a=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Ki(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_2&&this.cachedEventUids.clear(),this.cachedEventUids.has(vT(e))}saveEventToCache(e){this.cachedEventUids.add(vT(e)),this.lastProcessedEventTime=Date.now()}}function vT(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function gw({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function E2(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gw(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T2(r,e={}){return vi(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,A2=/^https?/;async function w2(r){if(r.config.emulator)return;const{authorizedDomains:e}=await T2(r);for(const t of e)try{if(S2(t))return}catch{}pi(r,"unauthorized-domain")}function S2(r){const e=_g(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!A2.test(t))return!1;if(b2.test(r))return i===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=new gc(3e4,6e4);function ET(){const r=Qi().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function R2(r){return new Promise((e,t)=>{var a,l,c;function i(){ET(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ET(),t(Ki(r,"network-request-failed"))},timeout:I2.get()})}if((l=(a=Qi().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Qi().gapi)!=null&&c.load)i();else{const d=dN("iframefcb");return Qi()[d]=()=>{gapi.load?i():t(Ki(r,"network-request-failed"))},WA(`${fN()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Rf=null,e})}let Rf=null;function C2(r){return Rf=Rf||R2(r),Rf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=new gc(5e3,15e3),D2="__/auth/iframe",N2="emulator/auth/iframe",O2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},V2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function M2(r){const e=r.config;Ae(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?ay(e,N2):`https://${r.config.authDomain}/${D2}`,i={apiKey:e.apiKey,appName:r.name,v:gl},a=V2.get(r.config.apiHost);a&&(i.eid=a);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${pc(i).slice(1)}`}async function P2(r){const e=await C2(r),t=Qi().gapi;return Ae(t,r,"internal-error"),e.open({where:document.body,url:M2(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:O2,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=Ki(r,"network-request-failed"),d=Qi().setTimeout(()=>{l(c)},x2.get());function p(){Qi().clearTimeout(d),a(i)}i.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},L2=500,U2=600,j2="_blank",z2="http://localhost";class TT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function B2(r,e,t,i=L2,a=U2){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p={...k2,width:i.toString(),height:a.toString(),top:l,left:c},g=qt().toLowerCase();t&&(d=GA(g)?j2:t),FA(g)&&(e=e||z2,p.scrollbars="yes");const _=Object.entries(p).reduce((A,[O,z])=>`${A}${O}=${z},`,"");if(iN(g)&&d!=="_self")return q2(e||"",d),new TT(null);const T=window.open(e||"",d,_);Ae(T,r,"popup-blocked");try{T.focus()}catch{}return new TT(T)}function q2(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2="__/auth/handler",H2="emulator/auth/handler",G2=encodeURIComponent("fac");async function bT(r,e,t,i,a,l){Ae(r.config.authDomain,r,"auth-domain-config-required"),Ae(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:gl,eventId:a};if(e instanceof tw){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",Ax(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))c[_]=T}if(e instanceof _c){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(c.scopes=_.join(","))}r.tenantId&&(c.tid=r.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await r._getAppCheckToken(),g=p?`#${G2}=${encodeURIComponent(p)}`:"";return`${K2(r)}?${pc(d).slice(1)}${g}`}function K2({config:r}){return r.emulator?ay(r,H2):`https://${r.authDomain}/${F2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="webStorageSupport";class Q2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cw,this._completeRedirectFn=y2,this._overrideRedirectResult=m2}async _openPopup(e,t,i,a){var c;wr((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await bT(e,t,i,_g(),a);return B2(e,l,hy())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await bT(e,t,i,_g(),a);return XN(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(wr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await P2(e),i=new v2(e);return t.register("authEvent",a=>(Ae(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(tg,{type:tg},a=>{var c;const l=(c=a==null?void 0:a[0])==null?void 0:c[tg];l!==void 0&&t(!!l),pi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=w2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return XA()||HA()||ly()}}const Y2=Q2;var AT="@firebase/auth",wT="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function J2(r){Xo(new Ra("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;Ae(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:d,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JA(r)},g=new uN(i,a,l,p);return vN(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Xo(new Ra("auth-internal",e=>{const t=Os(e.getProvider("auth").getImmediate());return(i=>new $2(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),As(AT,wT,X2(r)),As(AT,wT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=300,Z2=AA("authIdTokenMaxAge")||W2;let ST=null;const eO=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Z2)return;const a=t==null?void 0:t.token;ST!==a&&(ST=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function yw(r=OA()){const e=iy(r,"auth");if(e.isInitialized())return e.getImmediate();const t=_N(r,{popupRedirectResolver:Y2,persistence:[s2,lw,cw]}),i=AA("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=eO(l.toString());HN(t,c,()=>c(t.currentUser)),FN(t,d=>c(d))}}const a=TA("auth");return a&&EN(t,`http://${a}`),t}function tO(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}cN({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=a=>{const l=Ki("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",tO().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});J2("Browser");var IT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ws,_w;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function C(){}C.prototype=I.prototype,R.F=I.prototype,R.prototype=new C,R.prototype.constructor=R,R.D=function(P,N,k){for(var x=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)x[lt-2]=arguments[lt];return I.prototype[N].apply(P,x)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(R,I,C){C||(C=0);const P=Array(16);if(typeof I=="string")for(var N=0;N<16;++N)P[N]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(N=0;N<16;++N)P[N]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=R.g[0],C=R.g[1],N=R.g[2];let k=R.g[3],x;x=I+(k^C&(N^k))+P[0]+3614090360&4294967295,I=C+(x<<7&4294967295|x>>>25),x=k+(N^I&(C^N))+P[1]+3905402710&4294967295,k=I+(x<<12&4294967295|x>>>20),x=N+(C^k&(I^C))+P[2]+606105819&4294967295,N=k+(x<<17&4294967295|x>>>15),x=C+(I^N&(k^I))+P[3]+3250441966&4294967295,C=N+(x<<22&4294967295|x>>>10),x=I+(k^C&(N^k))+P[4]+4118548399&4294967295,I=C+(x<<7&4294967295|x>>>25),x=k+(N^I&(C^N))+P[5]+1200080426&4294967295,k=I+(x<<12&4294967295|x>>>20),x=N+(C^k&(I^C))+P[6]+2821735955&4294967295,N=k+(x<<17&4294967295|x>>>15),x=C+(I^N&(k^I))+P[7]+4249261313&4294967295,C=N+(x<<22&4294967295|x>>>10),x=I+(k^C&(N^k))+P[8]+1770035416&4294967295,I=C+(x<<7&4294967295|x>>>25),x=k+(N^I&(C^N))+P[9]+2336552879&4294967295,k=I+(x<<12&4294967295|x>>>20),x=N+(C^k&(I^C))+P[10]+4294925233&4294967295,N=k+(x<<17&4294967295|x>>>15),x=C+(I^N&(k^I))+P[11]+2304563134&4294967295,C=N+(x<<22&4294967295|x>>>10),x=I+(k^C&(N^k))+P[12]+1804603682&4294967295,I=C+(x<<7&4294967295|x>>>25),x=k+(N^I&(C^N))+P[13]+4254626195&4294967295,k=I+(x<<12&4294967295|x>>>20),x=N+(C^k&(I^C))+P[14]+2792965006&4294967295,N=k+(x<<17&4294967295|x>>>15),x=C+(I^N&(k^I))+P[15]+1236535329&4294967295,C=N+(x<<22&4294967295|x>>>10),x=I+(N^k&(C^N))+P[1]+4129170786&4294967295,I=C+(x<<5&4294967295|x>>>27),x=k+(C^N&(I^C))+P[6]+3225465664&4294967295,k=I+(x<<9&4294967295|x>>>23),x=N+(I^C&(k^I))+P[11]+643717713&4294967295,N=k+(x<<14&4294967295|x>>>18),x=C+(k^I&(N^k))+P[0]+3921069994&4294967295,C=N+(x<<20&4294967295|x>>>12),x=I+(N^k&(C^N))+P[5]+3593408605&4294967295,I=C+(x<<5&4294967295|x>>>27),x=k+(C^N&(I^C))+P[10]+38016083&4294967295,k=I+(x<<9&4294967295|x>>>23),x=N+(I^C&(k^I))+P[15]+3634488961&4294967295,N=k+(x<<14&4294967295|x>>>18),x=C+(k^I&(N^k))+P[4]+3889429448&4294967295,C=N+(x<<20&4294967295|x>>>12),x=I+(N^k&(C^N))+P[9]+568446438&4294967295,I=C+(x<<5&4294967295|x>>>27),x=k+(C^N&(I^C))+P[14]+3275163606&4294967295,k=I+(x<<9&4294967295|x>>>23),x=N+(I^C&(k^I))+P[3]+4107603335&4294967295,N=k+(x<<14&4294967295|x>>>18),x=C+(k^I&(N^k))+P[8]+1163531501&4294967295,C=N+(x<<20&4294967295|x>>>12),x=I+(N^k&(C^N))+P[13]+2850285829&4294967295,I=C+(x<<5&4294967295|x>>>27),x=k+(C^N&(I^C))+P[2]+4243563512&4294967295,k=I+(x<<9&4294967295|x>>>23),x=N+(I^C&(k^I))+P[7]+1735328473&4294967295,N=k+(x<<14&4294967295|x>>>18),x=C+(k^I&(N^k))+P[12]+2368359562&4294967295,C=N+(x<<20&4294967295|x>>>12),x=I+(C^N^k)+P[5]+4294588738&4294967295,I=C+(x<<4&4294967295|x>>>28),x=k+(I^C^N)+P[8]+2272392833&4294967295,k=I+(x<<11&4294967295|x>>>21),x=N+(k^I^C)+P[11]+1839030562&4294967295,N=k+(x<<16&4294967295|x>>>16),x=C+(N^k^I)+P[14]+4259657740&4294967295,C=N+(x<<23&4294967295|x>>>9),x=I+(C^N^k)+P[1]+2763975236&4294967295,I=C+(x<<4&4294967295|x>>>28),x=k+(I^C^N)+P[4]+1272893353&4294967295,k=I+(x<<11&4294967295|x>>>21),x=N+(k^I^C)+P[7]+4139469664&4294967295,N=k+(x<<16&4294967295|x>>>16),x=C+(N^k^I)+P[10]+3200236656&4294967295,C=N+(x<<23&4294967295|x>>>9),x=I+(C^N^k)+P[13]+681279174&4294967295,I=C+(x<<4&4294967295|x>>>28),x=k+(I^C^N)+P[0]+3936430074&4294967295,k=I+(x<<11&4294967295|x>>>21),x=N+(k^I^C)+P[3]+3572445317&4294967295,N=k+(x<<16&4294967295|x>>>16),x=C+(N^k^I)+P[6]+76029189&4294967295,C=N+(x<<23&4294967295|x>>>9),x=I+(C^N^k)+P[9]+3654602809&4294967295,I=C+(x<<4&4294967295|x>>>28),x=k+(I^C^N)+P[12]+3873151461&4294967295,k=I+(x<<11&4294967295|x>>>21),x=N+(k^I^C)+P[15]+530742520&4294967295,N=k+(x<<16&4294967295|x>>>16),x=C+(N^k^I)+P[2]+3299628645&4294967295,C=N+(x<<23&4294967295|x>>>9),x=I+(N^(C|~k))+P[0]+4096336452&4294967295,I=C+(x<<6&4294967295|x>>>26),x=k+(C^(I|~N))+P[7]+1126891415&4294967295,k=I+(x<<10&4294967295|x>>>22),x=N+(I^(k|~C))+P[14]+2878612391&4294967295,N=k+(x<<15&4294967295|x>>>17),x=C+(k^(N|~I))+P[5]+4237533241&4294967295,C=N+(x<<21&4294967295|x>>>11),x=I+(N^(C|~k))+P[12]+1700485571&4294967295,I=C+(x<<6&4294967295|x>>>26),x=k+(C^(I|~N))+P[3]+2399980690&4294967295,k=I+(x<<10&4294967295|x>>>22),x=N+(I^(k|~C))+P[10]+4293915773&4294967295,N=k+(x<<15&4294967295|x>>>17),x=C+(k^(N|~I))+P[1]+2240044497&4294967295,C=N+(x<<21&4294967295|x>>>11),x=I+(N^(C|~k))+P[8]+1873313359&4294967295,I=C+(x<<6&4294967295|x>>>26),x=k+(C^(I|~N))+P[15]+4264355552&4294967295,k=I+(x<<10&4294967295|x>>>22),x=N+(I^(k|~C))+P[6]+2734768916&4294967295,N=k+(x<<15&4294967295|x>>>17),x=C+(k^(N|~I))+P[13]+1309151649&4294967295,C=N+(x<<21&4294967295|x>>>11),x=I+(N^(C|~k))+P[4]+4149444226&4294967295,I=C+(x<<6&4294967295|x>>>26),x=k+(C^(I|~N))+P[11]+3174756917&4294967295,k=I+(x<<10&4294967295|x>>>22),x=N+(I^(k|~C))+P[2]+718787259&4294967295,N=k+(x<<15&4294967295|x>>>17),x=C+(k^(N|~I))+P[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(N+(x<<21&4294967295|x>>>11))&4294967295,R.g[2]=R.g[2]+N&4294967295,R.g[3]=R.g[3]+k&4294967295}i.prototype.v=function(R,I){I===void 0&&(I=R.length);const C=I-this.blockSize,P=this.C;let N=this.h,k=0;for(;k<I;){if(N==0)for(;k<=C;)a(this,R,k),k+=this.blockSize;if(typeof R=="string"){for(;k<I;)if(P[N++]=R.charCodeAt(k++),N==this.blockSize){a(this,P),N=0;break}}else for(;k<I;)if(P[N++]=R[k++],N==this.blockSize){a(this,P),N=0;break}}this.h=N,this.o+=I},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;I=this.o*8;for(var C=R.length-8;C<R.length;++C)R[C]=I&255,I/=256;for(this.v(R),R=Array(16),I=0,C=0;C<4;++C)for(let P=0;P<32;P+=8)R[I++]=this.g[C]>>>P&255;return R};function l(R,I){var C=d;return Object.prototype.hasOwnProperty.call(C,R)?C[R]:C[R]=I(R)}function c(R,I){this.h=I;const C=[];let P=!0;for(let N=R.length-1;N>=0;N--){const k=R[N]|0;P&&k==I||(C[N]=k,P=!1)}this.g=C}var d={};function p(R){return-128<=R&&R<128?l(R,function(I){return new c([I|0],I<0?-1:0)}):new c([R|0],R<0?-1:0)}function g(R){if(isNaN(R)||!isFinite(R))return T;if(R<0)return q(g(-R));const I=[];let C=1;for(let P=0;R>=C;P++)I[P]=R/C|0,C*=4294967296;return new c(I,0)}function _(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return q(_(R.substring(1),I));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=g(Math.pow(I,8));let P=T;for(let k=0;k<R.length;k+=8){var N=Math.min(8,R.length-k);const x=parseInt(R.substring(k,k+N),I);N<8?(N=g(Math.pow(I,N)),P=P.j(N).add(g(x))):(P=P.j(C),P=P.add(g(x)))}return P}var T=p(0),A=p(1),O=p(16777216);r=c.prototype,r.m=function(){if(Q(this))return-q(this).m();let R=0,I=1;for(let C=0;C<this.g.length;C++){const P=this.i(C);R+=(P>=0?P:4294967296+P)*I,I*=4294967296}return R},r.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(z(this))return"0";if(Q(this))return"-"+q(this).toString(R);const I=g(Math.pow(R,6));var C=this;let P="";for(;;){const N=ae(C,I).g;C=Z(C,N.j(I));let k=((C.g.length>0?C.g[0]:C.h)>>>0).toString(R);if(C=N,z(C))return k+P;for(;k.length<6;)k="0"+k;P=k+P}},r.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function z(R){if(R.h!=0)return!1;for(let I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function Q(R){return R.h==-1}r.l=function(R){return R=Z(this,R),Q(R)?-1:z(R)?0:1};function q(R){const I=R.g.length,C=[];for(let P=0;P<I;P++)C[P]=~R.g[P];return new c(C,~R.h).add(A)}r.abs=function(){return Q(this)?q(this):this},r.add=function(R){const I=Math.max(this.g.length,R.g.length),C=[];let P=0;for(let N=0;N<=I;N++){let k=P+(this.i(N)&65535)+(R.i(N)&65535),x=(k>>>16)+(this.i(N)>>>16)+(R.i(N)>>>16);P=x>>>16,k&=65535,x&=65535,C[N]=x<<16|k}return new c(C,C[C.length-1]&-2147483648?-1:0)};function Z(R,I){return R.add(q(I))}r.j=function(R){if(z(this)||z(R))return T;if(Q(this))return Q(R)?q(this).j(q(R)):q(q(this).j(R));if(Q(R))return q(this.j(q(R)));if(this.l(O)<0&&R.l(O)<0)return g(this.m()*R.m());const I=this.g.length+R.g.length,C=[];for(var P=0;P<2*I;P++)C[P]=0;for(P=0;P<this.g.length;P++)for(let N=0;N<R.g.length;N++){const k=this.i(P)>>>16,x=this.i(P)&65535,lt=R.i(N)>>>16,Lt=R.i(N)&65535;C[2*P+2*N]+=x*Lt,ie(C,2*P+2*N),C[2*P+2*N+1]+=k*Lt,ie(C,2*P+2*N+1),C[2*P+2*N+1]+=x*lt,ie(C,2*P+2*N+1),C[2*P+2*N+2]+=k*lt,ie(C,2*P+2*N+2)}for(R=0;R<I;R++)C[R]=C[2*R+1]<<16|C[2*R];for(R=I;R<2*I;R++)C[R]=0;return new c(C,0)};function ie(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function H(R,I){this.g=R,this.h=I}function ae(R,I){if(z(I))throw Error("division by zero");if(z(R))return new H(T,T);if(Q(R))return I=ae(q(R),I),new H(q(I.g),q(I.h));if(Q(I))return I=ae(R,q(I)),new H(q(I.g),I.h);if(R.g.length>30){if(Q(R)||Q(I))throw Error("slowDivide_ only works with positive integers.");for(var C=A,P=I;P.l(R)<=0;)C=fe(C),P=fe(P);var N=le(C,1),k=le(P,1);for(P=le(P,2),C=le(C,2);!z(P);){var x=k.add(P);x.l(R)<=0&&(N=N.add(C),k=x),P=le(P,1),C=le(C,1)}return I=Z(R,N.j(I)),new H(N,I)}for(N=T;R.l(I)>=0;){for(C=Math.max(1,Math.floor(R.m()/I.m())),P=Math.ceil(Math.log(C)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),k=g(C),x=k.j(I);Q(x)||x.l(R)>0;)C-=P,k=g(C),x=k.j(I);z(k)&&(k=A),N=N.add(k),R=Z(R,x)}return new H(N,R)}r.B=function(R){return ae(this,R).h},r.and=function(R){const I=Math.max(this.g.length,R.g.length),C=[];for(let P=0;P<I;P++)C[P]=this.i(P)&R.i(P);return new c(C,this.h&R.h)},r.or=function(R){const I=Math.max(this.g.length,R.g.length),C=[];for(let P=0;P<I;P++)C[P]=this.i(P)|R.i(P);return new c(C,this.h|R.h)},r.xor=function(R){const I=Math.max(this.g.length,R.g.length),C=[];for(let P=0;P<I;P++)C[P]=this.i(P)^R.i(P);return new c(C,this.h^R.h)};function fe(R){const I=R.g.length+1,C=[];for(let P=0;P<I;P++)C[P]=R.i(P)<<1|R.i(P-1)>>>31;return new c(C,R.h)}function le(R,I){const C=I>>5;I%=32;const P=R.g.length-C,N=[];for(let k=0;k<P;k++)N[k]=I>0?R.i(k+C)>>>I|R.i(k+C+1)<<32-I:R.i(k+C);return new c(N,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,_w=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,ws=c}).apply(typeof IT<"u"?IT:typeof self<"u"?self:typeof window<"u"?window:{});var pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vw,ku,Ew,Cf,Tg,Tw,bw,Aw;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof pf=="object"&&pf];for(var y=0;y<h.length;++y){var E=h[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=t(this);function a(h,y){if(y)e:{var E=i;h=h.split(".");for(var w=0;w<h.length-1;w++){var j=h[w];if(!(j in E))break e;E=E[j]}h=h[h.length-1],w=E[h],y=y(w),y!=w&&y!=null&&e(E,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var E=[],w;for(w in y)Object.prototype.hasOwnProperty.call(y,w)&&E.push([w,y[w]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,E){return h.call.apply(h.bind,arguments)}function g(h,y,E){return g=p,g.apply(null,arguments)}function _(h,y){var E=Array.prototype.slice.call(arguments,1);return function(){var w=E.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function T(h,y){function E(){}E.prototype=y.prototype,h.Z=y.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(w,j,Y){for(var oe=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)oe[Ce-2]=arguments[Ce];return y.prototype[j].apply(w,oe)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function O(h){const y=h.length;if(y>0){const E=Array(y);for(let w=0;w<y;w++)E[w]=h[w];return E}return[]}function z(h,y){for(let w=1;w<arguments.length;w++){const j=arguments[w];var E=typeof j;if(E=E!="object"?E:j?Array.isArray(j)?"array":E:"null",E=="array"||E=="object"&&typeof j.length=="number"){E=h.length||0;const Y=j.length||0;h.length=E+Y;for(let oe=0;oe<Y;oe++)h[E+oe]=j[oe]}else h.push(j)}}class Q{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function q(h){c.setTimeout(()=>{throw h},0)}function Z(){var h=R;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class ie{constructor(){this.h=this.g=null}add(y,E){const w=H.get();w.set(y,E),this.h?this.h.next=w:this.g=w,this.h=w}}var H=new Q(()=>new ae,h=>h.reset());class ae{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,le=!1,R=new ie,I=()=>{const h=Promise.resolve(void 0);fe=()=>{h.then(C)}};function C(){for(var h;h=Z();){try{h.h.call(h.g)}catch(E){q(E)}var y=H;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}le=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};c.addEventListener("test",E,y),c.removeEventListener("test",E,y)}catch{}return h})();function x(h){return/^[\s\xa0]*$/.test(h)}function lt(h,y){N.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}T(lt,N),lt.prototype.init=function(h,y){const E=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(E=="mouseover"?y=h.fromElement:E=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&lt.Z.h.call(this)},lt.prototype.h=function(){lt.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Lt="closure_listenable_"+(Math.random()*1e6|0),W=0;function ce(h,y,E,w,j){this.listener=h,this.proxy=null,this.src=y,this.type=E,this.capture=!!w,this.ha=j,this.key=++W,this.da=this.fa=!1}function Te(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function qe(h,y,E){for(const w in h)y.call(E,h[w],w,h)}function Ye(h,y){for(const E in h)y.call(void 0,h[E],E,h)}function M(h){const y={};for(const E in h)y[E]=h[E];return y}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(h,y){let E,w;for(let j=1;j<arguments.length;j++){w=arguments[j];for(E in w)h[E]=w[E];for(let Y=0;Y<ne.length;Y++)E=ne[Y],Object.prototype.hasOwnProperty.call(w,E)&&(h[E]=w[E])}}function de(h){this.src=h,this.g={},this.h=0}de.prototype.add=function(h,y,E,w,j){const Y=h.toString();h=this.g[Y],h||(h=this.g[Y]=[],this.h++);const oe=De(h,y,w,j);return oe>-1?(y=h[oe],E||(y.fa=!1)):(y=new ce(y,this.src,Y,!!w,j),y.fa=E,h.push(y)),y};function we(h,y){const E=y.type;if(E in h.g){var w=h.g[E],j=Array.prototype.indexOf.call(w,y,void 0),Y;(Y=j>=0)&&Array.prototype.splice.call(w,j,1),Y&&(Te(y),h.g[E].length==0&&(delete h.g[E],h.h--))}}function De(h,y,E,w){for(let j=0;j<h.length;++j){const Y=h[j];if(!Y.da&&Y.listener==y&&Y.capture==!!E&&Y.ha==w)return j}return-1}var ze="closure_lm_"+(Math.random()*1e6|0),Ut={};function ut(h,y,E,w,j){if(Array.isArray(y)){for(let Y=0;Y<y.length;Y++)ut(h,y[Y],E,w,j);return null}return E=wl(E),h&&h[Lt]?h.J(y,E,d(w)?!!w.capture:!1,j):Ps(h,y,E,!1,w,j)}function Ps(h,y,E,w,j,Y){if(!y)throw Error("Invalid event type");const oe=d(j)?!!j.capture:!!j;let Ce=ks(h);if(Ce||(h[ze]=Ce=new de(h)),E=Ce.add(y,E,w,oe,Y),E.proxy)return E;if(w=qa(),E.proxy=w,w.src=h,w.listener=E,h.addEventListener)k||(j=oe),j===void 0&&(j=!1),h.addEventListener(y.toString(),w,j);else if(h.attachEvent)h.attachEvent(Ti(y.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return E}function qa(){function h(E){return y.call(h.src,h.listener,E)}const y=bl;return h}function Fa(h,y,E,w,j){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)Fa(h,y[Y],E,w,j);else w=d(w)?!!w.capture:!!w,E=wl(E),h&&h[Lt]?(h=h.i,Y=String(y).toString(),Y in h.g&&(y=h.g[Y],E=De(y,E,w,j),E>-1&&(Te(y[E]),Array.prototype.splice.call(y,E,1),y.length==0&&(delete h.g[Y],h.h--)))):h&&(h=ks(h))&&(y=h.g[y.toString()],h=-1,y&&(h=De(y,E,w,j)),(E=h>-1?y[h]:null)&&Ha(E))}function Ha(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Lt])we(y.i,h);else{var E=h.type,w=h.proxy;y.removeEventListener?y.removeEventListener(E,w,h.capture):y.detachEvent?y.detachEvent(Ti(E),w):y.addListener&&y.removeListener&&y.removeListener(w),(E=ks(y))?(we(E,h),E.h==0&&(E.src=null,y[ze]=null)):Te(h)}}}function Ti(h){return h in Ut?Ut[h]:Ut[h]="on"+h}function bl(h,y){if(h.da)h=!0;else{y=new lt(y,this);const E=h.listener,w=h.ha||h.src;h.fa&&Ha(h),h=E.call(w,y)}return h}function ks(h){return h=h[ze],h instanceof de?h:null}var Al="__closure_events_fn_"+(Math.random()*1e9>>>0);function wl(h){return typeof h=="function"?h:(h[Al]||(h[Al]=function(y){return h.handleEvent(y)}),h[Al])}function St(){P.call(this),this.i=new de(this),this.M=this,this.G=null}T(St,P),St.prototype[Lt]=!0,St.prototype.removeEventListener=function(h,y,E,w){Fa(this,h,y,E,w)};function jt(h,y){var E,w=h.G;if(w)for(E=[];w;w=w.G)E.push(w);if(h=h.M,w=y.type||y,typeof y=="string")y=new N(y,h);else if(y instanceof N)y.target=y.target||h;else{var j=y;y=new N(w,h),he(y,j)}j=!0;let Y,oe;if(E)for(oe=E.length-1;oe>=0;oe--)Y=y.g=E[oe],j=Or(Y,w,!0,y)&&j;if(Y=y.g=h,j=Or(Y,w,!0,y)&&j,j=Or(Y,w,!1,y)&&j,E)for(oe=0;oe<E.length;oe++)Y=y.g=E[oe],j=Or(Y,w,!1,y)&&j}St.prototype.N=function(){if(St.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const E=h.g[y];for(let w=0;w<E.length;w++)Te(E[w]);delete h.g[y],h.h--}}this.G=null},St.prototype.J=function(h,y,E,w){return this.i.add(String(h),y,!1,E,w)},St.prototype.K=function(h,y,E,w){return this.i.add(String(h),y,!0,E,w)};function Or(h,y,E,w){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let j=!0;for(let Y=0;Y<y.length;++Y){const oe=y[Y];if(oe&&!oe.da&&oe.capture==E){const Ce=oe.listener,bt=oe.ha||oe.src;oe.fa&&we(h.i,oe),j=Ce.call(bt,w)!==!1&&j}}return j&&!w.defaultPrevented}function qd(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function kc(h){h.g=qd(()=>{h.g=null,h.i&&(h.i=!1,kc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class un extends P{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:kc(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ls(h){P.call(this),this.h=h,this.g={}}T(Ls,P);var Sl=[];function Il(h){qe(h.g,function(y,E){this.g.hasOwnProperty(E)&&Ha(y)},h),h.g={}}Ls.prototype.N=function(){Ls.Z.N.call(this),Il(this)},Ls.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vr=c.JSON.stringify,Fd=c.JSON.parse,Lc=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Uc(){}function jc(){}var ti={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Yt(){N.call(this,"d")}T(Yt,N);function Ln(){N.call(this,"c")}T(Ln,N);var Tt={},zc=null;function Ga(){return zc=zc||new St}Tt.Ia="serverreachability";function Bc(h){N.call(this,Tt.Ia,h)}T(Bc,N);function bi(h){const y=Ga();jt(y,new Bc(y))}Tt.STAT_EVENT="statevent";function Us(h,y){N.call(this,Tt.STAT_EVENT,h),this.stat=y}T(Us,N);function It(h){const y=Ga();jt(y,new Us(y,h))}Tt.Ja="timingevent";function Ai(h,y){N.call(this,Tt.Ja,h),this.size=y}T(Ai,N);function wi(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function ni(){this.g=!0}ni.prototype.ua=function(){this.g=!1};function Hd(h,y,E,w,j,Y){h.info(function(){if(h.g)if(Y){var oe="",Ce=Y.split("&");for(let Ge=0;Ge<Ce.length;Ge++){var bt=Ce[Ge].split("=");if(bt.length>1){const ct=bt[0];bt=bt[1];const Bn=ct.split("_");oe=Bn.length>=2&&Bn[1]=="type"?oe+(ct+"="+bt+"&"):oe+(ct+"=redacted&")}}}else oe=null;else oe=Y;return"XMLHTTP REQ ("+w+") [attempt "+j+"]: "+y+`
`+E+`
`+oe})}function qc(h,y,E,w,j,Y,oe){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+j+"]: "+y+`
`+E+`
`+Y+" "+oe})}function Si(h,y,E,w){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Gd(h,E)+(w?" "+w:"")})}function js(h,y){h.info(function(){return"TIMEOUT: "+y})}ni.prototype.info=function(){};function Gd(h,y){if(!h.g)return y;if(!y)return null;try{const Y=JSON.parse(y);if(Y){for(h=0;h<Y.length;h++)if(Array.isArray(Y[h])){var E=Y[h];if(!(E.length<2)){var w=E[1];if(Array.isArray(w)&&!(w.length<1)){var j=w[0];if(j!="noop"&&j!="stop"&&j!="close")for(let oe=1;oe<w.length;oe++)w[oe]=""}}}}return Vr(Y)}catch{return y}}var zs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Rl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Cl;function Bs(){}T(Bs,Uc),Bs.prototype.g=function(){return new XMLHttpRequest},Cl=new Bs;function Wi(h){return encodeURIComponent(String(h))}function Fc(h){var y=1;h=h.split(":");const E=[];for(;y>0&&h.length;)E.push(h.shift()),y--;return h.length&&E.push(h.join(":")),E}function ii(h,y,E,w){this.j=h,this.i=y,this.l=E,this.S=w||1,this.V=new Ls(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ri}function ri(){this.i=null,this.g="",this.h=!1}var Rt={},Ht={};function Ii(h,y,E){h.M=1,h.A=qs(xt(y)),h.u=E,h.R=!0,Ka(h,null)}function Ka(h,y){h.F=Date.now(),Ri(h),h.B=xt(h.A);var E=h.B,w=h.S;Array.isArray(w)||(w=[String(w)]),Xa(E.i,"t",w),h.C=0,E=h.j.L,h.h=new ri,h.g=rh(h.j,E?y:null,!h.u),h.P>0&&(h.O=new un(g(h.Y,h,h.g),h.P)),y=h.V,E=h.g,w=h.ba;var j="readystatechange";Array.isArray(j)||(j&&(Sl[0]=j.toString()),j=Sl);for(let Y=0;Y<j.length;Y++){const oe=ut(E,j[Y],w||y.handleEvent,!1,y.h||y);if(!oe)break;y.g[oe.key]=oe}y=h.J?M(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),bi(),Hd(h.i,h.v,h.B,h.l,h.S,h.u)}ii.prototype.ba=function(h){h=h.target;const y=this.O;y&&oi(h)==3?y.j():this.Y(h)},ii.prototype.Y=function(h){try{if(h==this.g)e:{const Ce=oi(this.g),bt=this.g.ya(),Ge=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||$t(this.g)))){this.K||Ce!=4||bt==7||(bt==8||Ge<=0?bi(3):bi(2)),Ci(this);var y=this.g.ca();this.X=y;var E=Kd(this);if(this.o=y==200,qc(this.i,this.v,this.B,this.l,this.S,Ce,y),this.o){if(this.U&&!this.L){t:{if(this.g){var w,j=this.g;if((w=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(w)){var Y=w;break t}}Y=null}if(h=Y)Si(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xi(this,h);else{this.o=!1,this.m=3,It(12),An(this),Un(this);break e}}if(this.R){h=!0;let ct;for(;!this.K&&this.C<E.length;)if(ct=Gc(this,E),ct==Ht){Ce==4&&(this.m=4,It(14),h=!1),Si(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==Rt){this.m=4,It(15),Si(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else Si(this.i,this.l,ct,null),xi(this,ct);if(Hc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||E.length!=0||this.h.h||(this.m=1,It(16),h=!1),this.o=this.o&&h,!h)Si(this.i,this.l,E,"[Invalid Chunked Response]"),An(this),Un(this);else if(E.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Fl(oe),oe.P=!0,It(11))}}else Si(this.i,this.l,E,null),xi(this,E);Ce==4&&An(this),this.o&&!this.K&&(Ce==4?eh(this.j,this):(this.o=!1,Ri(this)))}else er(this.g),y==400&&E.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),An(this),Un(this)}}}catch{}finally{}};function Kd(h){if(!Hc(h))return h.g.la();const y=$t(h.g);if(y==="")return"";let E="";const w=y.length,j=oi(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return An(h),Un(h),"";h.h.i=new c.TextDecoder}for(let Y=0;Y<w;Y++)h.h.h=!0,E+=h.h.i.decode(y[Y],{stream:!(j&&Y==w-1)});return y.length=0,h.h.g+=E,h.C=0,h.h.g}function Hc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Gc(h,y){var E=h.C,w=y.indexOf(`
`,E);return w==-1?Ht:(E=Number(y.substring(E,w)),isNaN(E)?Rt:(w+=1,w+E>y.length?Ht:(y=y.slice(w,w+E),h.C=w+E,y)))}ii.prototype.cancel=function(){this.K=!0,An(this)};function Ri(h){h.T=Date.now()+h.H,Qa(h,h.H)}function Qa(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=wi(g(h.aa,h),y)}function Ci(h){h.D&&(c.clearTimeout(h.D),h.D=null)}ii.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(js(this.i,this.B),this.M!=2&&(bi(),It(17)),An(this),this.m=2,Un(this)):Qa(this,this.T-h)};function Un(h){h.j.I==0||h.K||eh(h.j,h)}function An(h){Ci(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Il(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function xi(h,y){try{var E=h.j;if(E.I!=0&&(E.g==h||Ni(E.h,h))){if(!h.L&&Ni(E.h,h)&&E.I==3){try{var w=E.Ba.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var j=w;if(j[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)to(E),Br(E);else break e;$s(E),It(18)}}else E.xa=j[1],0<E.xa-E.K&&j[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=wi(g(E.Va,E),6e3));Di(E.h)<=1&&E.ta&&(E.ta=void 0)}else Li(E,11)}else if((h.L||E.g==h)&&to(E),!x(y))for(j=E.Ba.g.parse(y),y=0;y<j.length;y++){let Ge=j[y];const ct=Ge[0];if(!(ct<=E.K))if(E.K=ct,Ge=Ge[1],E.I==2)if(Ge[0]=="c"){E.M=Ge[1],E.ba=Ge[2];const Bn=Ge[3];Bn!=null&&(E.ka=Bn,E.j.info("VER="+E.ka));const Ui=Ge[4];Ui!=null&&(E.za=Ui,E.j.info("SVER="+E.za));const li=Ge[5];li!=null&&typeof li=="number"&&li>0&&(w=1.5*li,E.O=w,E.j.info("backChannelRequestTimeoutMs_="+w)),w=E;const ui=h.g;if(ui){const Xs=ui.g?ui.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xs){var Y=w.h;Y.g||Xs.indexOf("spdy")==-1&&Xs.indexOf("quic")==-1&&Xs.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Nl(Y,Y.h),Y.h=null))}if(w.G){const no=ui.g?ui.g.getResponseHeader("X-HTTP-Session-Id"):null;no&&(w.wa=no,$e(w.J,w.G,no))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),w=E;var oe=h;if(w.na=ih(w,w.L?w.ba:null,w.W),oe.L){Ol(w.h,oe);var Ce=oe,bt=w.O;bt&&(Ce.H=bt),Ce.D&&(Ci(Ce),Ri(Ce)),w.g=oe}else Wc(w);E.i.length>0&&ki(E)}else Ge[0]!="stop"&&Ge[0]!="close"||Li(E,7);else E.I==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?Li(E,7):Bl(E):Ge[0]!="noop"&&E.l&&E.l.qa(Ge),E.A=0)}}bi(4)}catch{}}var Ct=class{constructor(h,y){this.g=h,this.map=y}};function xl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Dl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Di(h){return h.h?1:h.g?h.g.size:0}function Ni(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Nl(h,y){h.g?h.g.add(y):h.h=y}function Ol(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}xl.prototype.cancel=function(){if(this.i=Vl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Vl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const E of h.g.values())y=y.concat(E.G);return y}return O(h.i)}var Kc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ya(h,y){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const w=h[E].indexOf("=");let j,Y=null;w>=0?(j=h[E].substring(0,w),Y=h[E].substring(w+1)):j=h[E],y(j,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function wn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof wn?(this.l=h.l,Gt(this,h.j),this.o=h.o,this.g=h.g,Mr(this,h.u),this.h=h.h,Ml(this,Xc(h.i)),this.m=h.m):h&&(y=String(h).match(Kc))?(this.l=!1,Gt(this,y[1]||"",!0),this.o=Oi(y[2]||""),this.g=Oi(y[3]||"",!0),Mr(this,y[4]),this.h=Oi(y[5]||"",!0),Ml(this,y[6]||"",!0),this.m=Oi(y[7]||"")):(this.l=!1,this.i=new kr(null,this.l))}wn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Fs(y,$a,!0),":");var E=this.g;return(E||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Fs(y,$a,!0),"@"),h.push(Wi(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Fs(E,E.charAt(0)=="/"?Pl:Qc,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Fs(E,Yc)),h.join("")},wn.prototype.resolve=function(h){const y=xt(this);let E=!!h.j;E?Gt(y,h.j):E=!!h.o,E?y.o=h.o:E=!!h.g,E?y.g=h.g:E=h.u!=null;var w=h.h;if(E)Mr(y,h.u);else if(E=!!h.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var j=y.h.lastIndexOf("/");j!=-1&&(w=y.h.slice(0,j+1)+w)}if(j=w,j==".."||j==".")w="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){w=j.lastIndexOf("/",0)==0,j=j.split("/");const Y=[];for(let oe=0;oe<j.length;){const Ce=j[oe++];Ce=="."?w&&oe==j.length&&Y.push(""):Ce==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),w&&oe==j.length&&Y.push("")):(Y.push(Ce),w=!0)}w=Y.join("/")}else w=j}return E?y.h=w:E=h.i.toString()!=="",E?Ml(y,Xc(h.i)):E=!!h.m,E&&(y.m=h.m),y};function xt(h){return new wn(h)}function Gt(h,y,E){h.j=E?Oi(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Mr(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Ml(h,y,E){y instanceof kr?(h.i=y,Ja(h.i,h.l)):(E||(y=Fs(y,Pr)),h.i=new kr(y,h.l))}function $e(h,y,E){h.i.set(y,E)}function qs(h){return $e(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Oi(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Fs(h,y,E){return typeof h=="string"?(h=encodeURI(h).replace(y,mn),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function mn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var $a=/[#\/\?@]/g,Qc=/[#\?:]/g,Pl=/[#\?]/g,Pr=/[#\?@]/g,Yc=/#/g;function kr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function pn(h){h.g||(h.g=new Map,h.h=0,h.i&&Ya(h.i,function(y,E){h.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}r=kr.prototype,r.add=function(h,y){pn(this),this.i=null,h=Lr(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(y),this.h+=1,this};function $c(h,y){pn(h),y=Lr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function kl(h,y){return pn(h),y=Lr(h,y),h.g.has(y)}r.forEach=function(h,y){pn(this),this.g.forEach(function(E,w){E.forEach(function(j){h.call(y,j,w,this)},this)},this)};function Ll(h,y){pn(h);let E=[];if(typeof y=="string")kl(h,y)&&(E=E.concat(h.g.get(Lr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)E=E.concat(h[y]);return E}r.set=function(h,y){return pn(this),this.i=null,h=Lr(this,h),kl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=Ll(this,h),h.length>0?String(h[0]):y):y};function Xa(h,y,E){$c(h,y),E.length>0&&(h.i=null,h.g.set(Lr(h,y),O(E)),h.h+=E.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let w=0;w<y.length;w++){var E=y[w];const j=Wi(E);E=Ll(this,E);for(let Y=0;Y<E.length;Y++){let oe=j;E[Y]!==""&&(oe+="="+Wi(E[Y])),h.push(oe)}}return this.i=h.join("&")};function Xc(h){const y=new kr;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Lr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Ja(h,y){y&&!h.j&&(pn(h),h.i=null,h.g.forEach(function(E,w){const j=w.toLowerCase();w!=j&&($c(this,w),Xa(this,j,E))},h)),h.j=y}function si(h,y){const E=new ni;if(c.Image){const w=new Image;w.onload=_(jn,E,"TestLoadImage: loaded",!0,y,w),w.onerror=_(jn,E,"TestLoadImage: error",!1,y,w),w.onabort=_(jn,E,"TestLoadImage: abort",!1,y,w),w.ontimeout=_(jn,E,"TestLoadImage: timeout",!1,y,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else y(!1)}function Ul(h,y){const E=new ni,w=new AbortController,j=setTimeout(()=>{w.abort(),jn(E,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:w.signal}).then(Y=>{clearTimeout(j),Y.ok?jn(E,"TestPingServer: ok",!0,y):jn(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(j),jn(E,"TestPingServer: error",!1,y)})}function jn(h,y,E,w,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),w(E)}catch{}}function Ur(){this.g=new Lc}function Vi(h){this.i=h.Sb||null,this.h=h.ab||!1}T(Vi,Uc),Vi.prototype.g=function(){return new Hs(this.i,this.h)};function Hs(h,y){St.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Hs,St),r=Hs.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,ai(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,jr(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ai(this)),this.g&&(this.readyState=3,ai(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Wa(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Wa(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?jr(this):ai(this),this.readyState==3&&Wa(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,jr(this))},r.Na=function(h){this.g&&(this.response=h,jr(this))},r.ga=function(){this.g&&jr(this)};function jr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ai(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=y.next();return h.join(`\r
`)};function ai(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Hs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function zn(h){let y="";return qe(h,function(E,w){y+=w,y+=":",y+=E,y+=`\r
`}),y}function Gs(h,y,E){e:{for(w in E){var w=!1;break e}w=!0}w||(E=zn(E),typeof h=="string"?E!=null&&Wi(E):$e(h,y,E))}function tt(h){St.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(tt,St);var Mi=/^https?$/i,jl=["POST","PUT"];r=tt.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,E,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Cl.g(),this.g.onreadystatechange=A(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Y){Ks(this,Y);return}if(h=E||"",E=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var j in w)E.set(j,w[j]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Y of w.keys())E.set(Y,w.get(Y));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(E.keys()).find(Y=>Y.toLowerCase()=="content-type"),j=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(jl,y,void 0)>=0)||w||j||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,oe]of E)this.g.setRequestHeader(Y,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Y){Ks(this,Y)}};function Ks(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,zl(h),Zi(h)}function zl(h){h.A||(h.A=!0,jt(h,"complete"),jt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,jt(this,"complete"),jt(this,"abort"),Zi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zi(this,!0)),tt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Qs(this):this.Xa())},r.Xa=function(){Qs(this)};function Qs(h){if(h.h&&typeof l<"u"){if(h.v&&oi(h)==4)setTimeout(h.Ca.bind(h),0);else if(jt(h,"readystatechange"),oi(h)==4){h.h=!1;try{const Y=h.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var w;if(w=Y===0){let oe=String(h.D).match(Kc)[1]||null;!oe&&c.self&&c.self.location&&(oe=c.self.location.protocol.slice(0,-1)),w=!Mi.test(oe?oe.toLowerCase():"")}E=w}if(E)jt(h,"complete"),jt(h,"success");else{h.o=6;try{var j=oi(h)>2?h.g.statusText:""}catch{j=""}h.l=j+" ["+h.ca()+"]",zl(h)}}finally{Zi(h)}}}}function Zi(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,y||jt(h,"ready");try{E.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function oi(h){return h.g?h.g.readyState:0}r.ca=function(){try{return oi(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Fd(y)}};function $t(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function er(h){const y={};h=(h.g&&oi(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(x(h[w]))continue;var E=Fc(h[w]);const j=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Y=y[j]||[];y[j]=Y,Y.push(E)}Ye(y,function(w){return w.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pi(h,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||y}function zr(h){this.za=0,this.i=[],this.j=new ni,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Pi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Pi("baseRetryDelayMs",5e3,h),this.Za=Pi("retryDelaySeedMs",1e4,h),this.Ta=Pi("forwardChannelMaxRetries",2,h),this.va=Pi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new xl(h&&h.concurrentRequestLimit),this.Ba=new Ur,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=zr.prototype,r.ka=8,r.I=1,r.connect=function(h,y,E,w){It(0),this.W=h,this.H=y||{},E&&w!==void 0&&(this.H.OSID=E,this.H.OAID=w),this.F=this.X,this.J=ih(this,null,this.W),ki(this)};function Bl(h){if(Za(h),h.I==3){var y=h.V++,E=xt(h.J);if($e(E,"SID",h.M),$e(E,"RID",y),$e(E,"TYPE","terminate"),Ys(h,E),y=new ii(h,h.j,y),y.M=2,y.A=qs(xt(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!E&&c.Image&&(new Image().src=y.A,E=!0),E||(y.g=rh(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ri(y)}nh(h)}function Br(h){h.g&&(Fl(h),h.g.cancel(),h.g=null)}function Za(h){Br(h),h.v&&(c.clearTimeout(h.v),h.v=null),to(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function ki(h){if(!Dl(h.h)&&!h.m){h.m=!0;var y=h.Ea;fe||I(),le||(fe(),le=!0),R.add(y,h),h.D=0}}function eo(h,y){return Di(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=wi(g(h.Ea,h,y),th(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const j=new ii(this,this.j,h);let Y=this.o;if(this.U&&(Y?(Y=M(Y),he(Y,this.U)):Y=this.U),this.u!==null||this.R||(j.J=Y,Y=null),this.S)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var w=this.i[E];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,y>4096){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=Jc(this,j,y),E=xt(this.J),$e(E,"RID",h),$e(E,"CVER",22),this.G&&$e(E,"X-HTTP-Session-Id",this.G),Ys(this,E),Y&&(this.R?y="headers="+Wi(zn(Y))+"&"+y:this.u&&Gs(E,this.u,Y)),Nl(this.h,j),this.Ra&&$e(E,"TYPE","init"),this.S?($e(E,"$req",y),$e(E,"SID","null"),j.U=!0,Ii(j,E,null)):Ii(j,E,y),this.I=2}}else this.I==3&&(h?ql(this,h):this.i.length==0||Dl(this.h)||ql(this))};function ql(h,y){var E;y?E=y.l:E=h.V++;const w=xt(h.J);$e(w,"SID",h.M),$e(w,"RID",E),$e(w,"AID",h.K),Ys(h,w),h.u&&h.o&&Gs(w,h.u,h.o),E=new ii(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Jc(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Nl(h.h,E),Ii(E,w,y)}function Ys(h,y){h.H&&qe(h.H,function(E,w){$e(y,w,E)}),h.l&&qe({},function(E,w){$e(y,w,E)})}function Jc(h,y,E){E=Math.min(h.i.length,E);const w=h.l?g(h.l.Ka,h.l,h):null;e:{var j=h.i;let Ce=-1;for(;;){const bt=["count="+E];Ce==-1?E>0?(Ce=j[0].g,bt.push("ofs="+Ce)):Ce=0:bt.push("ofs="+Ce);let Ge=!0;for(let ct=0;ct<E;ct++){var Y=j[ct].g;const Bn=j[ct].map;if(Y-=Ce,Y<0)Ce=Math.max(0,j[ct].g-100),Ge=!1;else try{Y="req"+Y+"_"||"";try{var oe=Bn instanceof Map?Bn:Object.entries(Bn);for(const[Ui,li]of oe){let ui=li;d(li)&&(ui=Vr(li)),bt.push(Y+Ui+"="+encodeURIComponent(ui))}}catch(Ui){throw bt.push(Y+"type="+encodeURIComponent("_badmap")),Ui}}catch{w&&w(Bn)}}if(Ge){oe=bt.join("&");break e}}oe=void 0}return h=h.i.splice(0,E),y.G=h,oe}function Wc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;fe||I(),le||(fe(),le=!0),R.add(y,h),h.A=0}}function $s(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=wi(g(h.Da,h),th(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,Zc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=wi(g(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),Br(this),Zc(this))};function Fl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Zc(h){h.g=new ii(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=xt(h.na);$e(y,"RID","rpc"),$e(y,"SID",h.M),$e(y,"AID",h.K),$e(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&$e(y,"TO",h.ia),$e(y,"TYPE","xmlhttp"),Ys(h,y),h.u&&h.o&&Gs(y,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=qs(xt(y)),E.u=null,E.R=!0,Ka(E,h)}r.Va=function(){this.C!=null&&(this.C=null,Br(this),$s(this),It(19))};function to(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function eh(h,y){var E=null;if(h.g==y){to(h),Fl(h),h.g=null;var w=2}else if(Ni(h.h,y))E=y.G,Ol(h.h,y),w=1;else return;if(h.I!=0){if(y.o)if(w==1){E=y.u?y.u.length:0,y=Date.now()-y.F;var j=h.D;w=Ga(),jt(w,new Ai(w,E)),ki(h)}else Wc(h);else if(j=y.m,j==3||j==0&&y.X>0||!(w==1&&eo(h,y)||w==2&&$s(h)))switch(E&&E.length>0&&(y=h.h,y.i=y.i.concat(E)),j){case 1:Li(h,5);break;case 4:Li(h,10);break;case 3:Li(h,6);break;default:Li(h,2)}}}function th(h,y){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*y}function Li(h,y){if(h.j.info("Error code "+y),y==2){var E=g(h.bb,h),w=h.Ua;const j=!w;w=new wn(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Gt(w,"https"),qs(w),j?si(w.toString(),E):Ul(w.toString(),E)}else It(2);h.I=0,h.l&&h.l.pa(y),nh(h),Za(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function nh(h){if(h.I=0,h.ja=[],h.l){const y=Vl(h.h);(y.length!=0||h.i.length!=0)&&(z(h.ja,y),z(h.ja,h.i),h.h.i.length=0,O(h.i),h.i.length=0),h.l.oa()}}function ih(h,y,E){var w=E instanceof wn?xt(E):new wn(E);if(w.g!="")y&&(w.g=y+"."+w.g),Mr(w,w.u);else{var j=c.location;w=j.protocol,y=y?y+"."+j.hostname:j.hostname,j=+j.port;const Y=new wn(null);w&&Gt(Y,w),y&&(Y.g=y),j&&Mr(Y,j),E&&(Y.h=E),w=Y}return E=h.G,y=h.wa,E&&y&&$e(w,E,y),$e(w,"VER",h.ka),Ys(h,w),w}function rh(h,y,E){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new tt(new Vi({ab:E})):new tt(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function sh(){}r=sh.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function qr(){}qr.prototype.g=function(h,y){return new cn(h,y)};function cn(h,y){St.call(this),this.g=new zr(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!x(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!x(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new tr(this)}T(cn,St),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Bl(this.g)},cn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=Vr(h),h=E);y.i.push(new Ct(y.Ya++,h)),y.I==3&&ki(y)},cn.prototype.N=function(){this.g.l=null,delete this.j,Bl(this.g),delete this.g,cn.Z.N.call(this)};function ah(h){Yt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const E in y){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}T(ah,Yt);function oh(){Ln.call(this),this.status=1}T(oh,Ln);function tr(h){this.g=h}T(tr,sh),tr.prototype.ra=function(){jt(this.g,"a")},tr.prototype.qa=function(h){jt(this.g,new ah(h))},tr.prototype.pa=function(h){jt(this.g,new oh)},tr.prototype.oa=function(){jt(this.g,"b")},qr.prototype.createWebChannel=qr.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,Aw=function(){return new qr},bw=function(){return Ga()},Tw=Tt,Tg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},zs.NO_ERROR=0,zs.TIMEOUT=8,zs.HTTP_ERROR=6,Cf=zs,Rl.COMPLETE="complete",Ew=Rl,jc.EventType=ti,ti.OPEN="a",ti.CLOSE="b",ti.ERROR="c",ti.MESSAGE="d",St.prototype.listen=St.prototype.J,ku=jc,tt.prototype.listenOnce=tt.prototype.K,tt.prototype.getLastError=tt.prototype.Ha,tt.prototype.getLastErrorCode=tt.prototype.ya,tt.prototype.getStatus=tt.prototype.ca,tt.prototype.getResponseJson=tt.prototype.La,tt.prototype.getResponseText=tt.prototype.la,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Fa,vw=tt}).apply(typeof pf<"u"?pf:typeof self<"u"?self:typeof window<"u"?window:{});const RT="@firebase/firestore",CT="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _l="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=new ty("@firebase/firestore");function jo(){return Na.logLevel}function re(r,...e){if(Na.logLevel<=Le.DEBUG){const t=e.map(dy);Na.debug(`Firestore (${_l}): ${r}`,...t)}}function fn(r,...e){if(Na.logLevel<=Le.ERROR){const t=e.map(dy);Na.error(`Firestore (${_l}): ${r}`,...t)}}function Oa(r,...e){if(Na.logLevel<=Le.WARN){const t=e.map(dy);Na.warn(`Firestore (${_l}): ${r}`,...t)}}function dy(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,ww(r,i,t)}function ww(r,e,t){let i=`FIRESTORE (${_l}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw fn(i),new Error(i)}function _e(r,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,r||ww(e,a,i)}function Ie(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends Rr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(en.UNAUTHENTICATED)))}shutdown(){}}class iO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class rO{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_e(this.o===void 0,42304);let i=this.i;const a=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new Yi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Yi,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},d=p=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Yi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(_e(typeof i.accessToken=="string",31837,{l:i}),new Sw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string",2055,{h:e}),new en(e)}}class sO{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=en.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class aO{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new sO(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(en.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class xT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){_e(this.o===void 0,3512);const i=l=>{l.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,re("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new xT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(_e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new xT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lO(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=lO(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function Se(r,e){return r<e?-1:r>e?1:0}function bg(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const a=r.charAt(i),l=e.charAt(i);if(a!==l)return ng(a)===ng(l)?Se(a,l):ng(a)?1:-1}return Se(r.length,e.length)}const uO=55296,cO=57343;function ng(r){const e=r.charCodeAt(0);return e>=uO&&e<=cO}function Jo(r,e,t){return r.length===e.length&&r.every(((i,a)=>t(i,e[a])))}function Iw(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="__name__";class Fi{constructor(e,t,i){t===void 0?t=0:t>e.length&&pe(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&pe(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Fi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Fi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=Fi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Se(e.length,t.length)}static compareSegments(e,t){const i=Fi.isNumericId(e),a=Fi.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Fi.extractNumericId(e).compare(Fi.extractNumericId(t)):bg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ws.fromString(e.substring(4,e.length-2))}}class Qe extends Fi{construct(e,t,i){return new Qe(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new se(X.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new Qe(t)}static emptyPath(){return new Qe([])}}const hO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gt extends Fi{construct(e,t,i){return new gt(e,t,i)}static isValidIdentifier(e){return hO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===DT}static keyField(){return new gt([DT])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new se(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new se(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new se(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(l(),a++)}if(l(),c)throw new se(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gt(t)}static emptyPath(){return new gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.path=e}static fromPath(e){return new ue(Qe.fromString(e))}static fromName(e){return new ue(Qe.fromString(e).popFirst(5))}static empty(){return new ue(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new Qe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(r,e,t){if(!t)throw new se(X.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function fO(r,e,t,i){if(e===!0&&i===!0)throw new se(X.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function NT(r){if(!ue.isDocumentKey(r))throw new se(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function OT(r){if(ue.isDocumentKey(r))throw new se(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Cw(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Td(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":pe(12329,{type:typeof r})}function on(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new se(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Td(r);throw new se(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function dO(r,e){if(e<=0)throw new se(X.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Ec(r,e){if(!Cw(r))throw new se(X.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const c=r[i];if(a&&typeof c!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new se(X.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=-62135596800,MT=1e6;class We{static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*MT);return new We(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<VT)throw new se(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/MT}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:We._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ec(e,We._jsonSchema))return new We(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-VT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}We._jsonSchemaVersion="firestore/timestamp/1.0",We._jsonSchema={type:Pt("string",We._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new We(0,0))}static max(){return new Ee(new We(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=-1;class $f{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function Ag(r){return r.fields.find((e=>e.kind===2))}function ma(r){return r.fields.filter((e=>e.kind!==2))}$f.UNKNOWN_ID=-1;class xf{constructor(e,t){this.fieldPath=e,this.kind=t}}class tc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new tc(0,Pn.min())}}function mO(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,a=Ee.fromTimestamp(i===1e9?new We(t+1,0):new We(t,i));return new Pn(a,ue.empty(),e)}function xw(r){return new Pn(r.readTime,r.key,ec)}class Pn{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Pn(Ee.min(),ue.empty(),ec)}static max(){return new Pn(Ee.max(),ue.empty(),ec)}}function py(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ue.comparator(r.documentKey,e.documentKey),t!==0?t:Se(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Nw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function za(r){if(r.code!==X.FAILED_PRECONDITION||r.message!==Dw)throw r;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new U(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof U?t:U.resolve(t)}catch(t){return U.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):U.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):U.reject(t)}static resolve(e){return new U(((t,i)=>{t(e)}))}static reject(e){return new U(((t,i)=>{i(e)}))}static waitFor(e){return new U(((t,i)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(p=>i(p)))})),c=!0,l===a&&t()}))}static or(e){let t=U.resolve(!1);for(const i of e)t=t.next((a=>a?U.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new U(((i,a)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((_=>{c[g]=_,++d,d===l&&i(c)}),(_=>a(_)))}}))}static doWhile(e,t){return new U(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="SimpleDb";class bd{static open(e,t,i,a){try{return new bd(t,e.transaction(a,i))}catch(l){throw new Fu(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Yi,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Fu(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const a=gy(i.target.error);this.S.reject(new Fu(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(re(On,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new gO(t)}}class Ss{static delete(e){return re(On,"Removing database:",e),ga(EA().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!xA())return!1;if(Ss.F())return!0;const e=qt(),t=Ss.M(e),i=0<t&&t<10,a=Ow(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||l)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,Ss.M(qt())===12.2&&fn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(re(On,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{i(new Fu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?i(new se(X.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new se(X.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new Fu(e,c))},a.onupgradeneeded=l=>{re(On,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next((()=>{re(On,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const d=bd.open(this.db,e,l?"readonly":"readwrite",i),p=a(d).next((g=>(d.C(),g))).catch((g=>(d.abort(g),U.reject(g)))).toPromise();return p.catch((()=>{})),await d.D,p}catch(d){const p=d,g=p.name!=="FirebaseError"&&c<3;if(re(On,"Transaction failed with error:",p.message,"Retrying:",g),this.close(),!g)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Ow(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class pO{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ga(this.U.delete())}}class Fu extends se{constructor(e,t){super(X.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Vs(r){return r.name==="IndexedDbTransactionError"}class gO{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(re(On,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(re(On,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),ga(i)}add(e){return re(On,"ADD",this.store.name,e,e),ga(this.store.add(e))}get(e){return ga(this.store.get(e)).next((t=>(t===void 0&&(t=null),re(On,"GET",this.store.name,e,t),t)))}delete(e){return re(On,"DELETE",this.store.name,e),ga(this.store.delete(e))}count(){return re(On,"COUNT",this.store.name),ga(this.store.count())}J(e,t){const i=this.options(e,t),a=i.index?this.store.index(i.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(i.range);return new U(((c,d)=>{l.onerror=p=>{d(p.target.error)},l.onsuccess=p=>{c(p.target.result)}}))}{const l=this.cursor(i),c=[];return this.H(l,((d,p)=>{c.push(p)})).next((()=>c))}}Y(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new U(((a,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{a(c.target.result)}}))}Z(e,t){re(On,"DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const a=this.cursor(i);return this.H(a,((l,c,d)=>d.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.H(a,t)}te(e){const t=this.cursor({});return new U(((i,a)=>{t.onerror=l=>{const c=gy(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((d=>{d?c.continue():i()})):i()}}))}H(e,t){const i=[];return new U(((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const p=new pO(d),g=t(d.primaryKey,d.value,p);if(g instanceof U){const _=g.catch((T=>(p.done(),U.reject(T))));i.push(_)}p.isDone?a():p.G===null?d.continue():d.continue(p.G)}})).next((()=>U.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ga(r){return new U(((e,t)=>{r.onsuccess=i=>{const a=i.target.result;e(a)},r.onerror=i=>{const a=gy(i.target.error);t(a)}}))}let PT=!1;function gy(r){const e=Ss.M(qt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const i=new se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return PT||(PT=!0,setTimeout((()=>{throw i}),0)),i}}return r}const Hu="IndexBackfiller";class yO{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){re(Hu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();re(Hu,`Documents written: ${t}`)}catch(t){Vs(t)?re(Hu,"Ignoring IndexedDB error during index backfill: ",t):await za(t)}await this.re(6e4)}))}}class _O{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let a=t,l=!0;return U.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!i.has(c))return re(Hu,`Processing collection: ${c}`),this.oe(e,c,a).next((d=>{a-=d,i.add(c)}));l=!1})))).next((()=>t-a))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(a,l))).next((d=>(re(Hu,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>c.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((a,l)=>{const c=xw(l);py(c,i)>0&&(i=c)})),new Pn(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Wn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=-1;function Ad(r){return r==null}function nc(r){return r===0&&1/r==-1/0}function vO(r){return typeof r=="number"&&Number.isInteger(r)&&!nc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf="";function ln(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=kT(e)),e=EO(r.get(t),e);return kT(e)}function EO(r,e){let t=e;const i=r.length;for(let a=0;a<i;a++){const l=r.charAt(a);switch(l){case"\0":t+="";break;case Xf:t+="";break;default:t+=l}}return t}function kT(r){return r+Xf+""}function Hi(r){const e=r.length;if(_e(e>=2,64408,{path:r}),e===2)return _e(r.charAt(0)===Xf&&r.charAt(1)==="",56145,{path:r}),Qe.emptyPath();const t=e-2,i=[];let a="";for(let l=0;l<e;){const c=r.indexOf(Xf,l);switch((c<0||c>t)&&pe(50515,{path:r}),r.charAt(c+1)){case"":const d=r.substring(l,c);let p;a.length===0?p=d:(a+=d,p=a,a=""),i.push(p);break;case"":a+=r.substring(l,c),a+="\0";break;case"":a+=r.substring(l,c+1);break;default:pe(61167,{path:r})}l=c+2}return new Qe(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="remoteDocuments",Tc="owner",Vo="owner",ic="mutationQueues",TO="userId",di="mutations",LT="batchId",Ea="userMutationsIndex",UT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(r,e){return[r,ln(e)]}function Vw(r,e,t){return[r,ln(e),t]}const bO={},Wo="documentMutations",Jf="remoteDocumentsV14",AO=["prefixPath","collectionGroup","readTime","documentId"],Nf="documentKeyIndex",wO=["prefixPath","collectionGroup","documentId"],Mw="collectionGroupIndex",SO=["collectionGroup","readTime","prefixPath","documentId"],rc="remoteDocumentGlobal",wg="remoteDocumentGlobalKey",Zo="targets",Pw="queryTargetsIndex",IO=["canonicalId","targetId"],el="targetDocuments",RO=["targetId","path"],yy="documentTargetsIndex",CO=["path","targetId"],Wf="targetGlobalKey",ba="targetGlobal",sc="collectionParents",xO=["collectionId","parent"],tl="clientMetadata",DO="clientId",wd="bundles",NO="bundleId",Sd="namedQueries",OO="name",_y="indexConfiguration",VO="indexId",Sg="collectionGroupIndex",MO="collectionGroup",Gu="indexState",PO=["indexId","uid"],kw="sequenceNumberIndex",kO=["uid","sequenceNumber"],Ku="indexEntries",LO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Lw="documentKeyIndex",UO=["indexId","uid","orderedDocumentKey"],Id="documentOverlays",jO=["userId","collectionPath","documentId"],Ig="collectionPathOverlayIndex",zO=["userId","collectionPath","largestBatchId"],Uw="collectionGroupOverlayIndex",BO=["userId","collectionGroup","largestBatchId"],vy="globals",qO="name",jw=[ic,di,Wo,pa,Zo,Tc,ba,el,tl,rc,sc,wd,Sd],FO=[...jw,Id],zw=[ic,di,Wo,Jf,Zo,Tc,ba,el,tl,rc,sc,wd,Sd,Id],Bw=zw,Ey=[...Bw,_y,Gu,Ku],HO=Ey,qw=[...Ey,vy],GO=qw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg extends Nw{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Ft(r,e){const t=Ie(r);return Ss.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ms(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Fw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,t){this.comparator=e,this.root=t||tn.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gf(this.root,e,this.comparator,!1)}getReverseIterator(){return new gf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gf(this.root,e,this.comparator,!0)}}class gf{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??tn.RED,this.left=a??tn.EMPTY,this.right=l??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new tn(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return tn.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new tn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zT(this.data.getIterator())}getIteratorFrom(e){return new zT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new et(this.comparator);return t.data=e,t}}class zT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Mo(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort(gt.comparator)}static empty(){return new bn([])}unionWith(e){let t=new et(gt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new bn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Hw("Invalid base64 string: "+l):l}})(e);return new kt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new kt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kt.EMPTY_BYTE_STRING=new kt("");const KO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sr(r){if(_e(!!r,39018),typeof r=="string"){let e=0;const t=KO.exec(r);if(_e(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ft(r.seconds),nanos:ft(r.nanos)}}function ft(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ir(r){return typeof r=="string"?kt.fromBase64String(r):kt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="server_timestamp",Kw="__type__",Qw="__previous_value__",Yw="__local_write_time__";function Ty(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Kw])==null?void 0:i.stringValue)===Gw}function Rd(r){const e=r.mapValue.fields[Qw];return Ty(e)?Rd(e):e}function ac(r){const e=Sr(r.mapValue.fields[Yw].timestampValue);return new We(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,t,i,a,l,c,d,p,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=_}}const Zf="(default)";class Va{constructor(e,t){this.projectId=e,this.database=t||Zf}static empty(){return new Va("","")}get isDefaultDatabase(){return this.database===Zf}isEqual(e){return e instanceof Va&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="__type__",$w="__max__",Es={mapValue:{fields:{__type__:{stringValue:$w}}}},Ay="__vector__",nl="value",Of={nullValue:"NULL_VALUE"};function Rs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Ty(r)?4:Xw(r)?9007199254740991:Cd(r)?10:11:pe(28295,{value:r})}function Ji(r,e){if(r===e)return!0;const t=Rs(r);if(t!==Rs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ac(r).isEqual(ac(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Sr(a.timestampValue),d=Sr(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(a,l){return Ir(a.bytesValue).isEqual(Ir(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(a,l){return ft(a.geoPointValue.latitude)===ft(l.geoPointValue.latitude)&&ft(a.geoPointValue.longitude)===ft(l.geoPointValue.longitude)})(r,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return ft(a.integerValue)===ft(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=ft(a.doubleValue),d=ft(l.doubleValue);return c===d?nc(c)===nc(d):isNaN(c)&&isNaN(d)}return!1})(r,e);case 9:return Jo(r.arrayValue.values||[],e.arrayValue.values||[],Ji);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(jT(c)!==jT(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Ji(c[p],d[p])))return!1;return!0})(r,e);default:return pe(52216,{left:r})}}function oc(r,e){return(r.values||[]).find((t=>Ji(t,e)))!==void 0}function Cs(r,e){if(r===e)return 0;const t=Rs(r),i=Rs(e);if(t!==i)return Se(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Se(r.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=ft(l.integerValue||l.doubleValue),p=ft(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(r,e);case 3:return BT(r.timestampValue,e.timestampValue);case 4:return BT(ac(r),ac(e));case 5:return bg(r.stringValue,e.stringValue);case 6:return(function(l,c){const d=Ir(l),p=Ir(c);return d.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const _=Se(d[g],p[g]);if(_!==0)return _}return Se(d.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Se(ft(l.latitude),ft(c.latitude));return d!==0?d:Se(ft(l.longitude),ft(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return qT(r.arrayValue,e.arrayValue);case 10:return(function(l,c){var A,O,z,Q;const d=l.fields||{},p=c.fields||{},g=(A=d[nl])==null?void 0:A.arrayValue,_=(O=p[nl])==null?void 0:O.arrayValue,T=Se(((z=g==null?void 0:g.values)==null?void 0:z.length)||0,((Q=_==null?void 0:_.values)==null?void 0:Q.length)||0);return T!==0?T:qT(g,_)})(r.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Es.mapValue&&c===Es.mapValue)return 0;if(l===Es.mapValue)return 1;if(c===Es.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},_=Object.keys(g);p.sort(),_.sort();for(let T=0;T<p.length&&T<_.length;++T){const A=bg(p[T],_[T]);if(A!==0)return A;const O=Cs(d[p[T]],g[_[T]]);if(O!==0)return O}return Se(p.length,_.length)})(r.mapValue,e.mapValue);default:throw pe(23264,{he:t})}}function BT(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Se(r,e);const t=Sr(r),i=Sr(e),a=Se(t.seconds,i.seconds);return a!==0?a:Se(t.nanos,i.nanos)}function qT(r,e){const t=r.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=Cs(t[a],i[a]);if(l)return l}return Se(t.length,i.length)}function il(r){return Cg(r)}function Cg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Sr(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Ir(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ue.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=Cg(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${Cg(t.fields[c])}`;return a+"}"})(r.mapValue):pe(61005,{value:r})}function Vf(r){switch(Rs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rd(r);return e?16+Vf(e):16;case 5:return 2*r.stringValue.length;case 6:return Ir(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+Vf(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let a=0;return Ms(i.fields,((l,c)=>{a+=l.length+Vf(c)})),a})(r.mapValue);default:throw pe(13486,{value:r})}}function lc(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function xg(r){return!!r&&"integerValue"in r}function uc(r){return!!r&&"arrayValue"in r}function FT(r){return!!r&&"nullValue"in r}function HT(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Mf(r){return!!r&&"mapValue"in r}function Cd(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[by])==null?void 0:i.stringValue)===Ay}function Qu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ms(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Qu(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qu(r.arrayValue.values[t]);return e}return{...r}}function Xw(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===$w}const Jw={mapValue:{fields:{[by]:{stringValue:Ay},[nl]:{arrayValue:{}}}}};function YO(r){return"nullValue"in r?Of:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?lc(Va.empty(),ue.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?Cd(r)?Jw:{mapValue:{}}:pe(35942,{value:r})}function $O(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?lc(Va.empty(),ue.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?Jw:"mapValue"in r?Cd(r)?{mapValue:{}}:Es:pe(61959,{value:r})}function GT(r,e){const t=Cs(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function KT(r,e){const t=Cs(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.value=e}static empty(){return new an({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Mf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qu(t)}setAll(e){let t=gt.emptyPath(),i={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,a),i={},a=[],t=d.popLast()}c?i[d.lastSegment()]=Qu(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Mf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ji(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Mf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Ms(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new an(Qu(this.value))}}function Ww(r){const e=[];return Ms(r.fields,((t,i)=>{const a=new gt([t]);if(Mf(i)){const l=Ww(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,t,i,a,l,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new vt(e,0,Ee.min(),Ee.min(),Ee.min(),an.empty(),0)}static newFoundDocument(e,t,i,a){return new vt(e,1,t,Ee.min(),i,a,0)}static newNoDocument(e,t){return new vt(e,2,t,Ee.min(),Ee.min(),an.empty(),0)}static newUnknownDocument(e,t){return new vt(e,3,t,Ee.min(),Ee.min(),an.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,t){this.position=e,this.inclusive=t}}function QT(r,e,t){let i=0;for(let a=0;a<r.position.length;a++){const l=e[a],c=r.position[a];if(l.field.isKeyField()?i=ue.comparator(ue.fromName(c.referenceValue),t.key):i=Cs(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function YT(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ji(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,t="asc"){this.field=e,this.dir=t}}function XO(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{}class Ue extends Zw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new JO(e,t,i):t==="array-contains"?new eV(e,i):t==="in"?new sS(e,i):t==="not-in"?new tV(e,i):t==="array-contains-any"?new nV(e,i):new Ue(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new WO(e,i):new ZO(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Cs(t,this.value)):t!==null&&Rs(this.value)===Rs(t)&&this.matchesComparison(Cs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ze extends Zw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ze(e,t)}matches(e){return sl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sl(r){return r.op==="and"}function Dg(r){return r.op==="or"}function wy(r){return eS(r)&&sl(r)}function eS(r){for(const e of r.filters)if(e instanceof Ze)return!1;return!0}function Ng(r){if(r instanceof Ue)return r.field.canonicalString()+r.op.toString()+il(r.value);if(wy(r))return r.filters.map((e=>Ng(e))).join(",");{const e=r.filters.map((t=>Ng(t))).join(",");return`${r.op}(${e})`}}function tS(r,e){return r instanceof Ue?(function(i,a){return a instanceof Ue&&i.op===a.op&&i.field.isEqual(a.field)&&Ji(i.value,a.value)})(r,e):r instanceof Ze?(function(i,a){return a instanceof Ze&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,c,d)=>l&&tS(c,a.filters[d])),!0):!1})(r,e):void pe(19439)}function nS(r,e){const t=r.filters.concat(e);return Ze.create(t,r.op)}function iS(r){return r instanceof Ue?(function(t){return`${t.field.canonicalString()} ${t.op} ${il(t.value)}`})(r):r instanceof Ze?(function(t){return t.op.toString()+" {"+t.getFilters().map(iS).join(" ,")+"}"})(r):"Filter"}class JO extends Ue{constructor(e,t,i){super(e,t,i),this.key=ue.fromName(i.referenceValue)}matches(e){const t=ue.comparator(e.key,this.key);return this.matchesComparison(t)}}class WO extends Ue{constructor(e,t){super(e,"in",t),this.keys=rS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ZO extends Ue{constructor(e,t){super(e,"not-in",t),this.keys=rS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function rS(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>ue.fromName(i.referenceValue)))}class eV extends Ue{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return uc(t)&&oc(t.arrayValue,this.value)}}class sS extends Ue{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&oc(this.value.arrayValue,t)}}class tV extends Ue{constructor(e,t){super(e,"not-in",t)}matches(e){if(oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!oc(this.value.arrayValue,t)}}class nV extends Ue{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!uc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>oc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e,t=null,i=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function Og(r,e=null,t=[],i=[],a=null,l=null,c=null){return new iV(r,e,t,i,a,l,c)}function Ma(r){const e=Ie(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Ng(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Ad(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>il(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>il(i))).join(",")),e.Te=t}return e.Te}function bc(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!XO(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!tS(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!YT(r.startAt,e.startAt)&&YT(r.endAt,e.endAt)}function ed(r){return ue.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function td(r,e){return r.filters.filter((t=>t instanceof Ue&&t.field.isEqual(e)))}function $T(r,e,t){let i=Of,a=!0;for(const l of td(r,e)){let c=Of,d=!0;switch(l.op){case"<":case"<=":c=YO(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=Of}GT({value:i,inclusive:a},{value:c,inclusive:d})<0&&(i=c,a=d)}if(t!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const c=t.position[l];GT({value:i,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}function XT(r,e,t){let i=Es,a=!0;for(const l of td(r,e)){let c=Es,d=!0;switch(l.op){case">=":case">":c=$O(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=Es}KT({value:i,inclusive:a},{value:c,inclusive:d})>0&&(i=c,a=d)}if(t!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const c=t.position[l];KT({value:i,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,t=null,i=[],a=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function rV(r,e,t,i,a,l,c,d){return new vl(r,e,t,i,a,l,c,d)}function Ac(r){return new vl(r)}function JT(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function aS(r){return r.collectionGroup!==null}function Yu(r){const e=Ie(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new et(gt.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new cc(l,i))})),t.has(gt.keyField().canonicalString())||e.Ie.push(new cc(gt.keyField(),i))}return e.Ie}function Zn(r){const e=Ie(r);return e.Ee||(e.Ee=sV(e,Yu(r))),e.Ee}function sV(r,e){if(r.limitType==="F")return Og(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new cc(a.field,l)}));const t=r.endAt?new rl(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new rl(r.startAt.position,r.startAt.inclusive):null;return Og(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function Vg(r,e){const t=r.filters.concat([e]);return new vl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function nd(r,e,t){return new vl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function xd(r,e){return bc(Zn(r),Zn(e))&&r.limitType===e.limitType}function oS(r){return`${Ma(Zn(r))}|lt:${r.limitType}`}function zo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>iS(a))).join(", ")}]`),Ad(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>il(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>il(a))).join(",")),`Target(${i})`})(Zn(r))}; limitType=${r.limitType})`}function wc(r,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ue.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,a){for(const l of Yu(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(r,e)&&(function(i,a){return!(i.startAt&&!(function(c,d,p){const g=QT(c,d,p);return c.inclusive?g<=0:g<0})(i.startAt,Yu(i),a)||i.endAt&&!(function(c,d,p){const g=QT(c,d,p);return c.inclusive?g>=0:g>0})(i.endAt,Yu(i),a))})(r,e)}function aV(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function lS(r){return(e,t)=>{let i=!1;for(const a of Yu(r)){const l=oV(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function oV(r,e,t){const i=r.field.isKeyField()?ue.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?Cs(p,g):pe(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return pe(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ms(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return Fw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV=new pt(ue.comparator);function Vn(){return lV}const uS=new pt(ue.comparator);function Lu(...r){let e=uS;for(const t of r)e=e.insert(t.key,t);return e}function cS(r){let e=uS;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Gi(){return $u()}function hS(){return $u()}function $u(){return new xr((r=>r.toString()),((r,e)=>r.isEqual(e)))}const uV=new pt(ue.comparator),cV=new et(ue.comparator);function Oe(...r){let e=cV;for(const t of r)e=e.add(t);return e}const hV=new et(Se);function fV(){return hV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nc(e)?"-0":e}}function fS(r){return{integerValue:""+r}}function dS(r,e){return vO(e)?fS(e):Sy(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(){this._=void 0}}function dV(r,e,t){return r instanceof al?(function(a,l){const c={fields:{[Kw]:{stringValue:Gw},[Yw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Ty(l)&&(l=Rd(l)),l&&(c.fields[Qw]=l),{mapValue:c}})(t,e):r instanceof ol?pS(r,e):r instanceof ll?gS(r,e):(function(a,l){const c=mS(a,l),d=WT(c)+WT(a.Ae);return xg(c)&&xg(a.Ae)?fS(d):Sy(a.serializer,d)})(r,e)}function mV(r,e,t){return r instanceof ol?pS(r,e):r instanceof ll?gS(r,e):t}function mS(r,e){return r instanceof ul?(function(i){return xg(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class al extends Dd{}class ol extends Dd{constructor(e){super(),this.elements=e}}function pS(r,e){const t=yS(e);for(const i of r.elements)t.some((a=>Ji(a,i)))||t.push(i);return{arrayValue:{values:t}}}class ll extends Dd{constructor(e){super(),this.elements=e}}function gS(r,e){let t=yS(e);for(const i of r.elements)t=t.filter((a=>!Ji(a,i)));return{arrayValue:{values:t}}}class ul extends Dd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function WT(r){return ft(r.integerValue||r.doubleValue)}function yS(r){return uc(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,t){this.field=e,this.transform=t}}function pV(r,e){return r.field.isEqual(e.field)&&(function(i,a){return i instanceof ol&&a instanceof ol||i instanceof ll&&a instanceof ll?Jo(i.elements,a.elements,Ji):i instanceof ul&&a instanceof ul?Ji(i.Ae,a.Ae):i instanceof al&&a instanceof al})(r.transform,e.transform)}class gV{constructor(e,t){this.version=e,this.transformResults=t}}class Bt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bt}static exists(e){return new Bt(void 0,e)}static updateTime(e){return new Bt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Nd{}function _S(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Sc(r.key,Bt.none()):new El(r.key,r.data,Bt.none());{const t=r.data,i=an.empty();let a=new et(gt.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new Dr(r.key,i,new bn(a.toArray()),Bt.none())}}function yV(r,e,t){r instanceof El?(function(a,l,c){const d=a.value.clone(),p=eb(a.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(r,e,t):r instanceof Dr?(function(a,l,c){if(!Pf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=eb(a.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(vS(a)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(r,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Xu(r,e,t,i){return r instanceof El?(function(l,c,d,p){if(!Pf(l.precondition,c))return d;const g=l.value.clone(),_=tb(l.fieldTransforms,p,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(r,e,t,i):r instanceof Dr?(function(l,c,d,p){if(!Pf(l.precondition,c))return d;const g=tb(l.fieldTransforms,p,c),_=c.data;return _.setAll(vS(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(r,e,t,i):(function(l,c,d){return Pf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(r,e,t)}function _V(r,e){let t=null;for(const i of r.fieldTransforms){const a=e.data.field(i.field),l=mS(i.transform,a||null);l!=null&&(t===null&&(t=an.empty()),t.set(i.field,l))}return t||null}function ZT(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Jo(i,a,((l,c)=>pV(l,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class El extends Nd{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Dr extends Nd{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function vS(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function eb(r,e,t){const i=new Map;_e(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let a=0;a<t.length;a++){const l=r[a],c=l.transform,d=e.data.field(l.field);i.set(l.field,mV(c,d,t[a]))}return i}function tb(r,e,t){const i=new Map;for(const a of r){const l=a.transform,c=t.data.field(a.field);i.set(a.field,dV(l,c,e))}return i}class Sc extends Nd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ES extends Nd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&yV(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Xu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Xu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=hS();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const p=_S(c,d);p!==null&&i.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(Ee.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Oe())}isEqual(e){return this.batchId===e.batchId&&Jo(this.mutations,e.mutations,((t,i)=>ZT(t,i)))&&Jo(this.baseMutations,e.baseMutations,((t,i)=>ZT(t,i)))}}class Cy{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){_e(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return uV})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new Cy(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,Be;function EV(r){switch(r){case X.OK:return pe(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return pe(15467,{code:r})}}function TS(r){if(r===void 0)return fn("GRPC error has no .code"),X.UNKNOWN;switch(r){case Mt.OK:return X.OK;case Mt.CANCELLED:return X.CANCELLED;case Mt.UNKNOWN:return X.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return X.INTERNAL;case Mt.UNAVAILABLE:return X.UNAVAILABLE;case Mt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Mt.NOT_FOUND:return X.NOT_FOUND;case Mt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Mt.ABORTED:return X.ABORTED;case Mt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Mt.DATA_LOSS:return X.DATA_LOSS;default:return pe(39323,{code:r})}}(Be=Mt||(Mt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV=new ws([4294967295,4294967295],0);function nb(r){const e=TV().encode(r),t=new _w;return t.update(e),new Uint8Array(t.digest())}function ib(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ws([t,i],0),new ws([a,l],0)]}class Dy{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Uu(`Invalid padding: ${t}`);if(i<0)throw new Uu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Uu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Uu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ws.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(ws.fromNumber(i)));return a.compare(bV)===1&&(a=new ws([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=nb(e),[i,a]=ib(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Dy(l,a,t);return i.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=nb(e),[i,a]=ib(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Uu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Ic.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Od(Ee.min(),a,new pt(Se),Vn(),Oe())}}class Ic{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Ic(i,t,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t,i,a){this.be=e,this.removedTargetIds=t,this.key=i,this.De=a}}class bS{constructor(e,t){this.targetId=e,this.Ce=t}}class AS{constructor(e,t,i=kt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class rb{constructor(){this.ve=0,this.Fe=sb(),this.Me=kt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oe(),t=Oe(),i=Oe();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:pe(38017,{changeType:l})}})),new Ic(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=sb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,_e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class AV{constructor(e){this.Ge=e,this.ze=new Map,this.je=Vn(),this.Je=yf(),this.He=yf(),this.Ye=new pt(Se)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:pe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(ed(l))if(i===0){const c=new ue(l.path);this.et(t,c,vt.newNoDocument(c,Ee.min()))}else _e(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=Ir(i).toUint8Array()}catch(p){if(p instanceof Hw)return Oa("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Dy(c,a,l)}catch(p){return Oa(p instanceof Uu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&ed(d.target)){const p=new ue(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,vt.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let i=Oe();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Od(e,t,this.Ye,this.je,i);return this.je=Vn(),this.Je=yf(),this.He=yf(),this.Ye=new pt(Se),a}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new rb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new et(Se),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new et(Se),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||re("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new rb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function yf(){return new pt(ue.comparator)}function sb(){return new pt(ue.comparator)}const wV={asc:"ASCENDING",desc:"DESCENDING"},SV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IV={and:"AND",or:"OR"};class RV{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Mg(r,e){return r.useProto3Json||Ad(e)?e:{value:e}}function cl(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wS(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function CV(r,e){return cl(r,e.toTimestamp())}function dn(r){return _e(!!r,49232),Ee.fromTimestamp((function(t){const i=Sr(t);return new We(i.seconds,i.nanos)})(r))}function Ny(r,e){return Pg(r,e).canonicalString()}function Pg(r,e){const t=(function(a){return new Qe(["projects",a.projectId,"databases",a.database])})(r).child("documents");return e===void 0?t:t.child(e)}function SS(r){const e=Qe.fromString(r);return _e(MS(e),10190,{key:e.toString()}),e}function id(r,e){return Ny(r.databaseId,e.path)}function Aa(r,e){const t=SS(e);if(t.get(1)!==r.databaseId.projectId)throw new se(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new se(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ue(CS(t))}function IS(r,e){return Ny(r.databaseId,e)}function RS(r){const e=SS(r);return e.length===4?Qe.emptyPath():CS(e)}function kg(r){return new Qe(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function CS(r){return _e(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function ab(r,e,t){return{name:id(r,e),fields:t.value.mapValue.fields}}function xV(r,e,t){const i=Aa(r,e.name),a=dn(e.updateTime),l=e.createTime?dn(e.createTime):Ee.min(),c=new an({mapValue:{fields:e.fields}}),d=vt.newFoundDocument(i,a,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function DV(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:pe(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,_){return g.useProto3Json?(_e(_===void 0||typeof _=="string",58123),kt.fromBase64String(_||"")):(_e(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),kt.fromUint8Array(_||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const _=g.code===void 0?X.UNKNOWN:TS(g.code);return new se(_,g.message||"")})(c);t=new AS(i,a,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Aa(r,i.document.name),l=dn(i.document.updateTime),c=i.document.createTime?dn(i.document.createTime):Ee.min(),d=new an({mapValue:{fields:i.document.fields}}),p=vt.newFoundDocument(a,l,c,d),g=i.targetIds||[],_=i.removedTargetIds||[];t=new kf(g,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Aa(r,i.document),l=i.readTime?dn(i.readTime):Ee.min(),c=vt.newNoDocument(a,l),d=i.removedTargetIds||[];t=new kf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Aa(r,i.document),l=i.removedTargetIds||[];t=new kf([],l,a,null)}else{if(!("filter"in e))return pe(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new vV(a,l),d=i.targetId;t=new bS(d,c)}}return t}function rd(r,e){let t;if(e instanceof El)t={update:ab(r,e.key,e.value)};else if(e instanceof Sc)t={delete:id(r,e.key)};else if(e instanceof Dr)t={update:ab(r,e.key,e.data),updateMask:kV(e.fieldMask)};else{if(!(e instanceof ES))return pe(16599,{Vt:e.type});t={verify:id(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const d=c.transform;if(d instanceof al)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ol)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ll)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof ul)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw pe(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:CV(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:pe(27497)})(r,e.precondition)),t}function Lg(r,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?Bt.updateTime(dn(l.updateTime)):l.exists!==void 0?Bt.exists(l.exists):Bt.none()})(e.currentDocument):Bt.none(),i=e.updateTransforms?e.updateTransforms.map((a=>(function(c,d){let p=null;if("setToServerValue"in d)_e(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),p=new al;else if("appendMissingElements"in d){const _=d.appendMissingElements.values||[];p=new ol(_)}else if("removeAllFromArray"in d){const _=d.removeAllFromArray.values||[];p=new ll(_)}else"increment"in d?p=new ul(c,d.increment):pe(16584,{proto:d});const g=gt.fromServerFormat(d.fieldPath);return new Iy(g,p)})(r,a))):[];if(e.update){e.update.name;const a=Aa(r,e.update.name),l=new an({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(p){const g=p.fieldPaths||[];return new bn(g.map((_=>gt.fromServerFormat(_))))})(e.updateMask);return new Dr(a,l,c,t,i)}return new El(a,l,t,i)}if(e.delete){const a=Aa(r,e.delete);return new Sc(a,t)}if(e.verify){const a=Aa(r,e.verify);return new ES(a,t)}return pe(1463,{proto:e})}function NV(r,e){return r&&r.length>0?(_e(e!==void 0,14353),r.map((t=>(function(a,l){let c=a.updateTime?dn(a.updateTime):dn(l);return c.isEqual(Ee.min())&&(c=dn(l)),new gV(c,a.transformResults||[])})(t,e)))):[]}function xS(r,e){return{documents:[IS(r,e.path)]}}function DS(r,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=IS(r,a);const l=(function(g){if(g.length!==0)return VS(Ze.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((_=>(function(A){return{field:Bo(A.field),direction:VV(A.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Mg(r,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function NS(r){let e=RS(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){_e(i===1,65062);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(T){const A=OS(T);return A instanceof Ze&&wy(A)?A.getFilters():[A]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((A=>(function(z){return new cc(qo(z.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(A)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let A;return A=typeof T=="object"?T.value:T,Ad(A)?null:A})(t.limit));let p=null;t.startAt&&(p=(function(T){const A=!!T.before,O=T.values||[];return new rl(O,A)})(t.startAt));let g=null;return t.endAt&&(g=(function(T){const A=!T.before,O=T.values||[];return new rl(O,A)})(t.endAt)),rV(e,a,c,l,d,"F",p,g)}function OV(r,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function OS(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=qo(t.unaryFilter.field);return Ue.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=qo(t.unaryFilter.field);return Ue.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=qo(t.unaryFilter.field);return Ue.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=qo(t.unaryFilter.field);return Ue.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Ue.create(qo(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Ze.create(t.compositeFilter.filters.map((i=>OS(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return pe(1026)}})(t.compositeFilter.op))})(r):pe(30097,{filter:r})}function VV(r){return wV[r]}function MV(r){return SV[r]}function PV(r){return IV[r]}function Bo(r){return{fieldPath:r.canonicalString()}}function qo(r){return gt.fromServerFormat(r.fieldPath)}function VS(r){return r instanceof Ue?(function(t){if(t.op==="=="){if(HT(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NAN"}};if(FT(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(HT(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NOT_NAN"}};if(FT(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bo(t.field),op:MV(t.op),value:t.value}}})(r):r instanceof Ze?(function(t){const i=t.getFilters().map((a=>VS(a)));return i.length===1?i[0]:{compositeFilter:{op:PV(t.op),filters:i}}})(r):pe(54877,{filter:r})}function kV(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function MS(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,t,i,a,l=Ee.min(),c=Ee.min(),d=kt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e){this.yt=e}}function LV(r,e){let t;if(e.document)t=xV(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=ue.fromSegments(e.noDocument.path),a=ka(e.noDocument.readTime);t=vt.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return pe(56709);{const i=ue.fromSegments(e.unknownDocument.path),a=ka(e.unknownDocument.version);t=vt.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime((function(a){const l=new We(a[0],a[1]);return Ee.fromTimestamp(l)})(e.readTime)),t}function ob(r,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:sd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(l,c){return{name:id(l,c.key),fields:c.data.value.mapValue.fields,updateTime:cl(l,c.version.toTimestamp()),createTime:cl(l,c.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Pa(e.version)};else{if(!e.isUnknownDocument())return pe(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:Pa(e.version)}}return i}function sd(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Pa(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ka(r){const e=new We(r.seconds,r.nanoseconds);return Ee.fromTimestamp(e)}function ya(r,e){const t=(e.baseMutations||[]).map((l=>Lg(r.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const i=e.mutations.map((l=>Lg(r.yt,l))),a=We.fromMillis(e.localWriteTimeMs);return new Ry(e.batchId,a,t,i)}function ju(r){const e=ka(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?ka(r.lastLimboFreeSnapshotVersion):Ee.min();let i;return i=(function(l){return l.documents!==void 0})(r.query)?(function(l){const c=l.documents.length;return _e(c===1,1966,{count:c}),Zn(Ac(RS(l.documents[0])))})(r.query):(function(l){return Zn(NS(l))})(r.query),new vr(i,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,kt.fromBase64String(r.resumeToken))}function kS(r,e){const t=Pa(e.snapshotVersion),i=Pa(e.lastLimboFreeSnapshotVersion);let a;a=ed(e.target)?xS(r.yt,e.target):DS(r.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ma(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function LS(r){const e=NS({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?nd(e,e.limit,"L"):e}function ig(r,e){return new xy(e.largestBatchId,Lg(r.yt,e.overlayMutation))}function lb(r,e){const t=e.path.lastSegment();return[r,ln(e.path.popLast()),t]}function ub(r,e,t,i){return{indexId:r,uid:e,sequenceNumber:t,readTime:Pa(i.readTime),documentKey:ln(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{getBundleMetadata(e,t){return cb(e).get(t).next((i=>{if(i)return(function(l){return{id:l.bundleId,createTime:ka(l.createTime),version:l.version}})(i)}))}saveBundleMetadata(e,t){return cb(e).put((function(a){return{bundleId:a.id,createTime:Pa(dn(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return hb(e).get(t).next((i=>{if(i)return(function(l){return{name:l.name,query:LS(l.bundledQuery),readTime:ka(l.readTime)}})(i)}))}saveNamedQuery(e,t){return hb(e).put((function(a){return{name:a.name,readTime:Pa(dn(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function cb(r){return Ft(r,wd)}function hb(r){return Ft(r,Sd)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new Vd(e,i)}getOverlay(e,t){return xu(e).get(lb(this.userId,t)).next((i=>i?ig(this.serializer,i):null))}getOverlays(e,t){const i=Gi();return U.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){const a=[];return i.forEach(((l,c)=>{const d=new xy(t,c);a.push(this.St(e,d))})),U.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach((c=>a.add(ln(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);l.push(xu(e).Z(Ig,d))})),U.waitFor(l)}getOverlaysForCollection(e,t,i){const a=Gi(),l=ln(t),c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return xu(e).J(Ig,c).next((d=>{for(const p of d){const g=ig(this.serializer,p);a.set(g.getKey(),g)}return a}))}getOverlaysForCollectionGroup(e,t,i,a){const l=Gi();let c;const d=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return xu(e).ee({index:Uw,range:d},((p,g,_)=>{const T=ig(this.serializer,g);l.size()<a||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):_.done()})).next((()=>l))}St(e,t){return xu(e).put((function(a,l,c){const[d,p,g]=lb(l,c.mutation.key);return{userId:l,collectionPath:p,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:rd(a.yt,c.mutation)}})(this.serializer,this.userId,t))}}function xu(r){return Ft(r,Id)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{bt(e){return Ft(e,vy)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const i=t==null?void 0:t.value;return i?kt.fromUint8Array(i):kt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ft(e.integerValue));else if("doubleValue"in e){const i=ft(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),nc(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=Sr(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Ir(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?Xw(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Cd(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):pe(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const i=e.fields||{};this.Ft(t,55);for(const a of Object.keys(i))this.Ot(a,t),this.Ct(i[a],t)}kt(e,t){var c,d;const i=e.fields||{};this.Ft(t,53);const a=nl,l=((d=(c=i[a].arrayValue)==null?void 0:c.values)==null?void 0:d.length)||0;this.Ft(t,15),t.Mt(ft(l)),this.Ot(a,t),this.Ct(i[a],t)}Qt(e,t){const i=e.values||[];this.Ft(t,50);for(const a of i)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),ue.fromName(e).path.forEach((i=>{this.Ft(t,60),this.Ut(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}_a.Kt=new _a;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=255;function zV(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function fb(r){const e=64-(function(i){let a=0;for(let l=0;l<8;++l){const c=zV(255&i[l]);if(a+=c,c!==8)break}return a})(r);return Math.ceil(e/8)}class BV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Jt(i.value),i=t.next();this.Ht()}Yt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const a=t.codePointAt(0);this.Jt(240|a>>>18),this.Jt(128|63&a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a)}}this.Ht()}Xt(e){const t=this.en(e),i=fb(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),i=fb(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(Po),this.sn(255)}_n(){this.an(Po),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Po?(this.sn(Po),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Po?(this.an(Po),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class qV{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class FV{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Du{constructor(){this.cn=new BV,this.ln=new qV(this.cn),this.hn=new FV(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,t,i,a){this.Tn=e,this.In=t,this.En=i,this.dn=a}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.dn,0),t!==e?i.set([0],this.dn.length):++i[i.length-1],new va(this.Tn,this.In,this.En,i)}Rn(e,t,i){return{indexId:this.Tn,uid:e,arrayValue:Lf(this.En),directionalValue:Lf(this.dn),orderedDocumentKey:Lf(t),documentKey:i.path.toArray()}}Vn(e,t,i){const a=this.Rn(e,t,i);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function fs(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=db(r.En,e.En),t!==0?t:(t=db(r.dn,e.dn),t!==0?t:ue.comparator(r.In,e.In)))}function db(r,e){for(let t=0;t<r.length&&t<e.length;++t){const i=r[t]-e[t];if(i!==0)return i}return r.length-e.length}function Lf(r){return CA()?(function(t){let i="";for(let a=0;a<t.length;a++)i+=String.fromCharCode(t[a]);return i})(r):r}function mb(r){return typeof r!="string"?r:(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(r)}class pb{constructor(e){this.mn=new et(((t,i)=>gt.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const i=t;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(_e(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Ag(e);if(t!==void 0&&!this.wn(t))return!1;const i=ma(e);let a=new Set,l=0,c=0;for(;l<i.length&&this.wn(i[l]);++l)a=a.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.mn.size>0){const d=this.mn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const p=i[l];if(!this.Sn(d,p)||!this.bn(this.fn[c++],p))return!1}++l}for(;l<i.length;++l){const d=i[l];if(c>=this.fn.length||!this.bn(this.fn[c++],d))return!1}return!0}Dn(){if(this.pn)return null;let e=new et(gt.comparator);const t=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new xf(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new xf(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new xf(i.field,i.dir==="asc"?0:1)));return new $f($f.UNKNOWN_ID,this.collectionId,t,tc.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(r){var t,i;if(_e(r instanceof Ue||r instanceof Ze,20012),r instanceof Ue){if(r instanceof sS){const a=((i=(t=r.value.arrayValue)==null?void 0:t.values)==null?void 0:i.map((l=>Ue.create(r.field,"==",l))))||[];return Ze.create(a,"or")}return r}const e=r.filters.map((a=>US(a)));return Ze.create(e,r.op)}function HV(r){if(r.getFilters().length===0)return[];const e=zg(US(r));return _e(jS(e),7391),Ug(e)||jg(e)?[e]:e.getFilters()}function Ug(r){return r instanceof Ue}function jg(r){return r instanceof Ze&&wy(r)}function jS(r){return Ug(r)||jg(r)||(function(t){if(t instanceof Ze&&Dg(t)){for(const i of t.getFilters())if(!Ug(i)&&!jg(i))return!1;return!0}return!1})(r)}function zg(r){if(_e(r instanceof Ue||r instanceof Ze,34018),r instanceof Ue)return r;if(r.filters.length===1)return zg(r.filters[0]);const e=r.filters.map((i=>zg(i)));let t=Ze.create(e,r.op);return t=ad(t),jS(t)?t:(_e(t instanceof Ze,64498),_e(sl(t),40251),_e(t.filters.length>1,57927),t.filters.reduce(((i,a)=>Oy(i,a))))}function Oy(r,e){let t;return _e(r instanceof Ue||r instanceof Ze,38388),_e(e instanceof Ue||e instanceof Ze,25473),t=r instanceof Ue?e instanceof Ue?(function(a,l){return Ze.create([a,l],"and")})(r,e):gb(r,e):e instanceof Ue?gb(e,r):(function(a,l){if(_e(a.filters.length>0&&l.filters.length>0,48005),sl(a)&&sl(l))return nS(a,l.getFilters());const c=Dg(a)?a:l,d=Dg(a)?l:a,p=c.filters.map((g=>Oy(g,d)));return Ze.create(p,"or")})(r,e),ad(t)}function gb(r,e){if(sl(e))return nS(e,r.getFilters());{const t=e.filters.map((i=>Oy(r,i)));return Ze.create(t,"or")}}function ad(r){if(_e(r instanceof Ue||r instanceof Ze,11850),r instanceof Ue)return r;const e=r.getFilters();if(e.length===1)return ad(e[0]);if(eS(r))return r;const t=e.map((a=>ad(a))),i=[];return t.forEach((a=>{a instanceof Ue?i.push(a):a instanceof Ze&&(a.op===r.op?i.push(...a.filters):i.push(a))})),i.length===1?i[0]:Ze.create(i,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(){this.Cn=new Vy}addToCollectionParentIndex(e,t){return this.Cn.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(Pn.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(Pn.min())}updateCollectionGroup(e,t,i){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}}class Vy{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new et(Qe.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new et(Qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="IndexedDbIndexManager",_f=new Uint8Array(0);class KV{constructor(e,t){this.databaseId=t,this.vn=new Vy,this.Fn=new xr((i=>Ma(i)),((i,a)=>bc(i,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const l={collectionId:i,parent:ln(a)};return _b(e).put(l)}return U.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[Iw(t),""],!1,!0);return _b(e).J(a).next((l=>{for(const c of l){if(c.collectionId!==t)break;i.push(Hi(c.parent))}return i}))}addFieldIndex(e,t){const i=Nu(e),a=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((p=>[p.fieldPath.canonicalString(),p.kind]))}})(t);delete a.indexId;const l=i.add(a);if(t.indexState){const c=Lo(e);return l.next((d=>{c.put(ub(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const i=Nu(e),a=Lo(e),l=ko(e);return i.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Nu(e),i=ko(e),a=Lo(e);return t.Z().next((()=>i.Z())).next((()=>a.Z()))}createTargetIndexes(e,t){return U.forEach(this.Mn(t),(i=>this.getIndexType(e,i).next((a=>{if(a===0||a===1){const l=new pb(i).Dn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const i=ko(e);let a=!0;const l=new Map;return U.forEach(this.Mn(t),(c=>this.xn(e,c).next((d=>{a&&(a=!!d),l.set(c,d)})))).next((()=>{if(a){let c=Oe();const d=[];return U.forEach(l,((p,g)=>{re(yb,`Using index ${(function(H){return`id=${H.indexId}|cg=${H.collectionGroup}|f=${H.fields.map((ae=>`${ae.fieldPath}:${ae.kind}`)).join(",")}`})(p)} to execute ${Ma(t)}`);const _=(function(H,ae){const fe=Ag(ae);if(fe===void 0)return null;for(const le of td(H,fe.fieldPath))switch(le.op){case"array-contains-any":return le.value.arrayValue.values||[];case"array-contains":return[le.value]}return null})(g,p),T=(function(H,ae){const fe=new Map;for(const le of ma(ae))for(const R of td(H,le.fieldPath))switch(R.op){case"==":case"in":fe.set(le.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return fe.set(le.fieldPath.canonicalString(),R.value),Array.from(fe.values())}return null})(g,p),A=(function(H,ae){const fe=[];let le=!0;for(const R of ma(ae)){const I=R.kind===0?$T(H,R.fieldPath,H.startAt):XT(H,R.fieldPath,H.startAt);fe.push(I.value),le&&(le=I.inclusive)}return new rl(fe,le)})(g,p),O=(function(H,ae){const fe=[];let le=!0;for(const R of ma(ae)){const I=R.kind===0?XT(H,R.fieldPath,H.endAt):$T(H,R.fieldPath,H.endAt);fe.push(I.value),le&&(le=I.inclusive)}return new rl(fe,le)})(g,p),z=this.On(p,g,A),Q=this.On(p,g,O),q=this.Nn(p,g,T),Z=this.Bn(p.indexId,_,z,A.inclusive,Q,O.inclusive,q);return U.forEach(Z,(ie=>i.Y(ie,t.limit).next((H=>{H.forEach((ae=>{const fe=ue.fromSegments(ae.documentKey);c.has(fe)||(c=c.add(fe),d.push(fe))}))}))))})).next((()=>d))}return U.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=HV(Ze.create(e.filters,"and")).map((i=>Og(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,i,a,l,c,d){const p=(t!=null?t.length:1)*Math.max(i.length,l.length),g=p/(t!=null?t.length:1),_=[];for(let T=0;T<p;++T){const A=t?this.Ln(t[T/g]):_f,O=this.kn(e,A,i[T%g],a),z=this.qn(e,A,l[T%g],c),Q=d.map((q=>this.kn(e,A,q,!0)));_.push(...this.createRange(O,z,Q))}return _}kn(e,t,i,a){const l=new va(e,ue.empty(),t,i);return a?l:l.An()}qn(e,t,i,a){const l=new va(e,ue.empty(),t,i);return a?l.An():l}xn(e,t){const i=new pb(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let c=null;for(const d of l)i.yn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c}))}getIndexType(e,t){let i=2;const a=this.Mn(t);return U.forEach(a,(l=>this.xn(e,l).next((c=>{c?i!==0&&c.fields.length<(function(p){let g=new et(gt.comparator),_=!1;for(const T of p.filters)for(const A of T.getFlattenedFilters())A.field.isKeyField()||(A.op==="array-contains"||A.op==="array-contains-any"?_=!0:g=g.add(A.field));for(const T of p.orderBy)T.field.isKeyField()||(g=g.add(T.field));return g.size+(_?1:0)})(l)&&(i=1):i=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&i===2?1:i))}Qn(e,t){const i=new Du;for(const a of ma(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=i.Pn(a.kind);_a.Kt.Dt(l,c)}return i.un()}Ln(e){const t=new Du;return _a.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const i=new Du;return _a.Kt.Dt(lc(this.databaseId,t),i.Pn((function(l){const c=ma(l);return c.length===0?0:c[c.length-1].kind})(e))),i.un()}Nn(e,t,i){if(i===null)return[];let a=[];a.push(new Du);let l=0;for(const c of ma(e)){const d=i[l++];for(const p of a)if(this.Un(t,c.fieldPath)&&uc(d))a=this.Kn(a,c,d);else{const g=p.Pn(c.kind);_a.Kt.Dt(d,g)}}return this.Wn(a)}On(e,t,i){return this.Nn(e,t,i.position)}Wn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Kn(e,t,i){const a=[...e],l=[];for(const c of i.arrayValue.values||[])for(const d of a){const p=new Du;p.seed(d.un()),_a.Kt.Dt(c,p.Pn(t.kind)),l.push(p)}return l}Un(e,t){return!!e.filters.find((i=>i instanceof Ue&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=Nu(e),a=Lo(e);return(t?i.J(Sg,IDBKeyRange.bound(t,t)):i.J()).next((l=>{const c=[];return U.forEach(l,(d=>a.get([d.indexId,this.uid]).next((p=>{c.push((function(_,T){const A=T?new tc(T.sequenceNumber,new Pn(ka(T.readTime),new ue(Hi(T.documentKey)),T.largestBatchId)):tc.empty(),O=_.fields.map((([z,Q])=>new xf(gt.fromServerFormat(z),Q)));return new $f(_.indexId,_.collectionGroup,O,A)})(d,p))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Se(i.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const a=Nu(e),l=Lo(e);return this.Gn(e).next((c=>a.J(Sg,IDBKeyRange.bound(t,t)).next((d=>U.forEach(d,(p=>l.put(ub(p.indexId,this.uid,c,i))))))))}updateIndexEntries(e,t){const i=new Map;return U.forEach(t,((a,l)=>{const c=i.get(a.collectionGroup);return(c?U.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((d=>(i.set(a.collectionGroup,d),U.forEach(d,(p=>this.zn(e,a,p).next((g=>{const _=this.jn(l,p);return g.isEqual(_)?U.resolve():this.Jn(e,l,p,g,_)})))))))}))}Hn(e,t,i,a){return ko(e).put(a.Rn(this.uid,this.$n(i,t.key),t.key))}Yn(e,t,i,a){return ko(e).delete(a.Vn(this.uid,this.$n(i,t.key),t.key))}zn(e,t,i){const a=ko(e);let l=new et(fs);return a.ee({index:Lw,range:IDBKeyRange.only([i.indexId,this.uid,Lf(this.$n(i,t))])},((c,d)=>{l=l.add(new va(i.indexId,t,mb(d.arrayValue),mb(d.directionalValue)))})).next((()=>l))}jn(e,t){let i=new et(fs);const a=this.Qn(t,e);if(a==null)return i;const l=Ag(t);if(l!=null){const c=e.data.field(l.fieldPath);if(uc(c))for(const d of c.arrayValue.values||[])i=i.add(new va(t.indexId,e.key,this.Ln(d),a))}else i=i.add(new va(t.indexId,e.key,_f,a));return i}Jn(e,t,i,a,l){re(yb,"Updating index entries for document '%s'",t.key);const c=[];return(function(p,g,_,T,A){const O=p.getIterator(),z=g.getIterator();let Q=Mo(O),q=Mo(z);for(;Q||q;){let Z=!1,ie=!1;if(Q&&q){const H=_(Q,q);H<0?ie=!0:H>0&&(Z=!0)}else Q!=null?ie=!0:Z=!0;Z?(T(q),q=Mo(z)):ie?(A(Q),Q=Mo(O)):(Q=Mo(O),q=Mo(z))}})(a,l,fs,(d=>{c.push(this.Hn(e,t,i,d))}),(d=>{c.push(this.Yn(e,t,i,d))})),U.waitFor(c)}Gn(e){let t=1;return Lo(e).ee({index:kw,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((c,d)=>fs(c,d))).filter(((c,d,p)=>!d||fs(c,p[d-1])!==0));const a=[];a.push(e);for(const c of i){const d=fs(c,e),p=fs(c,t);if(d===0)a[0]=e.An();else if(d>0&&p<0)a.push(c),a.push(c.An());else if(p>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Zn(a[c],a[c+1]))return[];const d=a[c].Vn(this.uid,_f,ue.empty()),p=a[c+1].Vn(this.uid,_f,ue.empty());l.push(IDBKeyRange.bound(d,p))}return l}Zn(e,t){return fs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(vb)}getMinOffset(e,t){return U.mapArray(this.Mn(t),(i=>this.xn(e,i).next((a=>a||pe(44426))))).next(vb)}}function _b(r){return Ft(r,sc)}function ko(r){return Ft(r,Ku)}function Nu(r){return Ft(r,_y)}function Lo(r){return Ft(r,Gu)}function vb(r){_e(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<r.length;i++){const a=r[i].indexState.offset;py(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Pn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zS=41943040;class sn{static withCacheSize(e){return new sn(e,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(r,e,t){const i=r.store(di),a=r.store(Wo),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const p=i.ee({range:c},((_,T,A)=>(d++,A.delete())));l.push(p.next((()=>{_e(d===1,47070,{batchId:t.batchId})})));const g=[];for(const _ of t.mutations){const T=Vw(e,_.key.path,t.batchId);l.push(a.delete(T)),g.push(_.key)}return U.waitFor(l).next((()=>g))}function od(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw pe(14731);e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(zS,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);class Md{constructor(e,t,i,a){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=a,this.Xn={}}static wt(e,t,i,a){_e(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new Md(l,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ds(e).ee({index:Ea,range:i},((a,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,i,a){const l=Fo(e),c=ds(e);return c.add({}).next((d=>{_e(typeof d=="number",49019);const p=new Ry(d,t,i,a),g=(function(O,z,Q){const q=Q.baseMutations.map((ie=>rd(O.yt,ie))),Z=Q.mutations.map((ie=>rd(O.yt,ie)));return{userId:z,batchId:Q.batchId,localWriteTimeMs:Q.localWriteTime.toMillis(),baseMutations:q,mutations:Z}})(this.serializer,this.userId,p),_=[];let T=new et(((A,O)=>Se(A.canonicalString(),O.canonicalString())));for(const A of a){const O=Vw(this.userId,A.key.path,d);T=T.add(A.key.path.popLast()),_.push(c.put(g)),_.push(l.put(O,bO))}return T.forEach((A=>{_.push(this.indexManager.addToCollectionParentIndex(e,A))})),e.addOnCommittedListener((()=>{this.Xn[d]=p.keys()})),U.waitFor(_).next((()=>p))}))}lookupMutationBatch(e,t){return ds(e).get(t).next((i=>i?(_e(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),ya(this.serializer,i)):null))}er(e,t){return this.Xn[t]?U.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const a=i.keys();return this.Xn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return ds(e).ee({index:Ea,range:a},((c,d,p)=>{d.userId===this.userId&&(_e(d.batchId>=i,47524,{tr:i}),l=ya(this.serializer,d)),p.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Ta;return ds(e).ee({index:Ea,range:t,reverse:!0},((a,l,c)=>{i=l.batchId,c.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Ta],[this.userId,Number.POSITIVE_INFINITY]);return ds(e).J(Ea,t).next((i=>i.map((a=>ya(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Df(this.userId,t.path),a=IDBKeyRange.lowerBound(i),l=[];return Fo(e).ee({range:a},((c,d,p)=>{const[g,_,T]=c,A=Hi(_);if(g===this.userId&&t.path.isEqual(A))return ds(e).get(T).next((O=>{if(!O)throw pe(61480,{nr:c,batchId:T});_e(O.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:O.userId,batchId:T}),l.push(ya(this.serializer,O))}));p.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new et(Se);const a=[];return t.forEach((l=>{const c=Df(this.userId,l.path),d=IDBKeyRange.lowerBound(c),p=Fo(e).ee({range:d},((g,_,T)=>{const[A,O,z]=g,Q=Hi(O);A===this.userId&&l.path.isEqual(Q)?i=i.add(z):T.done()}));a.push(p)})),U.waitFor(a).next((()=>this.rr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,l=Df(this.userId,i),c=IDBKeyRange.lowerBound(l);let d=new et(Se);return Fo(e).ee({range:c},((p,g,_)=>{const[T,A,O]=p,z=Hi(A);T===this.userId&&i.isPrefixOf(z)?z.length===a&&(d=d.add(O)):_.done()})).next((()=>this.rr(e,d)))}rr(e,t){const i=[],a=[];return t.forEach((l=>{a.push(ds(e).get(l).next((c=>{if(c===null)throw pe(35274,{batchId:l});_e(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),i.push(ya(this.serializer,c))})))})),U.waitFor(a).next((()=>i))}removeMutationBatch(e,t){return BS(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),U.forEach(i,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return U.resolve();const i=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return Fo(e).ee({range:i},((l,c,d)=>{if(l[0]===this.userId){const p=Hi(l[1]);a.push(p)}else d.done()})).next((()=>{_e(a.length===0,56720,{sr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return qS(e,this.userId,t)}_r(e){return FS(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Ta,lastStreamToken:""}))}}function qS(r,e,t){const i=Df(e,t.path),a=i[1],l=IDBKeyRange.lowerBound(i);let c=!1;return Fo(r).ee({range:l,X:!0},((d,p,g)=>{const[_,T,A]=d;_===e&&T===a&&(c=!0),g.done()})).next((()=>c))}function ds(r){return Ft(r,di)}function Fo(r){return Ft(r,Wo)}function FS(r){return Ft(r,ic)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new La(0)}static cr(){return new La(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const i=new La(t.highestTargetId);return t.highestTargetId=i.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ee.fromTimestamp(new We(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.lr(e).next((a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.hr(e,a))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((i=>(i.targetCount+=1,this.Tr(t,i),this.hr(e,i))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Uo(e).delete(t.targetId))).next((()=>this.lr(e))).next((i=>(_e(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i))))}removeTargets(e,t,i){let a=0;const l=[];return Uo(e).ee(((c,d)=>{const p=ju(d);p.sequenceNumber<=t&&i.get(p.targetId)===null&&(a++,l.push(this.removeTargetData(e,p)))})).next((()=>U.waitFor(l))).next((()=>a))}forEachTarget(e,t){return Uo(e).ee(((i,a)=>{const l=ju(a);t(l)}))}lr(e){return Tb(e).get(Wf).next((t=>(_e(t!==null,2888),t)))}hr(e,t){return Tb(e).put(Wf,t)}Pr(e,t){return Uo(e).put(kS(this.serializer,t))}Tr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const i=Ma(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return Uo(e).ee({range:a,index:Pw},((c,d,p)=>{const g=ju(d);bc(t,g.target)&&(l=g,p.done())})).next((()=>l))}addMatchingKeys(e,t,i){const a=[],l=vs(e);return t.forEach((c=>{const d=ln(c.path);a.push(l.put({targetId:i,path:d})),a.push(this.referenceDelegate.addReference(e,i,c))})),U.waitFor(a)}removeMatchingKeys(e,t,i){const a=vs(e);return U.forEach(t,(l=>{const c=ln(l.path);return U.waitFor([a.delete([i,c]),this.referenceDelegate.removeReference(e,i,l)])}))}removeMatchingKeysForTargetId(e,t){const i=vs(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=vs(e);let l=Oe();return a.ee({range:i,X:!0},((c,d,p)=>{const g=Hi(c[1]),_=new ue(g);l=l.add(_)})).next((()=>l))}containsKey(e,t){const i=ln(t.path),a=IDBKeyRange.bound([i],[Iw(i)],!1,!0);let l=0;return vs(e).ee({index:yy,X:!0,range:a},(([c,d],p,g)=>{c!==0&&(l++,g.done())})).next((()=>l>0))}At(e,t){return Uo(e).get(t).next((i=>i?ju(i):null))}}function Uo(r){return Ft(r,Zo)}function Tb(r){return Ft(r,ba)}function vs(r){return Ft(r,el)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb="LruGarbageCollector",YV=1048576;function Ab([r,e],[t,i]){const a=Se(r,t);return a===0?Se(e,i):a}class $V{constructor(e){this.Ir=e,this.buffer=new et(Ab),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Ab(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class HS{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(bb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Vs(t)?re(bb,"Ignoring IndexedDB error during garbage collection: ",t):await za(t)}await this.Vr(3e5)}))}}class XV{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return U.resolve(Wn.ce);const i=new $V(t);return this.mr.forEachTarget(e,(a=>i.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>i.Ar(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(Eb)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Eb):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,a,l,c,d,p,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(e,a)))).next((T=>(i=T,d=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(g=Date.now(),jo()<=Le.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${T} documents in `+(g-p)+`ms
Total Duration: ${g-_}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T}))))}}function GS(r,e){return new XV(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e,t){this.db=e,this.garbageCollector=GS(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((i,a)=>t(a)))}addReference(e,t,i){return vf(e,i)}removeReference(e,t,i){return vf(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return vf(e,t)}br(e,t){return(function(a,l){let c=!1;return FS(a).te((d=>qS(a,d,l).next((p=>(p&&(c=!0),U.resolve(!p)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Sr(e,((c,d)=>{if(d<=t){const p=this.br(e,c).next((g=>{if(!g)return l++,i.getEntry(e,c).next((()=>(i.removeEntry(c,Ee.min()),vs(e).delete((function(T){return[0,ln(T.path)]})(c)))))}));a.push(p)}})).next((()=>U.waitFor(a))).next((()=>i.apply(e))).next((()=>l))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return vf(e,t)}Sr(e,t){const i=vs(e);let a,l=Wn.ce;return i.ee({index:yy},(([c,d],{path:p,sequenceNumber:g})=>{c===0?(l!==Wn.ce&&t(new ue(Hi(a)),l),l=g,a=p):l=Wn.ce})).next((()=>{l!==Wn.ce&&t(new ue(Hi(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function vf(r,e){return vs(r).put((function(i,a){return{targetId:0,path:ln(i.path),sequenceNumber:a}})(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(){this.changes=new xr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?U.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return fa(e).put(i)}removeEntry(e,t,i){return fa(e).delete((function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],sd(c),d[d.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.Dr(e,i))))}getEntry(e,t){let i=vt.newInvalidDocument(t);return fa(e).ee({index:Nf,range:IDBKeyRange.only(Ou(t))},((a,l)=>{i=this.Cr(t,l)})).next((()=>i))}vr(e,t){let i={size:0,document:vt.newInvalidDocument(t)};return fa(e).ee({index:Nf,range:IDBKeyRange.only(Ou(t))},((a,l)=>{i={document:this.Cr(t,l),size:od(l)}})).next((()=>i))}getEntries(e,t){let i=Vn();return this.Fr(e,t,((a,l)=>{const c=this.Cr(a,l);i=i.insert(a,c)})).next((()=>i))}Mr(e,t){let i=Vn(),a=new pt(ue.comparator);return this.Fr(e,t,((l,c)=>{const d=this.Cr(l,c);i=i.insert(l,d),a=a.insert(l,od(c))})).next((()=>({documents:i,Or:a})))}Fr(e,t,i){if(t.isEmpty())return U.resolve();let a=new et(Ib);t.forEach((p=>a=a.add(p)));const l=IDBKeyRange.bound(Ou(a.first()),Ou(a.last())),c=a.getIterator();let d=c.getNext();return fa(e).ee({index:Nf,range:l},((p,g,_)=>{const T=ue.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;d&&Ib(d,T)<0;)i(d,null),d=c.getNext();d&&d.isEqual(T)&&(i(d,g),d=c.hasNext()?c.getNext():null),d?_.j(Ou(d)):_.done()})).next((()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,i,a,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),sd(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fa(e).J(IDBKeyRange.bound(d,p,!0)).next((g=>{l==null||l.incrementDocumentReadCount(g.length);let _=Vn();for(const T of g){const A=this.Cr(ue.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);A.isFoundDocument()&&(wc(t,A)||a.has(A.key))&&(_=_.insert(A.key,A))}return _}))}getAllFromCollectionGroup(e,t,i,a){let l=Vn();const c=Sb(t,i),d=Sb(t,Pn.max());return fa(e).ee({index:Mw,range:IDBKeyRange.bound(c,d,!0)},((p,g,_)=>{const T=this.Cr(ue.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(T.key,T),l.size===a&&_.done()})).next((()=>l))}newChangeBuffer(e){return new ZV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return wb(e).get(wg).next((t=>(_e(!!t,20021),t)))}Dr(e,t){return wb(e).put(wg,t)}Cr(e,t){if(t){const i=LV(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Ee.min())))return i}return vt.newInvalidDocument(e)}}function QS(r){return new WV(r)}class ZV extends KS{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new xr((i=>i.toString()),((i,a)=>i.isEqual(a)))}applyChanges(e){const t=[];let i=0,a=new et(((l,c)=>Se(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const d=this.Br.get(l);if(t.push(this.Nr.removeEntry(e,l,d.readTime)),c.isValidDocument()){const p=ob(this.Nr.serializer,c);a=a.add(l.path.popLast());const g=od(p);i+=g-d.size,t.push(this.Nr.addEntry(e,l,p))}else if(i-=d.size,this.trackRemovals){const p=ob(this.Nr.serializer,c.convertToNoDocument(Ee.min()));t.push(this.Nr.addEntry(e,l,p))}})),a.forEach((l=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Nr.updateMetadata(e,i)),U.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((i=>(this.Br.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:i,Or:a})=>(a.forEach(((l,c)=>{this.Br.set(l,{size:c,readTime:i.get(l).readTime})})),i)))}}function wb(r){return Ft(r,rc)}function fa(r){return Ft(r,Jf)}function Ou(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Sb(r,e){const t=e.documentKey.path.toArray();return[r,sd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ib(r,e){const t=r.path.toArray(),i=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<i.length-2;++l)if(a=Se(t[l],i[l]),a)return a;return a=Se(t.length,i.length),a||(a=Se(t[t.length-2],i[i.length-2]),a||Se(t[t.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&Xu(i.mutation,a,bn.empty(),We.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Oe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Oe()){const a=Gi();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let c=Lu();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=Gi();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Oe())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,i,a){let l=Vn();const c=$u(),d=(function(){return $u()})();return t.forEach(((p,g)=>{const _=i.get(g.key);a.has(g.key)&&(_===void 0||_.mutation instanceof Dr)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),Xu(_.mutation,g,_.mutation.getFieldMask(),We.now())):c.set(g.key,bn.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,_)=>c.set(g,_))),t.forEach(((g,_)=>d.set(g,new eM(_,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=$u();let a=new pt(((c,d)=>c-d)),l=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let _=i.get(p)||bn.empty();_=d.applyToLocalView(g,_),i.set(p,_);const T=(a.get(d.batchId)||Oe()).add(p);a=a.insert(d.batchId,T)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,_=p.value,T=hS();_.forEach((A=>{if(!l.has(A)){const O=_S(t.get(A),i.get(A));O!==null&&T.set(A,O),l=l.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,T))}return U.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return(function(c){return ue.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):aS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):U.resolve(Gi());let d=ec,p=l;return c.next((g=>U.forEach(g,((_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(_)?U.resolve():this.remoteDocumentCache.getEntry(e,_).next((A=>{p=p.insert(_,A)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,Oe()))).next((_=>({batchId:d,changes:cS(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ue(t)).next((i=>{let a=Lu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=Lu();return this.indexManager.getCollectionParents(e,l).next((d=>U.forEach(d,(p=>{const g=(function(T,A){return new vl(A,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,a).next((_=>{_.forEach(((T,A)=>{c=c.insert(T,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((c=>{l.forEach(((p,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,vt.newInvalidDocument(_)))}));let d=Lu();return c.forEach(((p,g)=>{const _=l.get(p);_!==void 0&&Xu(_.mutation,g,bn.empty(),We.now()),wc(t,g)&&(d=d.insert(p,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return U.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:dn(a.createTime)}})(t)),U.resolve()}getNamedQuery(e,t){return U.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:LS(a.bundledQuery),readTime:dn(a.readTime)}})(t)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(){this.overlays=new pt(ue.comparator),this.qr=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Gi();return U.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.St(e,t,l)})),U.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),U.resolve()}getOverlaysForCollection(e,t,i){const a=Gi(),l=t.length+1,c=new ue(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>i&&a.set(p.getKey(),p)}return U.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new pt(((g,_)=>g-_));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let _=l.get(g.largestBatchId);_===null&&(_=Gi(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=Gi(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,_)=>d.set(g,_))),!(d.size()>=a)););return U.resolve(d)}St(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new xy(t,i));let l=this.qr.get(t);l===void 0&&(l=Oe(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(){this.sessionToken=kt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(){this.Qr=new et(Qt.$r),this.Ur=new et(Qt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Qt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Qt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new ue(new Qe([])),i=new Qt(t,e),a=new Qt(t,e+1),l=[];return this.Ur.forEachInRange([i,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ue(new Qe([])),i=new Qt(t,e),a=new Qt(t,e+1);let l=Oe();return this.Ur.forEachInRange([i,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Qt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Qt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ue.comparator(e.key,t.key)||Se(e.Yr,t.Yr)}static Kr(e,t){return Se(e.Yr,t.Yr)||ue.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new et(Qt.$r)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Ry(l,t,i,a);this.mutationQueue.push(c);for(const d of a)this.Zr=this.Zr.add(new Qt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return U.resolve(c)}lookupMutationBatch(e,t){return U.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.ei(i),l=a<0?0:a;return U.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?Ta:this.tr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Qt(t,0),a=new Qt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,a],(c=>{const d=this.Xr(c.Yr);l.push(d)})),U.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new et(Se);return t.forEach((a=>{const l=new Qt(a,0),c=new Qt(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{i=i.add(d.Yr)}))})),U.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;ue.isDocumentKey(l)||(l=l.child(""));const c=new Qt(new ue(l),0);let d=new et(Se);return this.Zr.forEachWhile((p=>{const g=p.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(d=d.add(p.Yr)),!0)}),c),U.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((i=>{const a=this.Xr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){_e(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return U.forEach(t.mutations,(a=>{const l=new Qt(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Qt(t,0),a=this.Zr.firstAfterOrEqual(i);return U.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e){this.ri=e,this.docs=(function(){return new pt(ue.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return U.resolve(i?i.document.mutableCopy():vt.newInvalidDocument(t))}getEntries(e,t){let i=Vn();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():vt.newInvalidDocument(a))})),U.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=Vn();const c=t.path,d=new ue(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:_}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||py(xw(_),i)<=0||(a.has(_.key)||wc(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return U.resolve(l)}getAllFromCollectionGroup(e,t,i,a){pe(9500)}ii(e,t){return U.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new aM(this)}getSize(e){return U.resolve(this.size)}}class aM extends KS{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(i)})),U.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.persistence=e,this.si=new xr((t=>Ma(t)),bc),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.oi=0,this._i=new My,this.targetCount=0,this.ai=La.ur()}forEachTarget(e,t){return this.si.forEach(((i,a)=>t(a))),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),U.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new La(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.Pr(t),U.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),U.waitFor(l).next((()=>a))}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return U.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),U.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),U.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),U.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return U.resolve(i)}containsKey(e,t){return U.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e,t){this.ui={},this.overlays={},this.ci=new Wn(0),this.li=!1,this.li=!0,this.hi=new iM,this.referenceDelegate=e(this),this.Pi=new oM(this),this.indexManager=new GV,this.remoteDocumentCache=(function(a){return new sM(a)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new PS(t),this.Ii=new tM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new rM(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){re("MemoryPersistence","Starting transaction:",e);const a=new lM(this.ci.next());return this.referenceDelegate.Ei(),i(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return U.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class lM extends Nw{constructor(e){super(),this.currentSequenceNumber=e}}class Pd{constructor(e){this.persistence=e,this.Ri=new My,this.Vi=null}static mi(e){return new Pd(e)}get fi(){if(this.Vi)return this.Vi;throw pe(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),U.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),U.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,(i=>{const a=ue.fromPath(i);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Ee.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return U.or([()=>U.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class ld{constructor(e,t){this.persistence=e,this.pi=new xr((i=>ln(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=GS(this,t)}static mi(e,t){return new ld(e,t)}Ei(){}di(e){return U.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return U.forEach(this.pi,((i,a)=>this.br(e,i,a).next((l=>l?U.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((d=>{d||(i++,l.removeEntry(c,Ee.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),U.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),U.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),U.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Vf(e.data.value)),t}br(e,t,i){return U.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return U.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e){this.serializer=e}k(e,t,i,a){const l=new bd("createOrUpgrade",t);i<1&&a>=1&&((function(p){p.createObjectStore(Tc)})(e),(function(p){p.createObjectStore(ic,{keyPath:TO}),p.createObjectStore(di,{keyPath:LT,autoIncrement:!0}).createIndex(Ea,UT,{unique:!0}),p.createObjectStore(Wo)})(e),Rb(e),(function(p){p.createObjectStore(pa)})(e));let c=U.resolve();return i<3&&a>=3&&(i!==0&&((function(p){p.deleteObjectStore(el),p.deleteObjectStore(Zo),p.deleteObjectStore(ba)})(e),Rb(e)),c=c.next((()=>(function(p){const g=p.store(ba),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ee.min().toTimestamp(),targetCount:0};return g.put(Wf,_)})(l)))),i<4&&a>=4&&(i!==0&&(c=c.next((()=>(function(p,g){return g.store(di).J().next((T=>{p.deleteObjectStore(di),p.createObjectStore(di,{keyPath:LT,autoIncrement:!0}).createIndex(Ea,UT,{unique:!0});const A=g.store(di),O=T.map((z=>A.put(z)));return U.waitFor(O)}))})(e,l)))),c=c.next((()=>{(function(p){p.createObjectStore(tl,{keyPath:DO})})(e)}))),i<5&&a>=5&&(c=c.next((()=>this.yi(l)))),i<6&&a>=6&&(c=c.next((()=>((function(p){p.createObjectStore(rc)})(e),this.wi(l))))),i<7&&a>=7&&(c=c.next((()=>this.Si(l)))),i<8&&a>=8&&(c=c.next((()=>this.bi(e,l)))),i<9&&a>=9&&(c=c.next((()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&a>=10&&(c=c.next((()=>this.Di(l)))),i<11&&a>=11&&(c=c.next((()=>{(function(p){p.createObjectStore(wd,{keyPath:NO})})(e),(function(p){p.createObjectStore(Sd,{keyPath:OO})})(e)}))),i<12&&a>=12&&(c=c.next((()=>{(function(p){const g=p.createObjectStore(Id,{keyPath:jO});g.createIndex(Ig,zO,{unique:!1}),g.createIndex(Uw,BO,{unique:!1})})(e)}))),i<13&&a>=13&&(c=c.next((()=>(function(p){const g=p.createObjectStore(Jf,{keyPath:AO});g.createIndex(Nf,wO),g.createIndex(Mw,SO)})(e))).next((()=>this.Ci(e,l))).next((()=>e.deleteObjectStore(pa)))),i<14&&a>=14&&(c=c.next((()=>this.Fi(e,l)))),i<15&&a>=15&&(c=c.next((()=>(function(p){p.createObjectStore(_y,{keyPath:VO,autoIncrement:!0}).createIndex(Sg,MO,{unique:!1}),p.createObjectStore(Gu,{keyPath:PO}).createIndex(kw,kO,{unique:!1}),p.createObjectStore(Ku,{keyPath:LO}).createIndex(Lw,UO,{unique:!1})})(e)))),i<16&&a>=16&&(c=c.next((()=>{t.objectStore(Gu).clear()})).next((()=>{t.objectStore(Ku).clear()}))),i<17&&a>=17&&(c=c.next((()=>{(function(p){p.createObjectStore(vy,{keyPath:qO})})(e)}))),i<18&&a>=18&&CA()&&(c=c.next((()=>{t.objectStore(Gu).clear()})).next((()=>{t.objectStore(Ku).clear()}))),c}wi(e){let t=0;return e.store(pa).ee(((i,a)=>{t+=od(a)})).next((()=>{const i={byteSize:t};return e.store(rc).put(wg,i)}))}yi(e){const t=e.store(ic),i=e.store(di);return t.J().next((a=>U.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,Ta],[l.userId,l.lastAcknowledgedBatchId]);return i.J(Ea,c).next((d=>U.forEach(d,(p=>{_e(p.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const g=ya(this.serializer,p);return BS(e,l.userId,g).next((()=>{}))}))))}))))}Si(e){const t=e.store(el),i=e.store(pa);return e.store(ba).get(Wf).next((a=>{const l=[];return i.ee(((c,d)=>{const p=new Qe(c),g=(function(T){return[0,ln(T)]})(p);l.push(t.get(g).next((_=>_?U.resolve():(T=>t.put({targetId:0,path:ln(T),sequenceNumber:a.highestListenSequenceNumber}))(p))))})).next((()=>U.waitFor(l)))}))}bi(e,t){e.createObjectStore(sc,{keyPath:xO});const i=t.store(sc),a=new Vy,l=c=>{if(a.add(c)){const d=c.lastSegment(),p=c.popLast();return i.put({collectionId:d,parent:ln(p)})}};return t.store(pa).ee({X:!0},((c,d)=>{const p=new Qe(c);return l(p.popLast())})).next((()=>t.store(Wo).ee({X:!0},(([c,d,p],g)=>{const _=Hi(d);return l(_.popLast())}))))}Di(e){const t=e.store(Zo);return t.ee(((i,a)=>{const l=ju(a),c=kS(this.serializer,l);return t.put(c)}))}Ci(e,t){const i=t.store(pa),a=[];return i.ee(((l,c)=>{const d=t.store(Jf),p=(function(T){return T.document?new ue(Qe.fromString(T.document.name).popFirst(5)):T.noDocument?ue.fromSegments(T.noDocument.path):T.unknownDocument?ue.fromSegments(T.unknownDocument.path):pe(36783)})(c).path.toArray(),g={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(g))})).next((()=>U.waitFor(a)))}Fi(e,t){const i=t.store(di),a=QS(this.serializer),l=new Py(Pd.mi,this.serializer.yt);return i.J().next((c=>{const d=new Map;return c.forEach((p=>{let g=d.get(p.userId)??Oe();ya(this.serializer,p).keys().forEach((_=>g=g.add(_))),d.set(p.userId,g)})),U.forEach(d,((p,g)=>{const _=new en(g),T=Vd.wt(this.serializer,_),A=l.getIndexManager(_),O=Md.wt(_,this.serializer,A,l.referenceDelegate);return new YS(a,O,T,A).recalculateAndSaveOverlaysForDocumentKeys(new Rg(t,Wn.ce),p).next()}))}))}}function Rb(r){r.createObjectStore(el,{keyPath:RO}).createIndex(yy,CO,{unique:!0}),r.createObjectStore(Zo,{keyPath:"targetId"}).createIndex(Pw,IO,{unique:!0}),r.createObjectStore(ba)}const ms="IndexedDbPersistence",rg=18e5,sg=5e3,ag="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",cM="main";class ky{constructor(e,t,i,a,l,c,d,p,g,_,T=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Mi=l,this.window=c,this.document=d,this.xi=g,this.Oi=_,this.Ni=T,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=A=>Promise.resolve(),!ky.v())throw new se(X.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new JV(this,a),this.$i=t+cM,this.serializer=new PS(p),this.Ui=new Ss(this.$i,this.Ni,new uM(this.serializer)),this.hi=new jV,this.Pi=new QV(this.referenceDelegate,this.serializer),this.remoteDocumentCache=QS(this.serializer),this.Ii=new UV,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,_===!1&&fn(ms,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new se(X.FAILED_PRECONDITION,ag);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Wn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Ef(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Vs(e))return re(ms,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return re(ms,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Vu(e).get(Vo).next((t=>U.resolve(this.es(t))))}ts(e){return Ef(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,rg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=Ft(t,tl);return i.J().next((a=>{const l=this.ss(a,rg),c=a.filter((d=>l.indexOf(d)===-1));return U.forEach(c,(d=>i.delete(d.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?U.resolve(!0):Vu(e).get(Vo).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,sg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new se(X.FAILED_PRECONDITION,ag);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ef(e).J().next((i=>this.ss(i,sg).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&re(ms,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Tc,tl],(e=>{const t=new Rg(e,Wn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((i=>this.rs(i.updateTimeMs,t)&&!this.us(i.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Ef(e).J().next((t=>this.ss(t,rg).map((i=>i.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Md.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new KV(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Vd.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,i){re(ms,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(p){return p===18?GO:p===17?qw:p===16?HO:p===15?Ey:p===14?Bw:p===13?zw:p===12?FO:p===11?jw:void pe(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,a,l,(d=>(c=new Rg(d,this.ci?this.ci.next():Wn.ce),t==="readwrite-primary"?this.Hi(c).next((p=>!!p||this.Yi(c))).next((p=>{if(!p)throw fn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new se(X.FAILED_PRECONDITION,Dw);return i(c)})).next((p=>this.Xi(c).next((()=>p)))):this.Is(c).next((()=>i(c)))))).then((d=>(c.raiseOnCommittedEvent(),d)))}Is(e){return Vu(e).get(Vo).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,sg)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new se(X.FAILED_PRECONDITION,ag)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Vu(e).put(Vo,t)}static v(){return Ss.v()}Zi(e){const t=Vu(e);return t.get(Vo).next((i=>this.es(i)?(re(ms,"Releasing primary lease."),t.delete(Vo)):U.resolve()))}rs(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(fn(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;RA()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const i=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return re(ms,`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return fn(ms,"Failed to get zombied client id.",i),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){fn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Vu(r){return Ft(r,Tc)}function Ef(r){return Ft(r,tl)}function hM(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=a}static As(e,t){let i=Oe(),a=Oe();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Ly(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return RA()?8:Ow(qt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new fM;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,i,a){return i.documentReadCount<this.fs?(jo()<=Le.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",zo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(jo()<=Le.DEBUG&&re("QueryEngine","Query:",zo(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(jo()<=Le.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",zo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zn(t))):U.resolve())}ys(e,t){if(JT(t))return U.resolve(null);let i=Zn(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=nd(t,null,"F"),i=Zn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=Oe(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const g=this.Ds(t,d);return this.Cs(t,g,c,p.readTime)?this.ys(e,nd(t,null,"F")):this.vs(e,g,t,p)}))))})))))}ws(e,t,i,a){return JT(t)||a.isEqual(Ee.min())?U.resolve(null):this.ps.getDocuments(e,i).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,i,a)?U.resolve(null):(jo()<=Le.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),zo(t)),this.vs(e,c,t,mO(a,ec)).next((d=>d)))}))}Ds(e,t){let i=new et(lS(e));return t.forEach(((a,l)=>{wc(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,i){return jo()<=Le.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",zo(t)),this.ps.getDocumentsMatchingQuery(e,t,Pn.min(),i)}vs(e,t,i,a){return this.ps.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy="LocalStore",dM=3e8;class mM{constructor(e,t,i,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new pt(Se),this.xs=new xr((l=>Ma(l)),bc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function XS(r,e,t,i){return new mM(r,e,t,i)}async function JS(r,e){const t=Ie(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],d=[];let p=Oe();for(const g of a){c.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}for(const g of l){d.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function pM(r,e){const t=Ie(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,_){const T=g.batch,A=T.keys();let O=U.resolve();return A.forEach((z=>{O=O.next((()=>_.getEntry(p,z))).next((Q=>{const q=g.docVersions.get(z);_e(q!==null,48541),Q.version.compareTo(q)<0&&(T.applyToRemoteDocument(Q,g),Q.isValidDocument()&&(Q.setReadTime(g.commitVersion),_.addEntry(Q)))}))})),O.next((()=>d.mutationQueue.removeMutationBatch(p,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=Oe();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function WS(r){const e=Ie(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function gM(r,e){const t=Ie(r),i=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const d=[];e.targetChanges.forEach(((_,T)=>{const A=a.get(T);if(!A)return;d.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,T))));let O=A.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?O=O.withResumeToken(kt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):_.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(_.resumeToken,i)),a=a.insert(T,O),(function(Q,q,Z){return Q.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=dM?!0:Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0})(A,O,_)&&d.push(t.Pi.updateTargetData(l,O))}));let p=Vn(),g=Oe();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(yM(l,c,e.documentUpdates).next((_=>{p=_.ks,g=_.qs}))),!i.isEqual(Ee.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));d.push(_)}return U.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.Ms=a,l)))}function yM(r,e,t){let i=Oe(),a=Oe();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let c=Vn();return t.forEach(((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),p.isNoDocument()&&p.version.isEqual(Ee.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):re(Uy,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{ks:c,qs:a}}))}function _M(r,e){const t=Ie(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Ta),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function vM(r,e){const t=Ie(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.Pi.getTargetData(i,e).next((l=>l?(a=l,U.resolve(a)):t.Pi.allocateTargetId(i).next((c=>(a=new vr(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Bg(r,e,t){const i=Ie(r),a=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Vs(c))throw c;re(Uy,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ms=i.Ms.remove(e),i.xs.delete(a.target)}function Cb(r,e,t){const i=Ie(r);let a=Ee.min(),l=Oe();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,_){const T=Ie(p),A=T.xs.get(_);return A!==void 0?U.resolve(T.Ms.get(A)):T.Pi.getTargetData(g,_)})(i,c,Zn(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,e,t?a:Ee.min(),t?l:Oe()))).next((d=>(EM(i,aV(e),d),{documents:d,Qs:l})))))}function EM(r,e,t){let i=r.Os.get(e)||Ee.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Os.set(e,i)}class xb{constructor(){this.activeTargetIds=fV()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZS{constructor(){this.Mo=new xb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new xb,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db="ConnectivityMonitor";class Nb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re(Db,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re(Db,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tf=null;function qg(){return Tf===null?Tf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Tf++,"0x"+Tf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="RestConnection",bM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class AM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===Zf?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(e,t,i,a,l){const c=qg(),d=this.zo(e,t.toUriEncodedString());re(og,`Sending RPC '${e}' ${c}:`,d,i);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,a,l);const{host:g}=new URL(d),_=pl(g);return this.Jo(e,d,p,i,_).then((T=>(re(og,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw Oa(og,`RPC '${e}' ${c} failed with error: `,T,"url: ",d,"request:",i),T}))}Ho(e,t,i,a,l,c){return this.Go(e,t,i,a,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+_l})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const i=bM[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class SM extends AM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,a,l){const c=qg();return new Promise(((d,p)=>{const g=new vw;g.setWithCredentials(!0),g.listenOnce(Ew.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Cf.NO_ERROR:const T=g.getResponseJson();re(rn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),d(T);break;case Cf.TIMEOUT:re(rn,`RPC '${e}' ${c} timed out`),p(new se(X.DEADLINE_EXCEEDED,"Request time out"));break;case Cf.HTTP_ERROR:const A=g.getStatus();if(re(rn,`RPC '${e}' ${c} failed with status:`,A,"response text:",g.getResponseText()),A>0){let O=g.getResponseJson();Array.isArray(O)&&(O=O[0]);const z=O==null?void 0:O.error;if(z&&z.status&&z.message){const Q=(function(Z){const ie=Z.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(ie)>=0?ie:X.UNKNOWN})(z.status);p(new se(Q,z.message))}else p(new se(X.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new se(X.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{re(rn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(a);re(rn,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",_,i,15)}))}T_(e,t,i){const a=qg(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Aw(),d=bw(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=l.join("");re(rn,`Creating RPC '${e}' stream ${a}: ${_}`,p);const T=c.createWebChannel(_,p);this.I_(T);let A=!1,O=!1;const z=new wM({Yo:q=>{O?re(rn,`Not sending because RPC '${e}' stream ${a} is closed:`,q):(A||(re(rn,`Opening RPC '${e}' stream ${a} transport.`),T.open(),A=!0),re(rn,`RPC '${e}' stream ${a} sending:`,q),T.send(q))},Zo:()=>T.close()}),Q=(q,Z,ie)=>{q.listen(Z,(H=>{try{ie(H)}catch(ae){setTimeout((()=>{throw ae}),0)}}))};return Q(T,ku.EventType.OPEN,(()=>{O||(re(rn,`RPC '${e}' stream ${a} transport opened.`),z.o_())})),Q(T,ku.EventType.CLOSE,(()=>{O||(O=!0,re(rn,`RPC '${e}' stream ${a} transport closed`),z.a_(),this.E_(T))})),Q(T,ku.EventType.ERROR,(q=>{O||(O=!0,Oa(rn,`RPC '${e}' stream ${a} transport errored. Name:`,q.name,"Message:",q.message),z.a_(new se(X.UNAVAILABLE,"The operation could not be completed")))})),Q(T,ku.EventType.MESSAGE,(q=>{var Z;if(!O){const ie=q.data[0];_e(!!ie,16349);const H=ie,ae=(H==null?void 0:H.error)||((Z=H[0])==null?void 0:Z.error);if(ae){re(rn,`RPC '${e}' stream ${a} received error:`,ae);const fe=ae.status;let le=(function(C){const P=Mt[C];if(P!==void 0)return TS(P)})(fe),R=ae.message;le===void 0&&(le=X.INTERNAL,R="Unknown error status: "+fe+" with message "+ae.message),O=!0,z.a_(new se(le,R)),T.close()}else re(rn,`RPC '${e}' stream ${a} received:`,ie),z.u_(ie)}})),Q(d,Tw.STAT_EVENT,(q=>{q.stat===Tg.PROXY?re(rn,`RPC '${e}' stream ${a} detected buffering proxy`):q.stat===Tg.NOPROXY&&re(rn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{z.__()}),0),z}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(){return typeof window<"u"?window:null}function Uf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(r){return new RV(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&re("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="PersistentStream";class tI{constructor(e,t,i,a,l,c,d,p){this.Mi=e,this.S_=i,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new eI(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(fn(t.toString()),fn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new se(X.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return re(Ob,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(re(Ob,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class RM extends tI{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=DV(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ee.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ee.min():c.readTime?dn(c.readTime):Ee.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=kg(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=ed(p)?{documents:xS(l,p)}:{query:DS(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=wS(l,c.resumeToken);const g=Mg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ee.min())>0){d.readTime=cl(l,c.snapshotVersion.toTimestamp());const g=Mg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const i=OV(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=kg(this.serializer),t.removeTarget=e,this.q_(t)}}class CM extends tI{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return _e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){_e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=NV(e.writeResults,e.commitTime),i=dn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=kg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>rd(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{}class DM extends xM{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new se(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Pg(t,i),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new se(X.UNKNOWN,l.toString())}))}Ho(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,Pg(t,i),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new se(X.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class NM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fn(t),this.aa=!1):re("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua="RemoteStore";class OM{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{Ba(this)&&(re(Ua,"Restarting streams for network reachability change."),await(async function(p){const g=Ie(p);g.Ea.add(4),await Rc(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Ld(g)})(this))}))})),this.Ra=new NM(i,a)}}async function Ld(r){if(Ba(r))for(const e of r.da)await e(!0)}async function Rc(r){for(const e of r.da)await e(!1)}function nI(r,e){const t=Ie(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),qy(t)?By(t):Tl(t).O_()&&zy(t,e))}function jy(r,e){const t=Ie(r),i=Tl(t);t.Ia.delete(e),i.O_()&&iI(t,e),t.Ia.size===0&&(i.O_()?i.L_():Ba(t)&&t.Ra.set("Unknown"))}function zy(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Tl(r).Y_(e)}function iI(r,e){r.Va.Ue(e),Tl(r).Z_(e)}function By(r){r.Va=new AV({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Tl(r).start(),r.Ra.ua()}function qy(r){return Ba(r)&&!Tl(r).x_()&&r.Ia.size>0}function Ba(r){return Ie(r).Ea.size===0}function rI(r){r.Va=void 0}async function VM(r){r.Ra.set("Online")}async function MM(r){r.Ia.forEach(((e,t)=>{zy(r,e)}))}async function PM(r,e){rI(r),qy(r)?(r.Ra.ha(e),By(r)):r.Ra.set("Unknown")}async function kM(r,e,t){if(r.Ra.set("Online"),e instanceof AS&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.Va.removeTarget(d))})(r,e)}catch(i){re(Ua,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await ud(r,i)}else if(e instanceof kf?r.Va.Ze(e):e instanceof bS?r.Va.st(e):r.Va.tt(e),!t.isEqual(Ee.min()))try{const i=await WS(r.localStore);t.compareTo(i)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.Ia.get(g);_&&l.Ia.set(g,_.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,g)=>{const _=l.Ia.get(p);if(!_)return;l.Ia.set(p,_.withResumeToken(kt.EMPTY_BYTE_STRING,_.snapshotVersion)),iI(l,p);const T=new vr(_.target,p,g,_.sequenceNumber);zy(l,T)})),l.remoteSyncer.applyRemoteEvent(d)})(r,t)}catch(i){re(Ua,"Failed to raise snapshot:",i),await ud(r,i)}}async function ud(r,e,t){if(!Vs(e))throw e;r.Ea.add(1),await Rc(r),r.Ra.set("Offline"),t||(t=()=>WS(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{re(Ua,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Ld(r)}))}function sI(r,e){return e().catch((t=>ud(r,t,e)))}async function Cc(r){const e=Ie(r),t=xs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ta;for(;LM(e);)try{const a=await _M(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,UM(e,a)}catch(a){await ud(e,a)}aI(e)&&oI(e)}function LM(r){return Ba(r)&&r.Ta.length<10}function UM(r,e){r.Ta.push(e);const t=xs(r);t.O_()&&t.X_&&t.ea(e.mutations)}function aI(r){return Ba(r)&&!xs(r).x_()&&r.Ta.length>0}function oI(r){xs(r).start()}async function jM(r){xs(r).ra()}async function zM(r){const e=xs(r);for(const t of r.Ta)e.ea(t.mutations)}async function BM(r,e,t){const i=r.Ta.shift(),a=Cy.from(i,e,t);await sI(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await Cc(r)}async function qM(r,e){e&&xs(r).X_&&await(async function(i,a){if((function(c){return EV(c)&&c!==X.ABORTED})(a.code)){const l=i.Ta.shift();xs(i).B_(),await sI(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Cc(i)}})(r,e),aI(r)&&oI(r)}async function Vb(r,e){const t=Ie(r);t.asyncQueue.verifyOperationInProgress(),re(Ua,"RemoteStore received new credentials");const i=Ba(t);t.Ea.add(3),await Rc(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ld(t)}async function FM(r,e){const t=Ie(r);e?(t.Ea.delete(2),await Ld(t)):e||(t.Ea.add(2),await Rc(t),t.Ra.set("Unknown"))}function Tl(r){return r.ma||(r.ma=(function(t,i,a){const l=Ie(t);return l.sa(),new RM(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Xo:VM.bind(null,r),t_:MM.bind(null,r),r_:PM.bind(null,r),H_:kM.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),qy(r)?By(r):r.Ra.set("Unknown")):(await r.ma.stop(),rI(r))}))),r.ma}function xs(r){return r.fa||(r.fa=(function(t,i,a){const l=Ie(t);return l.sa(),new CM(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:jM.bind(null,r),r_:qM.bind(null,r),ta:zM.bind(null,r),na:BM.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Cc(r)):(await r.fa.stop(),r.Ta.length>0&&(re(Ua,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,d=new Fy(e,t,c,a,l);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hy(r,e){if(fn("AsyncQueue",`${e}: ${r}`),Vs(r))return new se(X.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{static emptySet(e){return new Yo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ue.comparator(t.key,i.key):(t,i)=>ue.comparator(t.key,i.key),this.keyedMap=Lu(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Yo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(){this.ga=new pt(ue.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):pe(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class hl{constructor(e,t,i,a,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new hl(e,t,Yo.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class GM{constructor(){this.queries=Pb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=Ie(t),l=a.queries;a.queries=Pb(),l.forEach(((c,d)=>{for(const p of d.Sa)p.onError(i)}))})(this,new se(X.ABORTED,"Firestore shutting down"))}}function Pb(){return new xr((r=>oS(r)),xd)}async function Gy(r,e){const t=Ie(r);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(i=2):(l=new HM,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=Hy(c,`Initialization of query '${zo(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Qy(t)}async function Ky(r,e){const t=Ie(r),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function KM(r,e){const t=Ie(r);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(a)&&(i=!0);c.wa=a}}i&&Qy(t)}function QM(r,e,t){const i=Ie(r),a=i.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);i.queries.delete(e)}function Qy(r){r.Ca.forEach((e=>{e.next()}))}var Fg,kb;(kb=Fg||(Fg={})).Ma="default",kb.Cache="cache";class Yy{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new hl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=hl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Fg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e){this.key=e}}class uI{constructor(e){this.key=e}}class YM{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Oe(),this.mutatedKeys=Oe(),this.eu=lS(e),this.tu=new Yo(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new Mb,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((_,T)=>{const A=a.get(_),O=wc(this.query,T)?T:null,z=!!A&&this.mutatedKeys.has(A.key),Q=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let q=!1;A&&O?A.data.isEqual(O.data)?z!==Q&&(i.track({type:3,doc:O}),q=!0):this.su(A,O)||(i.track({type:2,doc:O}),q=!0,(p&&this.eu(O,p)>0||g&&this.eu(O,g)<0)&&(d=!0)):!A&&O?(i.track({type:0,doc:O}),q=!0):A&&!O&&(i.track({type:1,doc:A}),q=!0,(p||g)&&(d=!0)),q&&(O?(c=c.add(O),l=Q?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{tu:c,iu:i,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,T)=>(function(O,z){const Q=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{Rt:q})}};return Q(O)-Q(z)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(i),a=a??!1;const d=t&&!a?this._u():[],p=this.Xa.size===0&&this.current&&!a?1:0,g=p!==this.Za;return this.Za=p,c.length!==0||g?{snapshot:new hl(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Mb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Oe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new uI(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new lI(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Oe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return hl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const $y="SyncEngine";class $M{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class XM{constructor(e){this.key=e,this.hu=!1}}class JM{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new xr((d=>oS(d)),xd),this.Iu=new Map,this.Eu=new Set,this.du=new pt(ue.comparator),this.Au=new Map,this.Ru=new My,this.Vu={},this.mu=new Map,this.fu=La.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function WM(r,e,t=!0){const i=pI(r);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await cI(i,e,t,!0),a}async function ZM(r,e){const t=pI(r);await cI(t,e,!0,!1)}async function cI(r,e,t,i){const a=await vM(r.localStore,Zn(e)),l=a.targetId,c=r.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await eP(r,e,l,c==="current",a.resumeToken)),r.isPrimaryClient&&t&&nI(r.remoteStore,a),d}async function eP(r,e,t,i,a){r.pu=(T,A,O)=>(async function(Q,q,Z,ie){let H=q.view.ru(Z);H.Cs&&(H=await Cb(Q.localStore,q.query,!1).then((({documents:R})=>q.view.ru(R,H))));const ae=ie&&ie.targetChanges.get(q.targetId),fe=ie&&ie.targetMismatches.get(q.targetId)!=null,le=q.view.applyChanges(H,Q.isPrimaryClient,ae,fe);return Ub(Q,q.targetId,le.au),le.snapshot})(r,T,A,O);const l=await Cb(r.localStore,e,!0),c=new YM(e,l.Qs),d=c.ru(l.documents),p=Ic.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",a),g=c.applyChanges(d,r.isPrimaryClient,p);Ub(r,t,g.au);const _=new $M(e,t,c);return r.Tu.set(e,_),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),g.snapshot}async function tP(r,e,t){const i=Ie(r),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((c=>!xd(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Bg(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&jy(i.remoteStore,a.targetId),Hg(i,a.targetId)})).catch(za)):(Hg(i,a.targetId),await Bg(i.localStore,a.targetId,!0))}async function nP(r,e){const t=Ie(r),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),jy(t.remoteStore,i.targetId))}async function iP(r,e,t){const i=gI(r);try{const a=await(function(c,d){const p=Ie(c),g=We.now(),_=d.reduce(((O,z)=>O.add(z.key)),Oe());let T,A;return p.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let z=Vn(),Q=Oe();return p.Ns.getEntries(O,_).next((q=>{z=q,z.forEach(((Z,ie)=>{ie.isValidDocument()||(Q=Q.add(Z))}))})).next((()=>p.localDocuments.getOverlayedDocuments(O,z))).next((q=>{T=q;const Z=[];for(const ie of d){const H=_V(ie,T.get(ie.key).overlayedDocument);H!=null&&Z.push(new Dr(ie.key,H,Ww(H.value.mapValue),Bt.exists(!0)))}return p.mutationQueue.addMutationBatch(O,g,Z,d)})).next((q=>{A=q;const Z=q.applyToLocalDocumentSet(T,Q);return p.documentOverlayCache.saveOverlays(O,q.batchId,Z)}))})).then((()=>({batchId:A.batchId,changes:cS(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(c,d,p){let g=c.Vu[c.currentUser.toKey()];g||(g=new pt(Se)),g=g.insert(d,p),c.Vu[c.currentUser.toKey()]=g})(i,a.batchId,t),await xc(i,a.changes),await Cc(i.remoteStore)}catch(a){const l=Hy(a,"Failed to persist write");t.reject(l)}}async function hI(r,e){const t=Ie(r);try{const i=await gM(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(_e(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?_e(c.hu,14607):a.removedDocuments.size>0&&(_e(c.hu,42227),c.hu=!1))})),await xc(t,i,e)}catch(i){await za(i)}}function Lb(r,e,t){const i=Ie(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const p=Ie(c);p.onlineState=d;let g=!1;p.queries.forEach(((_,T)=>{for(const A of T.Sa)A.va(d)&&(g=!0)})),g&&Qy(p)})(i.eventManager,e),a.length&&i.Pu.H_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function rP(r,e,t){const i=Ie(r);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let c=new pt(ue.comparator);c=c.insert(l,vt.newNoDocument(l,Ee.min()));const d=Oe().add(l),p=new Od(Ee.min(),new Map,new pt(Se),c,d);await hI(i,p),i.du=i.du.remove(l),i.Au.delete(e),Xy(i)}else await Bg(i.localStore,e,!1).then((()=>Hg(i,e,t))).catch(za)}async function sP(r,e){const t=Ie(r),i=e.batch.batchId;try{const a=await pM(t.localStore,e);dI(t,i,null),fI(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await xc(t,a)}catch(a){await za(a)}}async function aP(r,e,t){const i=Ie(r);try{const a=await(function(c,d){const p=Ie(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return p.mutationQueue.lookupMutationBatch(g,d).next((T=>(_e(T!==null,37113),_=T.keys(),p.mutationQueue.removeMutationBatch(g,T)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,_,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>p.localDocuments.getDocuments(g,_)))}))})(i.localStore,e);dI(i,e,t),fI(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await xc(i,a)}catch(a){await za(a)}}function fI(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function dI(r,e,t){const i=Ie(r);let a=i.Vu[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.Vu[i.currentUser.toKey()]=a}}function Hg(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||mI(r,i)}))}function mI(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(jy(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Xy(r))}function Ub(r,e,t){for(const i of t)i instanceof lI?(r.Ru.addReference(i.key,e),oP(r,i)):i instanceof uI?(re($y,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||mI(r,i.key)):pe(19791,{wu:i})}function oP(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Eu.has(i)||(re($y,"New document in limbo: "+t),r.Eu.add(i),Xy(r))}function Xy(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ue(Qe.fromString(e)),i=r.fu.next();r.Au.set(i,new XM(t)),r.du=r.du.insert(t,i),nI(r.remoteStore,new vr(Zn(Ac(t.path)),i,"TargetPurposeLimboResolution",Wn.ce))}}async function xc(r,e,t){const i=Ie(r),a=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,p)=>{c.push(i.pu(p,e,t).then((g=>{var _;if((g||t)&&i.isPrimaryClient){const T=g?!g.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(g){a.push(g);const T=Ly.As(p.targetId,g);l.push(T)}})))})),await Promise.all(c),i.Pu.H_(a),await(async function(p,g){const _=Ie(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>U.forEach(g,(A=>U.forEach(A.Es,(O=>_.persistence.referenceDelegate.addReference(T,A.targetId,O))).next((()=>U.forEach(A.ds,(O=>_.persistence.referenceDelegate.removeReference(T,A.targetId,O)))))))))}catch(T){if(!Vs(T))throw T;re(Uy,"Failed to update sequence numbers: "+T)}for(const T of g){const A=T.targetId;if(!T.fromCache){const O=_.Ms.get(A),z=O.snapshotVersion,Q=O.withLastLimboFreeSnapshotVersion(z);_.Ms=_.Ms.insert(A,Q)}}})(i.localStore,l))}async function lP(r,e){const t=Ie(r);if(!t.currentUser.isEqual(e)){re($y,"User change. New user:",e.toKey());const i=await JS(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new se(X.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await xc(t,i.Ls)}}function uP(r,e){const t=Ie(r),i=t.Au.get(e);if(i&&i.hu)return Oe().add(i.key);{let a=Oe();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}function pI(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=hI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rP.bind(null,e),e.Pu.H_=KM.bind(null,e.eventManager),e.Pu.yu=QM.bind(null,e.eventManager),e}function gI(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aP.bind(null,e),e}class hc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return XS(this.persistence,new $S,e.initialUser,this.serializer)}Cu(e){return new Py(Pd.mi,this.serializer)}Du(e){return new ZS}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hc.provider={build:()=>new hc};class cP extends hc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){_e(this.persistence.referenceDelegate instanceof ld,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new HS(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new Py((i=>ld.mi(i,t)),this.serializer)}}class hP extends hc{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await gI(this.xu.syncEngine),await Cc(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return XS(this.persistence,new $S,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new HS(i,e.asyncQueue,t)}Mu(e,t){const i=new _O(t,this.persistence);return new yO(e.asyncQueue,i)}Cu(e){const t=hM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new ky(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,IM(),Uf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new ZS}}class cd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Lb(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=lP.bind(null,this.syncEngine),await FM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new GM})()}createDatastore(e){const t=kd(e.databaseInfo.databaseId),i=(function(l){return new SM(l)})(e.databaseInfo);return(function(l,c,d,p){return new DM(l,c,d,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,c,d){return new OM(i,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Lb(this.syncEngine,t,0)),(function(){return Nb.v()?new Nb:new TM})())}createSyncEngine(e,t){return(function(a,l,c,d,p,g,_){const T=new JM(a,l,c,d,p,g);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=Ie(a);re(Ua,"RemoteStore shutting down."),l.Ea.add(5),await Rc(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}cd.provider={build:()=>new cd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds="FirestoreClient";class fP{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=en.UNAUTHENTICATED,this.clientId=my.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{re(Ds,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(re(Ds,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Hy(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function lg(r,e){r.asyncQueue.verifyOperationInProgress(),re(Ds,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async a=>{i.isEqual(a)||(await JS(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function jb(r,e){r.asyncQueue.verifyOperationInProgress();const t=await dP(r);re(Ds,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>Vb(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,a)=>Vb(e.remoteStore,a))),r._onlineComponents=e}async function dP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){re(Ds,"Using user provided OfflineComponentProvider");try{await lg(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===X.FAILED_PRECONDITION||a.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Oa("Error using user provided cache. Falling back to memory cache: "+t),await lg(r,new hc)}}else re(Ds,"Using default OfflineComponentProvider"),await lg(r,new cP(void 0));return r._offlineComponents}async function yI(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(re(Ds,"Using user provided OnlineComponentProvider"),await jb(r,r._uninitializedComponentsProvider._online)):(re(Ds,"Using default OnlineComponentProvider"),await jb(r,new cd))),r._onlineComponents}function mP(r){return yI(r).then((e=>e.syncEngine))}async function hd(r){const e=await yI(r),t=e.eventManager;return t.onListen=WM.bind(null,e.syncEngine),t.onUnlisten=tP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ZM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=nP.bind(null,e.syncEngine),t}function pP(r,e,t={}){const i=new Yi;return r.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const _=new Jy({next:A=>{_.Nu(),c.enqueueAndForget((()=>Ky(l,T)));const O=A.docs.has(d);!O&&A.fromCache?g.reject(new se(X.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&A.fromCache&&p&&p.source==="server"?g.reject(new se(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(A)},error:A=>g.reject(A)}),T=new Yy(Ac(d.path),_,{includeMetadataChanges:!0,qa:!0});return Gy(l,T)})(await hd(r),r.asyncQueue,e,t,i))),i.promise}function gP(r,e,t={}){const i=new Yi;return r.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const _=new Jy({next:A=>{_.Nu(),c.enqueueAndForget((()=>Ky(l,T))),A.fromCache&&p.source==="server"?g.reject(new se(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(A)},error:A=>g.reject(A)}),T=new Yy(d,_,{includeMetadataChanges:!0,qa:!0});return Gy(l,T)})(await hd(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI="firestore.googleapis.com",Bb=!0;class qb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vI,this.ssl=Bb}else this.host=e.host,this.ssl=e.ssl??Bb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<YV)throw new se(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_I(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new se(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new se(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new se(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ud{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new nO;switch(i.type){case"firstParty":return new aO(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new se(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=zb.get(t);i&&(re("ComponentProvider","Removing Datastore"),zb.delete(t),i.terminate())})(this),Promise.resolve()}}function yP(r,e,t,i={}){var g;r=on(r,Ud);const a=pl(e),l=r._getSettings(),c={...l,emulatorOptions:r._getEmulatorOptions()},d=`${e}:${t}`;a&&(wA(`https://${d}`),SA("Firestore",!0)),l.host!==vI&&l.host!==d&&Oa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:d,ssl:a,emulatorOptions:i};if(!Ia(p,c)&&(r._setSettings(p),i.mockUserToken)){let _,T;if(typeof i.mockUserToken=="string")_=i.mockUserToken,T=en.MOCK_USER;else{_=hx(i.mockUserToken,(g=r._app)==null?void 0:g.options.projectId);const A=i.mockUserToken.sub||i.mockUserToken.user_id;if(!A)throw new se(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new en(A)}r._authCredentials=new iO(new Sw(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Nr(this.firestore,e,this._query)}}class Et{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Et(this.firestore,e,this._key)}toJSON(){return{type:Et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Ec(t,Et._jsonSchema))return new Et(e,i||null,new ue(Qe.fromString(t.referencePath)))}}Et._jsonSchemaVersion="firestore/documentReference/1.0",Et._jsonSchema={type:Pt("string",Et._jsonSchemaVersion),referencePath:Pt("string")};class Is extends Nr{constructor(e,t,i){super(e,t,Ac(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new ue(e))}withConverter(e){return new Is(this.firestore,e,this._path)}}function Sk(r,e,...t){if(r=mt(r),Rw("collection","path",e),r instanceof Ud){const i=Qe.fromString(e,...t);return OT(i),new Is(r,null,i)}{if(!(r instanceof Et||r instanceof Is))throw new se(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Qe.fromString(e,...t));return OT(i),new Is(r.firestore,null,i)}}function Wy(r,e,...t){if(r=mt(r),arguments.length===1&&(e=my.newId()),Rw("doc","path",e),r instanceof Ud){const i=Qe.fromString(e,...t);return NT(i),new Et(r,null,new ue(i))}{if(!(r instanceof Et||r instanceof Is))throw new se(X.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Qe.fromString(e,...t));return NT(i),new Et(r.firestore,r instanceof Is?r.converter:null,new ue(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb="AsyncQueue";class Hb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new eI(this,"async_queue_retry"),this._c=()=>{const i=Uf();i&&re(Fb,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Uf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Uf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Yi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Vs(e))throw e;re(Fb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,fn("INTERNAL UNHANDLED ERROR: ",Gb(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Fy.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&pe(47125,{Pc:Gb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Gb(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1})(r,["next","error","complete"])}class gi extends Ud{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new Hb,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Hb(e),this._firestoreClient=void 0,await e}}}function _P(r,e){const t=typeof r=="object"?r:OA(),i=typeof r=="string"?r:Zf,a=iy(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=ux("firestore");l&&yP(a,...l)}return a}function Dc(r){if(r._terminated)throw new se(X.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||EI(r),r._firestoreClient}function EI(r){var i,a,l;const e=r._freezeSettings(),t=(function(d,p,g,_){return new QO(d,p,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,_I(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new fP(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(r._componentsProvider))}function vP(r,e){Oa("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();return EP(r,cd.provider,{build:i=>new hP(i,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function EP(r,e,t){if((r=on(r,gi))._firestoreClient||r._terminated)throw new se(X.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new se(X.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},EI(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jn(kt.fromBase64String(e))}catch(t){throw new se(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Jn(kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ec(e,Jn._jsonSchema))return Jn.fromBase64String(e.bytes)}}Jn._jsonSchemaVersion="firestore/bytes/1.0",Jn._jsonSchema={type:Pt("string",Jn._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new se(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$i._jsonSchemaVersion}}static fromJSON(e){if(Ec(e,$i._jsonSchema))return new $i(e.latitude,e.longitude)}}$i._jsonSchemaVersion="firestore/geoPoint/1.0",$i._jsonSchema={type:Pt("string",$i._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Xi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ec(e,Xi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Xi(e.vectorValues);throw new se(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xi._jsonSchemaVersion="firestore/vectorValue/1.0",Xi._jsonSchema={type:Pt("string",Xi._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP=/^__.*__$/;class bP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Dr(e,this.data,this.fieldMask,t,this.fieldTransforms):new El(e,this.data,t,this.fieldTransforms)}}class TI{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Dr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bI(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{Ac:r})}}class Zy{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Zy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return fd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(bI(this.Ac)&&TP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class AP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||kd(e)}Cc(e,t,i,a=!1){return new Zy({Ac:e,methodName:t,Dc:i,path:gt.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vc(r){const e=r._freezeSettings(),t=kd(r._databaseId);return new AP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function e_(r,e,t,i,a,l={}){const c=r.Cc(l.merge||l.mergeFields?2:0,e,t,a);i_("Data must be an object, but it was:",c,i);const d=SI(i,c);let p,g;if(l.merge)p=new bn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const A=Gg(e,T,t);if(!c.contains(A))throw new se(X.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);RI(_,A)||_.push(A)}p=new bn(_),g=c.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,g=c.fieldTransforms;return new bP(new an(d),p,g)}class jd extends Oc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jd}}class t_ extends Oc{_toFieldTransform(e){return new Iy(e.path,new al)}isEqual(e){return e instanceof t_}}class n_ extends Oc{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new ul(e.serializer,dS(e.serializer,this.Fc));return new Iy(e.path,t)}isEqual(e){return e instanceof n_&&this.Fc===e.Fc}}function AI(r,e,t,i){const a=r.Cc(1,e,t);i_("Data must be an object, but it was:",a,i);const l=[],c=an.empty();Ms(i,((p,g)=>{const _=r_(e,p,t);g=mt(g);const T=a.yc(_);if(g instanceof jd)l.push(_);else{const A=Mc(g,T);A!=null&&(l.push(_),c.set(_,A))}}));const d=new bn(l);return new TI(c,d,a.fieldTransforms)}function wI(r,e,t,i,a,l){const c=r.Cc(1,e,t),d=[Gg(e,i,t)],p=[a];if(l.length%2!=0)throw new se(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<l.length;A+=2)d.push(Gg(e,l[A])),p.push(l[A+1]);const g=[],_=an.empty();for(let A=d.length-1;A>=0;--A)if(!RI(g,d[A])){const O=d[A];let z=p[A];z=mt(z);const Q=c.yc(O);if(z instanceof jd)g.push(O);else{const q=Mc(z,Q);q!=null&&(g.push(O),_.set(O,q))}}const T=new bn(g);return new TI(_,T,c.fieldTransforms)}function wP(r,e,t,i=!1){return Mc(t,r.Cc(i?4:3,e))}function Mc(r,e){if(II(r=mt(r)))return i_("Unsupported field value:",e,r),SI(r,e);if(r instanceof Oc)return(function(i,a){if(!bI(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,a){const l=[];let c=0;for(const d of i){let p=Mc(d,a.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(r,e)}return(function(i,a){if((i=mt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return dS(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=We.fromDate(i);return{timestampValue:cl(a.serializer,l)}}if(i instanceof We){const l=new We(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:cl(a.serializer,l)}}if(i instanceof $i)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Jn)return{bytesValue:wS(a.serializer,i._byteString)};if(i instanceof Et){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Ny(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Xi)return(function(c,d){return{mapValue:{fields:{[by]:{stringValue:Ay},[nl]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw d.Sc("VectorValues must only contain numeric values.");return Sy(d.serializer,g)}))}}}}}})(i,a);throw a.Sc(`Unsupported field value: ${Td(i)}`)})(r,e)}function SI(r,e){const t={};return Fw(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ms(r,((i,a)=>{const l=Mc(a,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function II(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof We||r instanceof $i||r instanceof Jn||r instanceof Et||r instanceof Oc||r instanceof Xi)}function i_(r,e,t){if(!II(t)||!Cw(t)){const i=Td(t);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function Gg(r,e,t){if((e=mt(e))instanceof Nc)return e._internalPath;if(typeof e=="string")return r_(r,e);throw fd("Field path arguments must be of type string or ",r,!1,void 0,t)}const SP=new RegExp("[~\\*/\\[\\]]");function r_(r,e,t){if(e.search(SP)>=0)throw fd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Nc(...e.split("."))._internalPath}catch{throw fd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function fd(r,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${a}`),p+=")"),new se(X.INVALID_ARGUMENT,d+r+p)}function RI(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new IP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class IP extends CI{data(){return super.data()}}function zd(r,e){return typeof e=="string"?r_(r,e):e instanceof Nc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new se(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class s_{}class a_ extends s_{}function Ik(r,e,...t){let i=[];e instanceof s_&&i.push(e),i=i.concat(t),(function(l){const c=l.filter((p=>p instanceof o_)).length,d=l.filter((p=>p instanceof Bd)).length;if(c>1||c>0&&d>0)throw new se(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)r=a._apply(r);return r}class Bd extends a_{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Bd(e,t,i)}_apply(e){const t=this._parse(e);return DI(e._query,t),new Nr(e.firestore,e.converter,Vg(e._query,t))}_parse(e){const t=Vc(e.firestore);return(function(l,c,d,p,g,_,T){let A;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new se(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Yb(T,_);const z=[];for(const Q of T)z.push(Qb(p,l,Q));A={arrayValue:{values:z}}}else A=Qb(p,l,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Yb(T,_),A=wP(d,c,T,_==="in"||_==="not-in");return Ue.create(g,_,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Rk(r,e,t){const i=e,a=zd("where",r);return Bd._create(a,i,t)}class o_ extends s_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new o_(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Ze.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const d=l.getFlattenedFilters();for(const p of d)DI(c,p),c=Vg(c,p)})(e._query,t),new Nr(e.firestore,e.converter,Vg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class l_ extends a_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new l_(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new se(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new se(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cc(l,c)})(e._query,this._field,this._direction);return new Nr(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new vl(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function Ck(r,e="asc"){const t=e,i=zd("orderBy",r);return l_._create(i,t)}class u_ extends a_{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new u_(e,t,i)}_apply(e){return new Nr(e.firestore,e.converter,nd(e._query,this._limit,this._limitType))}}function xk(r){return dO("limit",r),u_._create("limit",r,"F")}function Qb(r,e,t){if(typeof(t=mt(t))=="string"){if(t==="")throw new se(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aS(e)&&t.indexOf("/")!==-1)throw new se(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Qe.fromString(t));if(!ue.isDocumentKey(i))throw new se(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return lc(r,new ue(i))}if(t instanceof Et)return lc(r,t._key);throw new se(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Td(t)}.`)}function Yb(r,e){if(!Array.isArray(r)||r.length===0)throw new se(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function DI(r,e){const t=(function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(r.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new se(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class RP{convertValue(e,t="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ir(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ms(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,a,l;const t=(l=(a=(i=e.fields)==null?void 0:i[nl].arrayValue)==null?void 0:a.values)==null?void 0:l.map((c=>ft(c.doubleValue)));return new Xi(t)}convertGeoPoint(e){return new $i(ft(e.latitude),ft(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Rd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ac(e));default:return null}}convertTimestamp(e){const t=Sr(e);return new We(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Qe.fromString(e);_e(MS(i),9688,{name:e});const a=new Va(i.get(1),i.get(3)),l=new ue(i.popFirst(5));return a.isEqual(t)||fn(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class zu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wa extends CI{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new jf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(zd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=wa._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}wa._jsonSchemaVersion="firestore/documentSnapshot/1.0",wa._jsonSchema={type:Pt("string",wa._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class jf extends wa{data(e={}){return super.data(e)}}class Sa{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new zu(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new jf(this._firestore,this._userDataWriter,i.key,i,new zu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const p=new jf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new zu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new jf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new zu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,_=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:CP(d.type),doc:p,oldIndex:g,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Sa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=my.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function CP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(r){r=on(r,Et);const e=on(r.firestore,gi);return pP(Dc(e),r._key).then((t=>NI(e,r,t)))}Sa._jsonSchemaVersion="firestore/querySnapshot/1.0",Sa._jsonSchema={type:Pt("string",Sa._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class h_ extends RP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,t)}}function Dk(r){r=on(r,Nr);const e=on(r.firestore,gi),t=Dc(e),i=new h_(e);return xI(r._query),gP(t,r._query).then((a=>new Sa(e,i,r,a)))}function Nk(r,e,t){r=on(r,Et);const i=on(r.firestore,gi),a=c_(r.converter,e,t);return Pc(i,[e_(Vc(i),"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,Bt.none())])}function DP(r,e,t,...i){r=on(r,Et);const a=on(r.firestore,gi),l=Vc(a);let c;return c=typeof(e=mt(e))=="string"||e instanceof Nc?wI(l,"updateDoc",r._key,e,t,i):AI(l,"updateDoc",r._key,e),Pc(a,[c.toMutation(r._key,Bt.exists(!0))])}function Ok(r){return Pc(on(r.firestore,gi),[new Sc(r._key,Bt.none())])}function Vk(r,e){const t=on(r.firestore,gi),i=Wy(r),a=c_(r.converter,e);return Pc(t,[e_(Vc(r.firestore),"addDoc",i._key,a,r.converter!==null,{}).toMutation(i._key,Bt.exists(!1))]).then((()=>i))}function NP(r,...e){var p,g,_;r=mt(r);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Kb(e[i])||(t=e[i++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Kb(e[i])){const T=e[i];e[i]=(p=T.next)==null?void 0:p.bind(T),e[i+1]=(g=T.error)==null?void 0:g.bind(T),e[i+2]=(_=T.complete)==null?void 0:_.bind(T)}let l,c,d;if(r instanceof Et)c=on(r.firestore,gi),d=Ac(r._key.path),l={next:T=>{e[i]&&e[i](NI(c,r,T))},error:e[i+1],complete:e[i+2]};else{const T=on(r,Nr);c=on(T.firestore,gi),d=T._query;const A=new h_(c);l={next:O=>{e[i]&&e[i](new Sa(c,A,T,O))},error:e[i+1],complete:e[i+2]},xI(r._query)}return(function(A,O,z,Q){const q=new Jy(Q),Z=new Yy(O,q,z);return A.asyncQueue.enqueueAndForget((async()=>Gy(await hd(A),Z))),()=>{q.Nu(),A.asyncQueue.enqueueAndForget((async()=>Ky(await hd(A),Z)))}})(Dc(c),d,a,l)}function Pc(r,e){return(function(i,a){const l=new Yi;return i.asyncQueue.enqueueAndForget((async()=>iP(await mP(i),a,l))),l.promise})(Dc(r),e)}function NI(r,e,t){const i=t.docs.get(e._key),a=new h_(r);return new wa(r,a,e._key,i,new zu(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Vc(e)}set(e,t,i){this._verifyNotCommitted();const a=ug(e,this._firestore),l=c_(a.converter,t,i),c=e_(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(c.toMutation(a._key,Bt.none())),this}update(e,t,i,...a){this._verifyNotCommitted();const l=ug(e,this._firestore);let c;return c=typeof(t=mt(t))=="string"||t instanceof Nc?wI(this._dataReader,"WriteBatch.update",l._key,t,i,a):AI(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Bt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ug(e,this._firestore);return this._mutations=this._mutations.concat(new Sc(t._key,Bt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new se(X.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ug(r,e){if((r=mt(r)).firestore!==e)throw new se(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function Mk(){return new t_("serverTimestamp")}function Pk(r){return new n_("increment",r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(r){return Dc(r=on(r,gi)),new OP(r,(e=>Pc(r,e)))}(function(e,t=!0){(function(a){_l=a})(gl),Xo(new Ra("firestore",((i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new gi(new rO(i.getProvider("auth-internal")),new oO(c,i.getProvider("app-check-internal")),(function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new se(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Va(g.options.projectId,_)})(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),As(RT,CT,e),As(RT,CT,"esm2020")})();var ye=(r=>(r.USER="user",r.ADMIN_REFERRAL="admin referral code",r.ADMIN_DATABASE="admin database",r.ADMIN_REWARD="admin reward",r.ADMIN_NOTIFICATION="admin notification",r.ADMIN_CONTENT="admin content",r.ADMIN_LORD="admin lord",r))(ye||{});const OI={apiKey:"AIzaSyDc24eHGwIFcltfsYOwuhig8whHQuhfJ7U",authDomain:"learning-english-geuwat-d7555.firebaseapp.com",projectId:"learning-english-geuwat-d7555",storageBucket:"learning-english-geuwat-d7555.firebasestorage.app",messagingSenderId:"110497450552",appId:"1:110497450552:web:1de6e8e96d77318988b4cd",measurementId:"G-SD5W12S7ZZ"},VI=ry(OI),fl=yw(VI);qN(fl,lw).then(()=>{console.log("Auth Persistence enabled: SESSION KEPT")}).catch(r=>{console.warn("Auth Persistence setup warning:",r)});const f_=_P(VI);vP(f_).catch(r=>{r.code=="failed-precondition"?console.log("Persistence failed: Multiple tabs open"):r.code=="unimplemented"&&console.log("Persistence not supported by browser")});const VP=async(r,e)=>{try{const i=(await jN(fl,r,e)).user;if(!i.email)throw new Error("User email is missing");const a=i.email.toLowerCase();let l="users";a==="adminreferralcodegeuwat@email.com"?l="admin_referral_code":a==="admindatabasegeuwat@email.com"?l="admin_database":a==="adminrewardgeuwat@email.com"?l="admin_reward":a==="adminnotificationgeuwat@email.com"?l="admin_notification":a==="admincontentgeuwat@email.com"?l="admin_content":a==="adminlordgeuwat@email.com"&&(l="admin_lord");const c=Wy(f_,l,a),d=await xP(c);if(d.exists()){const p=d.data(),g=p.role||"user";let _=ye.USER;return Object.values(ye).includes(g)?_=g:g==="adminReferral"?_=ye.ADMIN_REFERRAL:g==="adminDatabase"?_=ye.ADMIN_DATABASE:g==="adminReward"?_=ye.ADMIN_REWARD:g==="adminNotification"?_=ye.ADMIN_NOTIFICATION:g==="adminContent"?_=ye.ADMIN_CONTENT:g==="adminLord"?_=ye.ADMIN_LORD:g==="admin"&&(_=ye.ADMIN_DATABASE),{uid:i.uid,email:a,displayName:p.fullName||p.displayName||a.split("@")[0],photoURL:p.photoURL||null,role:_,createdAt:p.createdAt,balance:p.balance||0,level:p.level||"Rookie",referralCode:p.referralCode||"-",validUntil:p.validUntil||null}}else return a==="admindatabasegeuwat@email.com"?{uid:i.uid,email:a,displayName:"Super Admin Database",photoURL:null,role:ye.ADMIN_DATABASE,createdAt:new Date}:a==="adminrewardgeuwat@email.com"?{uid:i.uid,email:a,displayName:"Admin Reward Center",photoURL:null,role:ye.ADMIN_REWARD,createdAt:new Date}:a==="adminnotificationgeuwat@email.com"?{uid:i.uid,email:a,displayName:"System Notification Center",photoURL:null,role:ye.ADMIN_NOTIFICATION,createdAt:new Date}:a==="admincontentgeuwat@email.com"?{uid:i.uid,email:a,displayName:"Content Manager",photoURL:null,role:ye.ADMIN_CONTENT,createdAt:new Date}:a==="adminlordgeuwat@email.com"?{uid:i.uid,email:a,displayName:"THE LORD ADMIN",photoURL:null,role:ye.ADMIN_LORD,createdAt:new Date}:{uid:i.uid,email:a,displayName:a.split("@")[0],photoURL:null,role:ye.USER,createdAt:new Date}}catch(t){throw["auth/user-not-found","auth/wrong-password","auth/invalid-credential"].includes(t.code)?(console.warn("Login attempt failed:",t.code),new Error("Email atau Password salah.")):t.code==="auth/too-many-requests"?(console.warn("Rate limited:",t.code),new Error("Terlalu banyak percobaan login gagal. Silakan coba lagi nanti atau reset password.")):t.code==="permission-denied"?(console.error("Firestore Permission Denied:",t),new Error("Izin ditolak oleh Database. Pastikan akun admin ada di collection yang benar.")):(console.error("Login Process Error:",t),t)}},Lk=async(r,e)=>{let t;try{const i="SecondaryApp-"+new Date().getTime();t=ry(OI,i);const a=yw(t),l=await UN(a,r,e);return await sw(a),l.user.uid}catch(i){throw console.error("Admin Create User Error:",i),i.code==="auth/email-already-in-use"?new Error("Email sudah terdaftar di Authentication."):i}finally{t&&await wD(t)}},Uk=async()=>{await sw(fl),localStorage.removeItem("geuwat_session")},MP=async r=>{try{await LN(fl,r)}catch(e){throw console.error("Reset Password Error:",e),e}};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),kP=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),$b=r=>{const e=kP(r);return e.charAt(0).toUpperCase()+e.slice(1)},MI=(...r)=>r.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),LP=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var UP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jP=K.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:a="",children:l,iconNode:c,...d},p)=>K.createElement("svg",{ref:p,...UP,width:e,height:e,stroke:r,strokeWidth:i?Number(t)*24/Number(e):t,className:MI("lucide",a),...!l&&!LP(d)&&{"aria-hidden":"true"},...d},[...c.map(([g,_])=>K.createElement(g,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=(r,e)=>{const t=K.forwardRef(({className:i,...a},l)=>K.createElement(jP,{ref:l,iconNode:e,className:MI(`lucide-${PP($b(r))}`,`lucide-${r}`,i),...a}));return t.displayName=$b(r),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],BP=Ei("arrow-left",zP);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],FP=Ei("circle-alert",qP);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Xb=Ei("clock",HP);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],KP=Ei("eye-off",GP);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],YP=Ei("eye",QP);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],XP=Ei("hash",$P);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JP=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],WP=Ei("house",JP);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Kg=Ei("loader-circle",ZP);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=[["path",{d:"m14.5 12.5-5-5",key:"1jahn5"}],["path",{d:"m9.5 12.5 5-5",key:"1k2t7b"}],["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}]],tk=Ei("monitor-x",ek);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],PI=Ei("refresh-cw",nk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],rk=Ei("triangle-alert",ik),sk=()=>{const r=md(),[e,t]=K.useState(!1),[i,a]=K.useState(null),[l,c]=K.useState(null),[d,p]=K.useState(0),[g,_]=K.useState("login"),[T,A]=K.useState(""),[O,z]=K.useState(""),[Q,q]=K.useState(!1),[Z,ie]=K.useState(!1),[H,ae]=K.useState(!1),fe=N=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(N);K.useEffect(()=>{const N=localStorage.getItem("geuwat_remember_email");N&&(A(N),ie(!0)),localStorage.removeItem("geuwat_remember_key")},[]),K.useEffect(()=>{let N;return d>0&&(N=setInterval(()=>p(k=>k-1),1e3)),()=>clearInterval(N)},[d]);const le=async N=>{if(N.preventDefault(),!(d>0)){if(!T||!O){a("Please fill in Email and Password");return}if(!fe(T)){a("Please enter a valid email address");return}t(!0),a(null);try{const k=await VP(T.trim().toLowerCase(),O);switch(Z?localStorage.setItem("geuwat_remember_email",T.trim()):localStorage.removeItem("geuwat_remember_email"),k.role){case ye.ADMIN_LORD:r("/admin/lord");break;case ye.ADMIN_REFERRAL:r("/admin/referral");break;case ye.ADMIN_DATABASE:r("/admin/database");break;case ye.ADMIN_REWARD:r("/admin/reward");break;case ye.ADMIN_NOTIFICATION:r("/admin/notification");break;case ye.USER:default:r("/dashboard");break}}catch(k){console.error(k),a(k.message||"Failed to login. Please check your Email and Password again."),p(5)}finally{t(!1)}}},R=async N=>{if(N.preventDefault(),!(d>0)){if(!T){a("Please enter your email.");return}t(!0),a(null),c(null);try{await MP(T.trim().toLowerCase()),c("Link reset password telah dikirim ke email Anda. Cek Folder Inbox atau Spam."),p(30)}catch(k){a(k.message||"Gagal mengirim link reset password."),p(5)}finally{t(!1)}}},I=N=>{_(N),a(null),c(null),p(0)},C=()=>g==="forgot"?"Reset Password":"Welcome Back",P=()=>g==="forgot"?"Recover your account access":"";return S.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center p-4 font-sans transition-all duration-500 ${H?"bg-slate-900":"bg-slate-50"}`,children:[S.jsx("div",{className:"mb-8 z-20",children:S.jsx("button",{onClick:()=>ae(!H),className:`px-6 py-2 rounded-full font-bold text-sm transition-all duration-300 shadow-lg ${H?"bg-white hover:bg-gray-200 text-black shadow-white/50":"bg-black hover:bg-gray-800 text-white shadow-black/50"}`,children:H?"ON":"OFF"})}),S.jsxs("div",{className:`w-full max-w-md p-8 rounded-3xl shadow-xl border relative overflow-hidden transition-all duration-500 ${H?"bg-slate-800 border-slate-700 shadow-slate-900/50":"bg-white border-slate-100"}`,children:[H&&S.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[S.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-96 h-96 bg-gradient-radial from-gray-400/20 via-gray-500/10 to-transparent rounded-full blur-3xl animate-pulse"}),S.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-80 h-80 bg-gradient-radial from-gray-400/15 via-gray-500/8 to-transparent rounded-full blur-2xl animate-pulse",style:{animationDelay:"1s"}}),S.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-64 h-64 bg-gradient-radial from-gray-400/10 via-gray-500/5 to-transparent rounded-full blur-xl animate-pulse",style:{animationDelay:"2s"}})]}),S.jsx("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-indigo-50 rounded-full blur-3xl opacity-50 pointer-events-none"}),S.jsx("div",{className:"absolute bottom-0 left-0 -mb-10 -ml-10 w-40 h-40 bg-purple-50 rounded-full blur-3xl opacity-50 pointer-events-none"}),S.jsxs("div",{className:"text-center mb-8 relative z-10",children:[S.jsx("div",{className:"w-28 h-28 mx-auto flex items-center justify-center mb-6",children:S.jsx("img",{src:"/src/img/learning_english_geuwat_rb_3d.png",alt:"Logo",className:"w-full h-full object-contain"})}),S.jsx("h1",{className:`text-2xl font-bold mb-2 transition-colors duration-300 ${H?"text-slate-200":"text-slate-800"}`,children:C()}),P()&&S.jsx("p",{className:`text-sm transition-colors duration-300 ${H?"text-slate-400":"text-slate-500"}`,children:P()})]}),i&&S.jsx("div",{className:`mb-6 p-4 text-sm rounded-xl border flex items-start gap-3 animate-in fade-in slide-in-from-top-2 transition-all duration-300 ${H?"bg-red-900/20 text-red-400 border-red-800":"bg-red-50 text-red-600 border-red-100"}`,children:S.jsx("span",{children:i})}),l&&S.jsx("div",{className:`mb-6 p-4 text-sm rounded-xl border flex items-start gap-3 animate-in fade-in slide-in-from-top-2 transition-all duration-300 ${H?"bg-emerald-900/20 text-emerald-400 border-emerald-800":"bg-emerald-50 text-emerald-600 border-emerald-100"}`,children:S.jsx("span",{children:l})}),g==="login"&&S.jsxs("form",{onSubmit:le,className:"space-y-5 relative z-10 animate-in fade-in slide-in-from-left-4",children:[S.jsxs("div",{className:"space-y-1.5",children:[S.jsx("label",{className:`text-xs font-semibold uppercase tracking-wider ml-1 transition-colors duration-300 ${H?"text-slate-400":"text-slate-500"}`,children:"Email Address"}),S.jsxs("div",{className:"relative group",children:[S.jsx("input",{type:"email",name:"email",id:"email",list:"saved-emails",autoComplete:"username",value:T,onChange:N=>A(N.target.value),className:`w-full pl-4 pr-4 py-3.5 border rounded-xl focus:outline-none focus:ring-2 transition-all duration-300 ${H?"bg-slate-700 border-slate-600 text-slate-200 placeholder:text-slate-500 focus:ring-black focus:bg-slate-600":"bg-slate-50 border-slate-200 focus:ring-black focus:bg-white text-slate-800 placeholder:text-slate-400"}`,placeholder:"Enter your email",required:!0}),S.jsxs("datalist",{id:"saved-emails",children:[S.jsx("option",{value:"adminlordgeuwat@email.com"}),S.jsx("option",{value:"admindatabasegeuwat@email.com"})]})]})]}),S.jsxs("div",{className:"space-y-1.5",children:[S.jsx("label",{className:`text-xs font-semibold uppercase tracking-wider ml-1 transition-colors duration-300 ${H?"text-slate-400":"text-slate-500"}`,children:"Password"}),S.jsxs("div",{className:"relative group",children:[S.jsx("input",{type:Q?"text":"password",name:"password",id:"password",autoComplete:"current-password",value:O,onChange:N=>z(N.target.value),className:`w-full pl-4 pr-12 py-3.5 border rounded-xl focus:outline-none focus:ring-2 transition-all duration-300 ${H?"bg-slate-700 border-slate-600 text-slate-200 placeholder:text-slate-500 focus:ring-black focus:bg-slate-600":"bg-slate-50 border-slate-200 focus:ring-black focus:bg-white text-slate-800 placeholder:text-slate-400"}`,placeholder:"Enter your password",required:!0}),S.jsx("button",{type:"button",onClick:()=>q(!Q),className:`absolute right-4 top-1/2 -translate-y-1/2 focus:outline-none transition-colors duration-300 ${H?"text-slate-500 hover:text-black":"text-slate-400 hover:text-black"}`,children:Q?S.jsx(KP,{size:20}):S.jsx(YP,{size:20})})]}),S.jsxs("div",{className:"flex items-center justify-between pt-2",children:[S.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group select-none",children:[S.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-all duration-200 ${Z?H?"bg-cyan-600 border-cyan-600":"bg-indigo-600 border-indigo-600":H?"bg-slate-700 border-slate-600 group-hover:border-cyan-400":"bg-white border-slate-300 group-hover:border-indigo-400"}`,children:Z&&S.jsx("span",{className:"text-white text-xs font-bold",children:""})}),S.jsx("input",{type:"checkbox",className:"hidden",checked:Z,onChange:N=>ie(N.target.checked)}),S.jsx("span",{className:`text-xs font-bold transition-colors ${Z?H?"text-cyan-400":"text-indigo-700":H?"text-slate-400 group-hover:text-cyan-400":"text-slate-500 group-hover:text-indigo-600"}`,children:"Remember My Email"})]}),S.jsx("button",{type:"button",onClick:()=>I("forgot"),className:`text-xs font-bold hover:underline transition-colors ${H?"text-slate-400 hover:text-white":"text-slate-500 hover:text-black"}`,children:"Forgot Password?"})]})]}),S.jsx("button",{type:"submit",disabled:e||d>0,className:"w-full font-semibold py-4 px-6 rounded-xl transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed mt-2 bg-black hover:bg-gray-800 text-white shadow-lg shadow-black/50 hover:shadow-black/70",children:e?S.jsx(Kg,{className:"animate-spin",size:20}):d>0?S.jsxs("span",{className:"flex items-center gap-2",children:[S.jsx(Xb,{size:18})," Wait ",d,"s"]}):S.jsx("span",{children:"Sign In"})}),S.jsx("div",{className:"pt-6 text-center",children:S.jsxs("p",{className:`text-sm transition-colors duration-300 ${H?"text-slate-400":"text-slate-500"}`,children:["Don't have an account?"," ",S.jsx(gd,{to:"/register",className:`font-bold hover:underline transition-colors duration-300 ${H?"text-white hover:text-gray-200":"text-black hover:text-gray-800"}`,children:"Register"})]})})]}),g==="forgot"&&S.jsxs("form",{onSubmit:R,className:"space-y-5 relative z-10 animate-in fade-in slide-in-from-right-4",children:[S.jsxs("div",{className:"space-y-1.5",children:[S.jsx("label",{className:`text-xs font-semibold uppercase tracking-wider ml-1 transition-colors duration-300 ${H?"text-slate-400":"text-slate-500"}`,children:"Email Address"}),S.jsx("div",{className:"relative group",children:S.jsx("input",{type:"email",name:"email",value:T,onChange:N=>A(N.target.value),className:`w-full pl-4 pr-4 py-3.5 border rounded-xl focus:outline-none focus:ring-2 transition-all duration-300 ${H?"bg-slate-700 border-slate-600 text-slate-200 placeholder:text-slate-500 focus:ring-black focus:bg-slate-600":"bg-slate-50 border-slate-200 focus:ring-black focus:bg-white text-slate-800 placeholder:text-slate-400"}`,placeholder:"Enter your registered email",required:!0})})]}),S.jsx("button",{type:"submit",disabled:e||!!l||d>0,className:"w-full bg-slate-800 hover:bg-slate-900 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed shadow-lg shadow-slate-200 mt-8",children:e?S.jsx(Kg,{className:"animate-spin",size:20}):d>0?S.jsxs("span",{className:"flex items-center gap-2",children:[S.jsx(Xb,{size:18})," Wait ",d,"s"]}):S.jsx("span",{children:"Send Reset Link"})}),S.jsxs("button",{type:"button",onClick:()=>I("login"),className:`w-full font-medium py-3 rounded-xl transition-colors flex items-center justify-center gap-2 ${H?"text-slate-400 hover:bg-slate-700":"text-slate-500 hover:bg-slate-50"}`,children:[S.jsx(BP,{size:18})," ",S.jsx("span",{children:"Back to Sign In"})]})]})]})]})},ak=()=>{md();const[r,e]=K.useState(null),[t,i]=K.useState(""),[a,l]=K.useState(""),[c,d]=K.useState(""),[p,g]=K.useState(""),[_,T]=K.useState(!1),[A,O]=K.useState(!1),[z,Q]=K.useState(!1),q=ie=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ie),Z=()=>{if(!t||!a||!p){e("Please fill in all required fields.");return}if(!q(a)){e("Please enter a valid email address.");return}if(!A){e("You must agree to the Terms & Conditions and Privacy Policy.");return}e(null);const ie=`Halo Admin, saya mau mendaftar. Mohon arahan selanjutnya.:
Full Name: ${t}
Email: ${a}
WhatsApp: ${p}
Referral Code: ${c}`,ae=`https://wa.me/6285846003119?text=${encodeURIComponent(ie)}`;window.open(ae,"_blank")};return S.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center p-4 font-sans transition-all duration-500 ${_?"bg-slate-900":"bg-slate-50"}`,children:[S.jsx("div",{className:"mb-8 z-20",children:S.jsx("button",{onClick:()=>T(!_),className:`px-6 py-2 rounded-full font-bold text-sm transition-all duration-300 shadow-lg ${_?"bg-white hover:bg-gray-200 text-black shadow-white/50":"bg-black hover:bg-gray-800 text-white shadow-black/50"}`,children:_?"ON":"OFF"})}),S.jsxs("div",{className:`w-full max-w-md p-8 rounded-3xl shadow-xl border relative overflow-hidden transition-all duration-500 ${_?"bg-slate-800 border-slate-700 shadow-slate-900/50":"bg-white border-slate-100"}`,children:[_&&S.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[S.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-96 h-96 bg-gradient-radial from-gray-400/20 via-gray-500/10 to-transparent rounded-full blur-3xl animate-pulse"}),S.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-80 h-80 bg-gradient-radial from-gray-400/15 via-gray-500/8 to-transparent rounded-full blur-2xl animate-pulse",style:{animationDelay:"1s"}}),S.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-64 h-64 bg-gradient-radial from-gray-400/10 via-gray-500/5 to-transparent rounded-full blur-xl animate-pulse",style:{animationDelay:"2s"}})]}),S.jsx("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-indigo-50 rounded-full blur-3xl opacity-50 pointer-events-none"}),S.jsx("div",{className:"absolute bottom-0 left-0 -mb-10 -ml-10 w-40 h-40 bg-purple-50 rounded-full blur-3xl opacity-50 pointer-events-none"}),S.jsxs("div",{className:"text-center mb-8 relative z-10",children:[S.jsx("div",{className:"w-28 h-28 mx-auto flex items-center justify-center mb-6",children:S.jsx("img",{src:"/src/img/learning_english_geuwat_rb_3d.png",alt:"Logo",className:"w-full h-full object-contain"})}),S.jsx("h1",{className:`text-2xl font-bold mb-2 transition-colors duration-300 ${_?"text-slate-200":"text-slate-800"}`,children:"Create Account"}),S.jsx("p",{className:`text-sm transition-colors duration-300 ${_?"text-slate-400":"text-slate-500"}`,children:"Start your English journey today"})]}),r&&S.jsxs("div",{className:`mb-6 p-4 text-sm rounded-xl border flex items-start gap-3 animate-in fade-in slide-in-from-top-2 transition-all duration-300 ${_?"bg-red-900/20 text-red-400 border-red-800":"bg-red-50 text-red-600 border-red-100"}`,children:[S.jsx(FP,{size:18,className:"mt-0.5 shrink-0"}),S.jsx("span",{children:r})]}),S.jsxs("form",{className:"space-y-5 relative z-10 animate-in fade-in slide-in-from-right-4",children:[S.jsxs("div",{className:"space-y-1.5",children:[S.jsx("label",{className:`text-xs font-semibold uppercase tracking-wider ml-1 transition-colors duration-300 ${_?"text-slate-400":"text-slate-500"}`,children:"Full Name"}),S.jsx("div",{className:"relative group",children:S.jsx("input",{type:"text",value:t,onChange:ie=>i(ie.target.value),className:`w-full pl-4 pr-4 py-3.5 border rounded-xl focus:outline-none focus:ring-2 transition-all duration-300 ${_?"bg-slate-700 border-slate-600 text-slate-200 placeholder:text-slate-500 focus:ring-black focus:bg-slate-600":"bg-slate-50 border-slate-200 focus:ring-black focus:bg-white text-slate-800 placeholder:text-slate-400"}`,placeholder:"John Doe",required:!0})})]}),S.jsxs("div",{className:"space-y-1.5",children:[S.jsx("label",{className:`text-xs font-semibold uppercase tracking-wider ml-1 transition-colors duration-300 ${_?"text-slate-400":"text-slate-500"}`,children:"Email Address"}),S.jsx("div",{className:"relative group",children:S.jsx("input",{type:"email",value:a,onChange:ie=>l(ie.target.value),className:`w-full pl-4 pr-4 py-3.5 border rounded-xl focus:outline-none focus:ring-2 transition-all duration-300 ${_?"bg-slate-700 border-slate-600 text-slate-200 placeholder:text-slate-500 focus:ring-black focus:bg-slate-600":"bg-slate-50 border-slate-200 focus:ring-black focus:bg-white text-slate-800 placeholder:text-slate-400"}`,placeholder:"name@example.com",required:!0})})]}),S.jsxs("div",{className:"space-y-1.5",children:[S.jsx("label",{className:`text-xs font-semibold uppercase tracking-wider ml-1 transition-colors duration-300 ${_?"text-slate-400":"text-slate-500"}`,children:"Whatsapp Number"}),S.jsx("div",{className:"relative group",children:S.jsx("input",{type:"tel",value:p,onChange:ie=>g(ie.target.value),className:`w-full pl-4 pr-4 py-3.5 border rounded-xl focus:outline-none focus:ring-2 transition-all duration-300 ${_?"bg-slate-700 border-slate-600 text-slate-200 placeholder:text-slate-500 focus:ring-black focus:bg-slate-600":"bg-slate-50 border-slate-200 focus:ring-black focus:bg-white text-slate-800 placeholder:text-slate-400"}`,placeholder:"08123456789",required:!0})})]}),S.jsxs("div",{className:"space-y-1.5",children:[S.jsx("label",{className:`text-xs font-semibold uppercase tracking-wider ml-1 transition-colors duration-300 ${_?"text-slate-400":"text-slate-500"}`,children:"Referral Code"}),S.jsxs("div",{className:"relative group",children:[S.jsx(XP,{className:`absolute left-4 top-1/2 -translate-y-1/2 transition-colors duration-300 ${_?"text-slate-500 group-focus-within:text-black":"text-slate-400 group-focus-within:text-black"}`,size:20}),S.jsx("input",{type:"text",value:c,onChange:ie=>d(ie.target.value),className:`w-full pl-12 pr-4 py-3.5 border rounded-xl focus:outline-none focus:ring-2 transition-all duration-300 ${_?"bg-slate-700 border-slate-600 text-slate-200 placeholder:text-slate-500 focus:ring-black focus:bg-slate-600":"bg-slate-50 border-slate-200 focus:ring-black focus:bg-white text-slate-800 placeholder:text-slate-400"}`,placeholder:"Enter referral code",required:!0})]})]}),S.jsxs("div",{className:"flex items-start gap-3 mt-4",children:[S.jsx("input",{type:"checkbox",id:"agree",checked:A,onChange:ie=>O(ie.target.checked),className:"mt-1"}),S.jsxs("label",{htmlFor:"agree",className:`text-sm leading-relaxed transition-colors duration-300 ${_?"text-slate-300":"text-slate-600"}`,children:["I agree to the"," ",S.jsx("button",{type:"button",onClick:()=>Q(!0),className:`font-semibold underline hover:no-underline transition-colors duration-300 ${_?"text-white hover:text-gray-200":"text-black hover:text-gray-800"}`,children:"Terms & Conditions and Privacy Policy"})]})]}),S.jsx("button",{type:"button",onClick:Z,className:"w-full font-semibold py-4 px-6 rounded-xl transition-all duration-200 flex items-center justify-center gap-2 mt-6 bg-black hover:bg-gray-800 text-white shadow-lg shadow-black/50 hover:shadow-black/70",children:S.jsx("span",{children:"Create Account"})}),S.jsx("div",{className:"pt-6 text-center",children:S.jsxs("p",{className:`text-sm transition-colors duration-300 ${_?"text-slate-400":"text-slate-500"}`,children:["Already have an account?"," ",S.jsx(gd,{to:"/",className:`font-bold hover:underline transition-colors duration-300 ${_?"text-white hover:text-gray-200":"text-black hover:text-gray-800"}`,children:"Sign In"})]})})]}),z&&S.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>Q(!1),children:S.jsxs("div",{className:`max-w-2xl w-full mx-4 p-6 rounded-xl shadow-xl max-h-[80vh] overflow-y-auto transition-all duration-300 ${_?"bg-slate-800 text-slate-200":"bg-white text-slate-800"}`,onClick:ie=>ie.stopPropagation(),children:[S.jsxs("div",{className:"flex justify-between items-center mb-4",children:[S.jsx("h2",{className:"text-xl font-bold",children:"SYARAT, KETENTUAN, DAN KEBIJAKAN PRIVASI"}),S.jsx("button",{onClick:()=>Q(!1),className:`text-2xl font-bold transition-colors duration-300 ${_?"text-slate-400 hover:text-slate-200":"text-slate-600 hover:text-slate-800"}`,children:""})]}),S.jsxs("div",{className:"text-sm space-y-4",children:[S.jsx("p",{children:S.jsx("strong",{children:"Learning English Geuwat"})}),S.jsx("p",{children:S.jsx("strong",{children:"Terakhir diperbarui: 29 Desember 2025"})}),S.jsx("p",{children:'Dokumen ini merupakan satu kesatuan yang mengatur ketentuan penggunaan layanan serta perlindungan data pribadi pada platform Learning English Geuwat ("Platform"). Dengan mendaftar atau menggunakan Platform, Anda menyetujui seluruh ketentuan di bawah ini.'}),S.jsx("hr",{}),S.jsx("h3",{className:"font-bold",children:"A. SYARAT & KETENTUAN"}),S.jsxs("div",{className:"space-y-2",children:[S.jsx("h4",{className:"font-semibold",children:"1. Definisi"}),S.jsxs("ul",{className:"list-disc list-inside",children:[S.jsx("li",{children:"Platform: Situs web/aplikasi Learning English Geuwat."}),S.jsx("li",{children:"Pengguna: Setiap individu yang mengakses atau menggunakan Platform."}),S.jsx("li",{children:"Penyelenggara: Pihak pengelola Platform Learning English Geuwat."})]}),S.jsx("h4",{className:"font-semibold",children:"2. Penerimaan Ketentuan"}),S.jsx("p",{children:"Pengguna dianggap telah membaca, memahami, dan menyetujui dokumen ini saat mendaftar, mengakses, atau menggunakan Platform."}),S.jsx("h4",{className:"font-semibold",children:"3. Persyaratan Pengguna"}),S.jsxs("ol",{className:"list-decimal list-inside",children:[S.jsx("li",{children:"Berusia minimal 13 tahun."}),S.jsx("li",{children:"Pengguna di bawah 18 tahun wajib memperoleh izin orang tua/wali."}),S.jsx("li",{children:"Menyediakan data pendaftaran yang benar dan akurat."}),S.jsx("li",{children:"Penyelenggara berhak menolak, membatasi, menangguhkan, atau menghapus akun yang melanggar ketentuan atau terindikasi penipuan."})]}),S.jsx("h4",{className:"font-semibold",children:"4. Akun & Keamanan"}),S.jsxs("ol",{className:"list-decimal list-inside",children:[S.jsx("li",{children:"Akun bersifat pribadi dan tidak dapat dipindahtangankan."}),S.jsx("li",{children:"Pengguna bertanggung jawab menjaga kerahasiaan kredensial."}),S.jsx("li",{children:"Segala aktivitas pada akun menjadi tanggung jawab Pengguna."})]}),S.jsx("h4",{className:"font-semibold",children:"5. Layanan & Konten"}),S.jsxs("ol",{className:"list-decimal list-inside",children:[S.jsx("li",{children:"Seluruh konten pembelajaran (materi, video, kuis, tantangan) adalah milik Penyelenggara atau mitra sah."}),S.jsx("li",{children:"Konten dapat diperbarui atau dihentikan sewaktu-waktu."}),S.jsx("li",{children:"Dilarang menyalin, mendistribusikan, atau memperjualbelikan konten tanpa izin tertulis."})]}),S.jsx("h4",{className:"font-semibold",children:"6. Pembayaran (Jika Berlaku)"}),S.jsxs("ol",{className:"list-decimal list-inside",children:[S.jsx("li",{children:"Harga dan metode pembayaran ditentukan oleh Penyelenggara."}),S.jsx("li",{children:"Pembayaran tidak dapat dikembalikan kecuali dinyatakan lain dalam kebijakan resmi."}),S.jsx("li",{children:"Perubahan harga tidak berlaku surut."})]}),S.jsx("h4",{className:"font-semibold",children:"7. Larangan & Sanksi"}),S.jsx("p",{children:"Pengguna dilarang melakukan tindakan melanggar hukum, peretasan, spam, penipuan, atau penyalahgunaan sistem. Pelanggaran dapat berakibat sanksi hingga penghapusan akun."}),S.jsx("h4",{className:"font-semibold",children:"8. Batasan Tanggung Jawab"}),S.jsx("p",{children:"Platform disediakan apa adanya. Penyelenggara tidak bertanggung jawab atas kerugian langsung maupun tidak langsung akibat penggunaan Platform."}),S.jsx("h4",{className:"font-semibold",children:"9. Penghentian Akun"}),S.jsx("p",{children:"Penyelenggara berhak menangguhkan atau menghapus akun berdasarkan kebijakan internal dan/atau pelanggaran ketentuan."}),S.jsx("h4",{className:"font-semibold",children:"10. Perubahan Ketentuan"}),S.jsx("p",{children:"Ketentuan dapat diperbarui dari waktu ke waktu. Pengguna disarankan meninjau dokumen ini secara berkala."}),S.jsx("h4",{className:"font-semibold",children:"11. Hukum yang Berlaku"}),S.jsx("p",{children:"Dokumen ini diatur dan ditafsirkan berdasarkan hukum Republik Indonesia."})]}),S.jsx("hr",{}),S.jsx("h3",{className:"font-bold",children:"B. KEBIJAKAN PRIVASI"}),S.jsxs("div",{className:"space-y-2",children:[S.jsx("h4",{className:"font-semibold",children:"1. Pendahuluan"}),S.jsx("p",{children:"Kebijakan Privasi ini menjelaskan bagaimana Platform mengumpulkan, menggunakan, menyimpan, dan melindungi data pribadi Pengguna sesuai prinsip GDPR dan PDPA."}),S.jsx("h4",{className:"font-semibold",children:"2. Data yang Dikumpulkan"}),S.jsxs("ul",{className:"list-disc list-inside",children:[S.jsx("li",{children:"Data Identitas: Nama, email, nomor WhatsApp, kode referral."}),S.jsx("li",{children:"Data Akun & Aktivitas: Progress belajar, riwayat interaksi."}),S.jsx("li",{children:"Data Teknis: Alamat IP, perangkat, browser, log sistem, cookies."})]}),S.jsx("h4",{className:"font-semibold",children:"3. Tujuan Pemrosesan Data"}),S.jsx("p",{children:"Data digunakan untuk:"}),S.jsxs("ol",{className:"list-decimal list-inside",children:[S.jsx("li",{children:"Pengelolaan akun dan layanan"}),S.jsx("li",{children:"Penyimpanan progress belajar"}),S.jsx("li",{children:"Komunikasi layanan"}),S.jsx("li",{children:"Analitik dan pengembangan produk"}),S.jsx("li",{children:"Keamanan dan pencegahan penyalahgunaan"})]}),S.jsx("h4",{className:"font-semibold",children:"4. Dasar Hukum Pemrosesan (GDPR)"}),S.jsx("p",{children:"Pemrosesan data didasarkan pada:"}),S.jsxs("ul",{className:"list-disc list-inside",children:[S.jsx("li",{children:"Persetujuan Pengguna"}),S.jsx("li",{children:"Pelaksanaan kontrak layanan"}),S.jsx("li",{children:"Kepentingan sah Penyelenggara"}),S.jsx("li",{children:"Kewajiban hukum (jika ada)"})]}),S.jsx("h4",{className:"font-semibold",children:"5. Penyimpanan & Keamanan Data"}),S.jsxs("ol",{className:"list-decimal list-inside",children:[S.jsx("li",{children:"Data disimpan secara aman menggunakan infrastruktur cloud."}),S.jsx("li",{children:"Akses dibatasi kepada pihak berwenang."}),S.jsx("li",{children:"Langkah teknis dan organisasi diterapkan untuk mencegah kebocoran."})]}),S.jsx("h4",{className:"font-semibold",children:"6. Pembagian Data ke Pihak Ketiga"}),S.jsx("p",{children:"Data tidak dijual. Pembagian hanya dilakukan kepada penyedia layanan pendukung atau jika diwajibkan hukum, dengan kewajiban kerahasiaan."}),S.jsx("h4",{className:"font-semibold",children:"7. Hak Pengguna"}),S.jsx("p",{children:"Pengguna berhak untuk:"}),S.jsxs("ul",{className:"list-disc list-inside",children:[S.jsx("li",{children:"Mengakses dan memperbaiki data"}),S.jsx("li",{children:"Meminta penghapusan data"}),S.jsx("li",{children:"Menarik persetujuan"}),S.jsx("li",{children:"Membatasi pemrosesan data"})]}),S.jsx("h4",{className:"font-semibold",children:"8. Retensi Data"}),S.jsx("p",{children:"Data disimpan selama akun aktif atau sesuai kebutuhan layanan dan kewajiban hukum, lalu dihapus atau dianonimkan."}),S.jsx("h4",{className:"font-semibold",children:"9. Cookies"}),S.jsx("p",{children:"Cookies digunakan untuk preferensi, analitik, dan peningkatan pengalaman. Pengguna dapat mengelola cookies melalui pengaturan browser."}),S.jsx("h4",{className:"font-semibold",children:"10. Privasi Anak"}),S.jsx("p",{children:"Platform tidak ditujukan untuk anak di bawah 13 tahun tanpa izin orang tua/wali."}),S.jsx("h4",{className:"font-semibold",children:"11. Kontak"}),S.jsx("p",{children:"Pertanyaan terkait ketentuan atau privasi dapat disampaikan melalui kontak resmi Learning English Geuwat."})]}),S.jsx("hr",{}),S.jsx("h3",{className:"font-bold",children:"Persetujuan Pengguna"}),S.jsx("p",{children:"Dengan mencentang kotak persetujuan pada halaman pendaftaran, Pengguna menyatakan telah membaca dan menyetujui Syarat, Ketentuan, dan Kebijakan Privasi ini serta memberikan persetujuan atas pemrosesan data pribadi."})]})]})})]})]})};class ok extends K.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){return this.state.hasError?S.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 p-6 font-sans",children:S.jsxs("div",{className:"bg-white max-w-md w-full p-8 rounded-3xl shadow-xl border border-slate-100 text-center",children:[S.jsx("div",{className:"w-20 h-20 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-6 text-red-500 animate-pulse",children:S.jsx(rk,{size:40})}),S.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Oops! Terjadi Kesalahan"}),S.jsx("p",{className:"text-slate-500 text-sm mb-8 leading-relaxed",children:"Sistem mengalami kendala teknis. Jangan khawatir, data Anda aman. Silakan muat ulang halaman."}),S.jsxs("div",{className:"flex gap-3 justify-center",children:[S.jsxs("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition-colors flex items-center gap-2 shadow-lg shadow-indigo-200",children:[S.jsx(PI,{size:18})," Muat Ulang"]}),S.jsxs("button",{onClick:()=>window.location.href="/",className:"px-6 py-3 bg-slate-100 text-slate-600 rounded-xl font-bold hover:bg-slate-200 transition-colors flex items-center gap-2",children:[S.jsx(WP,{size:18})," Beranda"]})]}),this.state.error&&S.jsx("div",{className:"mt-8 p-4 bg-slate-50 rounded-xl border border-slate-200 text-left overflow-hidden",children:S.jsxs("p",{className:"text-[10px] font-mono text-slate-400 break-all",children:["Error: ",this.state.error.toString()]})})]})}):this.props.children}}const lk=ei.lazy(()=>yi(()=>import("./UserDashboard-C5WIOaVQ.js"),__vite__mapDeps([0,1,2,3,4])).then(r=>({default:r.UserDashboard}))),uk=ei.lazy(()=>yi(()=>import("./Subject-Bm1emzwC.js"),__vite__mapDeps([5,1,2,3,4,6,7,8])).then(r=>({default:r.Subject}))),ck=ei.lazy(()=>yi(()=>import("./MaterialList-CuZ9E3dY.js"),__vite__mapDeps([9,1,2,3,4,10,7,11,12])).then(r=>({default:r.MaterialList}))),hk=ei.lazy(()=>yi(()=>import("./Pronunciation-CrUB61FM.js"),__vite__mapDeps([13,1,2,3,4,6,14,15])).then(r=>({default:r.Pronunciation}))),fk=ei.lazy(()=>yi(()=>import("./ProfileSettings-sRpDLwUo.js"),__vite__mapDeps([16,1,2,3,4,17,18])).then(r=>({default:r.ProfileSettings}))),dk=ei.lazy(()=>yi(()=>import("./AdminReferral-BnAx1foM.js"),__vite__mapDeps([19,20,3,10,21,22,8,11,15,23])).then(r=>({default:r.AdminReferral}))),mk=ei.lazy(()=>yi(()=>import("./AdminDatabase-CEQyNwrV.js"),__vite__mapDeps([24,20,3,10,11,17,8,25,14,23])).then(r=>({default:r.AdminDatabase}))),pk=ei.lazy(()=>yi(()=>import("./AdminReward-C8R37aqU.js"),__vite__mapDeps([26,20,3,10,21,27,17,25,8,11])).then(r=>({default:r.AdminReward}))),gk=ei.lazy(()=>yi(()=>import("./AdminNotification-OwR_OZHP.js"),__vite__mapDeps([28,20,3,17,15,4])).then(r=>({default:r.AdminNotification}))),yk=ei.lazy(()=>yi(()=>import("./AdminContent-CRgDtEs9.js"),__vite__mapDeps([29,20,3,8,22,27,12,6,11,2,18])).then(r=>({default:r.AdminContent}))),_k=ei.lazy(()=>yi(()=>import("./AdminLord-DB8D2B1R.js"),__vite__mapDeps([30,20,3,18])).then(r=>({default:r.AdminLord}))),Jb=()=>S.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:S.jsx(Kg,{className:"w-8 h-8 text-indigo-600 animate-spin"})}),vk=()=>{const r=K.useRef(`sess_${Date.now()}_${Math.random().toString(36).substring(2,9)}`).current,[e,t]=K.useState(!1),[i,a]=K.useState({user:null,loading:!0,error:null});K.useEffect(()=>{let d=null;const p=GN(fl,async g=>{if(d&&(d(),d=null),g&&g.email){const _=g.email.toLowerCase(),T=_==="adminreferralcodegeuwat@email.com",A=_==="admindatabasegeuwat@email.com",O=_==="adminrewardgeuwat@email.com",z=_==="adminnotificationgeuwat@email.com",Q=_==="admincontentgeuwat@email.com",q=_==="adminlordgeuwat@email.com";let Z="users";T?Z="admin_referral_code":A?Z="admin_database":O?Z="admin_reward":z?Z="admin_notification":Q?Z="admin_content":q&&(Z="admin_lord");const ie=Wy(f_,Z,_);try{await DP(ie,{lastSessionId:r})}catch(H){console.warn("Session claim warning:",H)}d=NP(ie,H=>{if(H.exists()){const ae=H.data();if(ae.lastSessionId&&ae.lastSessionId!==r){t(!0);return}t(!1);const fe=ae.role||"user";let le=ye.USER;T?le=ye.ADMIN_REFERRAL:A?le=ye.ADMIN_DATABASE:O?le=ye.ADMIN_REWARD:z?le=ye.ADMIN_NOTIFICATION:Q?le=ye.ADMIN_CONTENT:q?le=ye.ADMIN_LORD:Object.values(ye).includes(fe)?le=fe:fe==="adminReferral"?le=ye.ADMIN_REFERRAL:fe==="adminDatabase"?le=ye.ADMIN_DATABASE:fe==="adminReward"?le=ye.ADMIN_REWARD:fe==="adminNotification"?le=ye.ADMIN_NOTIFICATION:fe==="adminContent"?le=ye.ADMIN_CONTENT:fe==="adminLord"?le=ye.ADMIN_LORD:fe==="admin"&&(le=ye.ADMIN_DATABASE),a({user:{uid:g.uid,email:_,displayName:ae.fullName||ae.displayName||_.split("@")[0],photoURL:ae.photoURL||null,role:le,createdAt:ae.createdAt,balance:ae.balance,level:ae.level,referralCode:ae.referralCode,validUntil:ae.validUntil,lastSessionId:ae.lastSessionId},loading:!1,error:null})}else{let ae=ye.USER;T&&(ae=ye.ADMIN_REFERRAL),A&&(ae=ye.ADMIN_DATABASE),O&&(ae=ye.ADMIN_REWARD),z&&(ae=ye.ADMIN_NOTIFICATION),Q&&(ae=ye.ADMIN_CONTENT),q&&(ae=ye.ADMIN_LORD),a({user:{uid:g.uid,email:_,displayName:_.split("@")[0]||"User",photoURL:null,role:ae,createdAt:new Date},loading:!1,error:null})}},H=>{fl.currentUser&&a(ae=>({...ae,loading:!1,error:"Gagal memuat data profil."}))})}else a({user:null,loading:!1,error:null}),t(!1)});return()=>{p(),d&&d()}},[]);const l=d=>{switch(d){case ye.ADMIN_LORD:return"/admin/lord";case ye.ADMIN_REFERRAL:return"/admin/referral";case ye.ADMIN_DATABASE:return"/admin/database";case ye.ADMIN_REWARD:return"/admin/reward";case ye.ADMIN_NOTIFICATION:return"/admin/notification";case ye.ADMIN_CONTENT:return"/admin/content";case ye.USER:default:return"/dashboard"}};if(e)return S.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-900 text-white p-6 text-center animate-in fade-in duration-500",children:[S.jsx("div",{className:"w-20 h-20 bg-slate-800 rounded-full flex items-center justify-center mb-6 shadow-2xl shadow-black ring-4 ring-slate-700",children:S.jsx(tk,{size:40,className:"text-red-500"})}),S.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Koneksi Terputus"}),S.jsx("p",{className:"text-slate-400 max-w-md mb-8 leading-relaxed",children:"Akun Anda sedang dibuka di perangkat lain. Klik tombol di bawah untuk menggunakan akun di sini."}),S.jsxs("button",{onClick:()=>window.location.reload(),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-8 py-3 rounded-xl font-bold transition-all flex items-center gap-2 shadow-lg shadow-indigo-900/50",children:[S.jsx(PI,{size:18})," Gunakan Di Sini"]})]});if(i.loading)return S.jsx(Jb,{});const c=({children:d,allowedRoles:p})=>{if(!i.user)return S.jsx(ff,{to:"/"});if(p){const g=i.user.role;if(!(p.includes(g)||g===ye.ADMIN_LORD))return S.jsx(ff,{to:l(g)})}return S.jsx(S.Fragment,{children:d})};return S.jsx(ok,{children:S.jsx(KC,{children:S.jsx(K.Suspense,{fallback:S.jsx(Jb,{}),children:S.jsxs(bC,{children:[S.jsx(Tn,{path:"/",element:i.user?S.jsx(ff,{to:l(i.user.role),replace:!0}):S.jsx(sk,{})}),S.jsx(Tn,{path:"/register",element:i.user?S.jsx(ff,{to:l(i.user.role),replace:!0}):S.jsx(ak,{})}),S.jsx(Tn,{path:"/dashboard",element:S.jsx(c,{children:S.jsx(lk,{user:i.user})})}),S.jsx(Tn,{path:"/subject",element:S.jsx(c,{children:S.jsx(uk,{user:i.user})})}),S.jsx(Tn,{path:"/materials/:subject",element:S.jsx(c,{children:S.jsx(ck,{user:i.user})})}),S.jsx(Tn,{path:"/pronunciation",element:S.jsx(c,{children:S.jsx(hk,{user:i.user})})}),S.jsx(Tn,{path:"/settings",element:S.jsx(c,{children:S.jsx(fk,{user:i.user})})}),S.jsx(Tn,{path:"/admin/lord",element:S.jsx(c,{allowedRoles:[ye.ADMIN_LORD],children:S.jsx(_k,{user:i.user})})}),S.jsx(Tn,{path:"/admin/referral",element:S.jsx(c,{allowedRoles:[ye.ADMIN_REFERRAL],children:S.jsx(dk,{user:i.user})})}),S.jsx(Tn,{path:"/admin/database",element:S.jsx(c,{allowedRoles:[ye.ADMIN_DATABASE],children:S.jsx(mk,{user:i.user})})}),S.jsx(Tn,{path:"/admin/reward",element:S.jsx(c,{allowedRoles:[ye.ADMIN_REWARD],children:S.jsx(pk,{user:i.user})})}),S.jsx(Tn,{path:"/admin/notification",element:S.jsx(c,{allowedRoles:[ye.ADMIN_NOTIFICATION],children:S.jsx(gk,{user:i.user})})}),S.jsx(Tn,{path:"/admin/content",element:S.jsx(c,{allowedRoles:[ye.ADMIN_CONTENT],children:S.jsx(yk,{user:i.user})})})]})})})})},kI=document.getElementById("root");if(!kI)throw new Error("Could not find root element to mount to");const Ek=AR.createRoot(kI);Ek.render(S.jsx(ei.StrictMode,{children:S.jsx(vk,{})}));export{BP as A,Nk as B,FP as C,Pk as D,YP as E,Vk as F,Kg as L,PI as R,rk as T,ye as U,Tk as a,Xb as b,Ei as c,Sk as d,f_ as e,fl as f,Dk as g,bk as h,DP as i,S as j,Wy as k,Ak as l,Ns as m,xk as n,Ck as o,NP as p,Ik as q,K as r,Uk as s,xP as t,md as u,kk as v,Rk as w,Mk as x,Ok as y,Lk as z};
